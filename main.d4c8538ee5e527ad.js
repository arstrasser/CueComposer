(self.webpackChunkCueComposer=self.webpackChunkCueComposer||[]).push([[179],{120:(Ul,Gl,rs)=>{"use strict";function Qt(n){return"function"==typeof n}function Jo(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Dt=Jo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Q(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ve{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Qt(i))try{i()}catch(s){e=s instanceof Dt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ke(s)}catch(o){e=e??[],o instanceof Dt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Dt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ke(e);else{if(e instanceof ve){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Q(t,e)}remove(e){const{_finalizers:t}=this;t&&Q(t,e),e instanceof ve&&e._removeParent(this)}}ve.EMPTY=(()=>{const n=new ve;return n.closed=!0,n})();const He=ve.EMPTY;function Qe(n){return n instanceof ve||n&&"closed"in n&&Qt(n.remove)&&Qt(n.add)&&Qt(n.unsubscribe)}function Ke(n){Qt(n)?n():n.unsubscribe()}const ce={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ze={setTimeout(n,e,...t){const{delegate:i}=ze;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ze;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ye(n){ze.setTimeout(()=>{const{onUnhandledError:e}=ce;if(!e)throw n;e(n)})}function ke(){}const Se=we("C",void 0,void 0);function we(n,e,t){return{kind:n,value:e,error:t}}let Fe=null;function tt(n){if(ce.useDeprecatedSynchronousErrorHandling){const e=!Fe;if(e&&(Fe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Fe;if(Fe=null,t)throw i}}else n()}class je extends ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qe(e)&&e.add(this)):this.destination=P}static create(e,t,i){return new X(e,t,i)}next(e){this.isStopped?N(function re(n){return we("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?N(function Ee(n){return we("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?N(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function me(n,e){return Pe.call(n,e)}class Te{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){M(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){M(i)}else M(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){M(t)}}}class X extends je{constructor(e,t,i){let r;if(super(),Qt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ce.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&me(e.next,s),error:e.error&&me(e.error,s),complete:e.complete&&me(e.complete,s)}):r=e}this.destination=new Te(r)}}function M(n){ce.useDeprecatedSynchronousErrorHandling?function Ne(n){ce.useDeprecatedSynchronousErrorHandling&&Fe&&(Fe.errorThrown=!0,Fe.error=n)}(n):Ye(n)}function N(n,e){const{onStoppedNotification:t}=ce;t&&ze.setTimeout(()=>t(n,e))}const P={closed:!0,next:ke,error:function E(n){throw n},complete:ke},S="function"==typeof Symbol&&Symbol.observable||"@@observable";function F(n){return n}function W(n){return 0===n.length?F:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let D=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function De(n){return n&&n instanceof je||function ue(n){return n&&Qt(n.next)&&Qt(n.error)&&Qt(n.complete)}(n)&&Qe(n)}(t)?t:new X(t,i,r);return tt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=K(i))((r,s)=>{const o=new X({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[S](){return this}pipe(...t){return W(t)(this)}toPromise(t){return new(t=K(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function K(n){var e;return null!==(e=n??ce.Promise)&&void 0!==e?e:Promise}const ut=Jo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let he=(()=>{class n extends D{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new pe(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new ut}next(t){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?He:(this.currentObservers=null,s.push(t),new ve(()=>{this.currentObservers=null,Q(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new D;return t.source=this,t}}return n.create=(e,t)=>new pe(e,t),n})();class pe extends he{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:He}}function bt(n){return Qt(n?.lift)}function vt(n){return e=>{if(bt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(n,e,t,i,r){return new an(n,e,t,i,r)}class an extends je{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return vt((t,i)=>{let r=0;t.subscribe(ft(i,s=>{i.next(n.call(e,s,r++))}))})}function mr(n){return this instanceof mr?(this.v=n,this):new mr(n)}function or(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof mr?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function qs(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Tr(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const mb=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function hD(n){return Qt(n?.then)}function fD(n){return Qt(n[S])}function pD(n){return Symbol.asyncIterator&&Qt(n?.[Symbol.asyncIterator])}function mD(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gD=function mH(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function _D(n){return Qt(n?.[gD])}function vD(n){return or(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield mr(t.read());if(r)return yield mr(void 0);yield yield mr(i)}}finally{t.releaseLock()}})}function yD(n){return Qt(n?.getReader)}function Ar(n){if(n instanceof D)return n;if(null!=n){if(fD(n))return function gH(n){return new D(e=>{const t=n[S]();if(Qt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(mb(n))return function _H(n){return new D(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(hD(n))return function vH(n){return new D(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ye)})}(n);if(pD(n))return bD(n);if(_D(n))return function yH(n){return new D(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(yD(n))return function bH(n){return bD(vD(n))}(n)}throw mD(n)}function bD(n){return new D(e=>{(function wH(n,e){var t,i,r,s;return function li(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=qs(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ea(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Fi(n,e,t=1/0){return Qt(e)?Fi((i,r)=>Oe((s,o)=>e(i,s,r,o))(Ar(n(i,r))),t):("number"==typeof e&&(t=e),vt((i,r)=>function xH(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let g=!1;Ar(t(m,u++)).subscribe(ft(e,_=>{r?.(_),s?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const _=l.shift();o?ea(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(ft(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function _u(n=1/0){return Fi(F,n)}const Xs=new D(n=>n.complete());function wD(n){return n&&Qt(n.schedule)}function gb(n){return n[n.length-1]}function xD(n){return Qt(gb(n))?n.pop():void 0}function Ph(n){return wD(gb(n))?n.pop():void 0}function CD(n,e=0){return vt((t,i)=>{t.subscribe(ft(i,r=>ea(i,n,()=>i.next(r),e),()=>ea(i,n,()=>i.complete(),e),r=>ea(i,n,()=>i.error(r),e)))})}function MD(n,e=0){return vt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function SD(n,e){if(!n)throw new Error("Iterable cannot be null");return new D(t=>{ea(t,e,()=>{const i=n[Symbol.asyncIterator]();ea(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Ai(n,e){return e?function RH(n,e){if(null!=n){if(fD(n))return function SH(n,e){return Ar(n).pipe(MD(e),CD(e))}(n,e);if(mb(n))return function DH(n,e){return new D(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(hD(n))return function EH(n,e){return Ar(n).pipe(MD(e),CD(e))}(n,e);if(pD(n))return SD(n,e);if(_D(n))return function TH(n,e){return new D(t=>{let i;return ea(t,e,()=>{i=n[gD](),ea(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Qt(i?.return)&&i.return()})}(n,e);if(yD(n))return function AH(n,e){return SD(vD(n),e)}(n,e)}throw mD(n)}(n,e):Ar(n)}function gr(...n){const e=Ph(n),t=function MH(n,e){return"number"==typeof gb(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Ar(i[0]):_u(t)(Ai(i,e)):Xs}function vu(n={}){const{connector:e=(()=>new he),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),m?.unsubscribe()};return vt((m,g)=>{c++,!d&&!u&&h();const _=l=l??e();g.add(()=>{c--,0===c&&!d&&!u&&(a=_b(p,r))}),_.subscribe(g),!o&&c>0&&(o=new X({next:v=>_.next(v),error:v=>{d=!0,h(),a=_b(f,t,v),_.error(v)},complete:()=>{u=!0,h(),a=_b(f,i),_.complete()}}),Ar(m).subscribe(o))})(s)}}function _b(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new X({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function ii(n){for(let e in n)if(n[e]===ii)return e;throw Error("Could not find renamed property on target object.")}function vb(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ri(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ri).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function yb(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const IH=ii({__forward_ref__:ii});function An(n){return n.__forward_ref__=An,n.toString=function(){return ri(this())},n}function zt(n){return bb(n)?n():n}function bb(n){return"function"==typeof n&&n.hasOwnProperty(IH)&&n.__forward_ref__===An}class _e extends Error{constructor(e,t){super(function Sm(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Jt(n){return"string"==typeof n?n:null==n?"":String(n)}function Em(n,e){throw new _e(-201,!1)}function as(n,e){null==n&&function Un(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Je(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function wb(n){return ED(n,Dm)||ED(n,TD)}function ED(n,e){return n.hasOwnProperty(e)?n[e]:null}function DD(n){return n&&(n.hasOwnProperty(xb)||n.hasOwnProperty(VH))?n[xb]:null}const Dm=ii({\u0275prov:ii}),xb=ii({\u0275inj:ii}),TD=ii({ngInjectableDef:ii}),VH=ii({ngInjectorDef:ii});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let Cb;function Ds(n){const e=Cb;return Cb=n,e}function AD(n,e,t){const i=wb(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Pt.Optional?null:void 0!==e?e:void Em(ri(n))}function qa(n){return{toString:n}.toString()}var Ks=(()=>((Ks=Ks||{})[Ks.OnPush=0]="OnPush",Ks[Ks.Default=1]="Default",Ks))(),Ys=(()=>{return(n=Ys||(Ys={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ys;var n})();const ei=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yu={},Hn=[],Tm=ii({\u0275cmp:ii}),Mb=ii({\u0275dir:ii}),Sb=ii({\u0275pipe:ii}),RD=ii({\u0275mod:ii}),na=ii({\u0275fac:ii}),Oh=ii({__NG_ELEMENT_ID__:ii});let zH=0;function Wt(n){return qa(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ks.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ys.Emulated,id:"c"+zH++,styles:n.styles||Hn,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=PD(n.inputs,i),r.outputs=PD(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(ID).filter(kD):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ir).filter(kD):null,r})}function ID(n){return Xn(n)||Rr(n)}function kD(n){return null!==n}const GH={};function en(n){return qa(()=>{const e={type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(GH[n.id]=n.type),e})}function PD(n,e){if(null==n)return yu;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Ae=Wt;function Xn(n){return n[Tm]||null}function Rr(n){return n[Mb]||null}function Ir(n){return n[Sb]||null}function ls(n,e){const t=n[RD]||null;if(!t&&!0===e)throw new Error(`Type ${ri(n)} does not have '\u0275mod' property.`);return t}function Kr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Qs(n){return Array.isArray(n)&&!0===n[1]}function Tb(n){return 0!=(8&n.flags)}function km(n){return 2==(2&n.flags)}function Pm(n){return 1==(1&n.flags)}function Js(n){return null!==n.template}function XH(n){return 0!=(256&n[2])}function Yl(n,e){return n.hasOwnProperty(na)?n[na]:null}class ZH{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ri(){return FD}function FD(n){return n.type.prototype.ngOnChanges&&(n.setInput=JH),QH}function QH(){const n=BD(this),e=n?.current;if(e){const t=n.previous;if(t===yu)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function JH(n,e,t,i){const r=BD(n)||function ez(n,e){return n[ND]=e}(n,{previous:yu,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new ZH(l&&l.currentValue,e,o===yu),n[i]=e}Ri.ngInherit=!0;const ND="__ngSimpleChanges__";function BD(n){return n[ND]||null}function Ni(n){for(;Array.isArray(n);)n=n[0];return n}function Om(n,e){return Ni(e[n])}function Rs(n,e){return Ni(e[n.index])}function Pb(n,e){return n.data[e]}function us(n,e){const t=e[n];return Kr(t)?t:t[0]}function VD(n){return 4==(4&n[2])}function Ob(n){return 64==(64&n[2])}function Xa(n,e){return null==e?null:n[e]}function HD(n){n[18]=0}function Lb(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Xt={lFrame:KD(null),bindingsEnabled:!0};function UD(){return Xt.bindingsEnabled}function xe(){return Xt.lFrame.lView}function Rn(){return Xt.lFrame.tView}function ui(n){return Xt.lFrame.contextLView=n,n[8]}function di(n){return Xt.lFrame.contextLView=null,n}function Yi(){let n=GD();for(;null!==n&&64===n.type;)n=n.parent;return n}function GD(){return Xt.lFrame.currentTNode}function xo(n,e){const t=Xt.lFrame;t.currentTNode=n,t.isParent=e}function Fb(){return Xt.lFrame.isParent}function Nb(){Xt.lFrame.isParent=!1}function kr(){const n=Xt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Su(){return Xt.lFrame.bindingIndex++}function ra(n){const e=Xt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function pz(n,e){const t=Xt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bb(e)}function Bb(n){Xt.lFrame.currentDirectiveIndex=n}function Vb(n){const e=Xt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function $D(){return Xt.lFrame.currentQueryIndex}function Hb(n){Xt.lFrame.currentQueryIndex=n}function gz(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function qD(n,e,t){if(t&Pt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Pt.Host||(r=gz(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Xt.lFrame=XD();return i.currentTNode=e,i.lView=n,!0}function zb(n){const e=XD(),t=n[1];Xt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function XD(){const n=Xt.lFrame,e=null===n?null:n.child;return null===e?KD(n):e}function KD(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function YD(){const n=Xt.lFrame;return Xt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ZD=YD;function Ub(){const n=YD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pr(){return Xt.lFrame.selectedIndex}function Ka(n){Xt.lFrame.selectedIndex=n}function Mi(){const n=Xt.lFrame;return Pb(n.tView,n.selectedIndex)}function Fm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Nm(n,e,t){QD(n,e,3,t)}function Bm(n,e,t,i){(3&n[2])===t&&QD(n,e,t,i)}function Gb(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function QD(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(Sz(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function Sz(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Vh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Vm(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];eT(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function JD(n){return 3===n||4===n||6===n}function eT(n){return 64===n.charCodeAt(0)}function Hm(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||tT(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function tT(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function nT(n){return-1!==n}function Eu(n){return 32767&n}function Du(n,e){let t=function Rz(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let jb=!0;function zm(n){const e=jb;return jb=n,e}let Iz=0;const Co={};function zh(n,e){const t=qb(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,$b(i.data,n),$b(e,null),$b(i.blueprint,null));const r=Um(n,e),s=n.injectorIndex;if(nT(r)){const o=Eu(r),a=Du(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function $b(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Um(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=dT(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Gm(n,e,t){!function kz(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Oh)&&(i=t[Oh]),null==i&&(i=t[Oh]=Iz++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function sT(n,e,t){if(t&Pt.Optional)return n;Em()}function oT(n,e,t,i){if(t&Pt.Optional&&void 0===i&&(i=null),0==(t&(Pt.Self|Pt.Host))){const r=n[9],s=Ds(void 0);try{return r?r.get(e,i,t&Pt.Optional):AD(e,i,t&Pt.Optional)}finally{Ds(s)}}return sT(i,0,t)}function aT(n,e,t,i=Pt.Default,r){if(null!==n){if(1024&e[2]){const o=function Nz(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=lT(s,o,t,i|Pt.Self,Co);if(a!==Co)return a;let l=s.parent;if(!l){const c=o[21];if(c){const u=c.get(t,Co,i);if(u!==Co)return u}l=dT(o),o=o[15]}s=l}return r}(n,e,t,i,Co);if(o!==Co)return o}const s=lT(n,e,t,i,Co);if(s!==Co)return s}return oT(e,t,i,r)}function lT(n,e,t,i,r){const s=function Lz(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Oh)?n[Oh]:void 0;return"number"==typeof e?e>=0?255&e:Fz:e}(t);if("function"==typeof s){if(!qD(e,n,i))return i&Pt.Host?sT(r,0,i):oT(e,t,i,r);try{const o=s(i);if(null!=o||i&Pt.Optional)return o;Em()}finally{ZD()}}else if("number"==typeof s){let o=null,a=qb(n,e),l=-1,c=i&Pt.Host?e[16][6]:null;for((-1===a||i&Pt.SkipSelf)&&(l=-1===a?Um(n,e):e[a+8],-1!==l&&uT(i,!1)?(o=e[1],a=Eu(l),e=Du(l,e)):a=-1);-1!==a;){const u=e[1];if(cT(s,a,u.data)){const d=Oz(a,e,t,o,i,c);if(d!==Co)return d}l=e[a+8],-1!==l&&uT(i,e[1].data[a+8]===c)&&cT(s,a,e)?(o=u,a=Eu(l),e=Du(l,e)):a=-1}}return r}function Oz(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Wm(a,o,t,null==i?km(a)&&jb:i!=o&&0!=(3&a.type),r&Pt.Host&&s===a);return null!==u?Uh(e,o,u,a):Co}function Wm(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Js(f)&&f.type===t)return l}return null}function Uh(n,e,t,i){let r=n[t];const s=e.data;if(function Ez(n){return n instanceof Vh}(r)){const o=r;o.resolving&&function kH(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new _e(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Vn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Jt(n)}(s[t]));const a=zm(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ds(o.injectImpl):null;qD(n,i,Pt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function Mz(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=FD(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Ds(l),zm(a),o.resolving=!1,ZD()}}return r}function cT(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function uT(n,e){return!(n&Pt.Self||n&Pt.Host&&e)}class Tu{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return aT(this._tNode,this._lView,e,i,t)}}function Fz(){return new Tu(Yi(),xe())}function Fn(n){return qa(()=>{const e=n.prototype.constructor,t=e[na]||Xb(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[na]||Xb(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Xb(n){return bb(n)?()=>{const e=Xb(zt(n));return e&&e()}:Yl(n)}function dT(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Za(n){return function Pz(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(JD(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Yi(),n)}const Ru="__parameters__";function ku(n,e,t){return qa(()=>{const i=function Kb(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Ru)?l[Ru]:Object.defineProperty(l,Ru,{value:[]})[Ru];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Je({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Vz=new Ie("AnalyzeForEntryComponents");function ds(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),ds(i,e)):e!==n&&e.push(i)}return e}function sa(n,e){n.forEach(t=>Array.isArray(t)?sa(t,e):e(t))}function fT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function jm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function hs(n,e,t){let i=Pu(n,e);return i>=0?n[1|i]=t:(i=~i,function Uz(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Zb(n,e){const t=Pu(n,e);if(t>=0)return n[1|t]}function Pu(n,e){return function gT(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const $h={},Jb="__NG_DI_FLAG__",qm="ngTempTokenPath",Yz=/\n/gm,_T="__source";let qh;function Ou(n){const e=qh;return qh=n,e}function Qz(n,e=Pt.Default){if(void 0===qh)throw new _e(-203,!1);return null===qh?AD(n,void 0,e):qh.get(n,e&Pt.Optional?null:void 0,e)}function Y(n,e=Pt.Default){return(function HH(){return Cb}()||Qz)(zt(n),e)}function Is(n,e=Pt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Y(n,e)}function e0(n){const e=[];for(let t=0;t<n.length;t++){const i=zt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new _e(900,!1);let r,s=Pt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Jz(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(Y(r,s))}else e.push(Y(i))}return e}function Xh(n,e){return n[Jb]=e,n.prototype[Jb]=e,n}function Jz(n){return n[Jb]}const Mo=Xh(ku("Optional"),8),Lu=Xh(ku("SkipSelf"),4);let n0,Ym;function Nu(n){return function r0(){if(void 0===Ym&&(Ym=null,ei.trustedTypes))try{Ym=ei.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ym}()?.createHTML(n)||n}class Zl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pU extends Zl{getTypeName(){return"HTML"}}class mU extends Zl{getTypeName(){return"Style"}}class gU extends Zl{getTypeName(){return"Script"}}class _U extends Zl{getTypeName(){return"URL"}}class vU extends Zl{getTypeName(){return"ResourceURL"}}function fs(n){return n instanceof Zl?n.changingThisBreaksApplicationSecurity:n}function So(n,e){const t=function yU(n){return n instanceof Zl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class SU{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Nu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class EU{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Nu(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Nu(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const TU=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,AU=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zh(n){return(n=String(n)).match(TU)||n.match(AU)?n:"unsafe:"+n}function Eo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Qh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const kT=Eo("area,br,col,hr,img,wbr"),PT=Eo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),OT=Eo("rp,rt"),o0=Qh(kT,Qh(PT,Eo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qh(OT,Eo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qh(OT,PT)),a0=Eo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),l0=Eo("srcset"),LT=Qh(a0,l0,Eo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Eo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),RU=Eo("script,style,template");class IU{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!o0.hasOwnProperty(t))return this.sanitizedSomething=!0,!RU.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!LT.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;a0[a]&&(l=Zh(l)),l0[a]&&(n=l,l=(n=String(n)).split(",").map(e=>Zh(e.trim())).join(", ")),this.buf.push(" ",o,'="',FT(l),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();o0.hasOwnProperty(t)&&!kT.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(FT(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const kU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,PU=/([^\#-~ |!])/g;function FT(n){return n.replace(/&/g,"&amp;").replace(kU,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(PU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qm;function NT(n,e){let t=null;try{Qm=Qm||function RT(n){const e=new EU(n);return function DU(){try{return!!(new window.DOMParser).parseFromString(Nu(""),"text/html")}catch{return!1}}()?new SU(e):e}(n);let i=e?String(e):"";t=Qm.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Qm.getInertBodyElement(i)}while(i!==s);return Nu((new IU).sanitizeChildren(c0(t)||t))}finally{if(t){const i=c0(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function c0(n){return"content"in n&&function OU(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var zn=(()=>((zn=zn||{})[zn.NONE=0]="NONE",zn[zn.HTML=1]="HTML",zn[zn.STYLE=2]="STYLE",zn[zn.SCRIPT=3]="SCRIPT",zn[zn.URL=4]="URL",zn[zn.RESOURCE_URL=5]="RESOURCE_URL",zn))();const d0=new Ie("ENVIRONMENT_INITIALIZER"),VT=new Ie("INJECTOR",-1),HT=new Ie("INJECTOR_DEF_TYPES");class zT{get(e,t=$h){if(t===$h){const i=new Error(`NullInjectorError: No provider for ${ri(e)}!`);throw i.name="NullInjectorError",i}return t}}function UU(...n){return{\u0275providers:UT(0,n)}}function UT(n,...e){const t=[],i=new Set;let r;return sa(e,s=>{const o=s;h0(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&GT(r,t),t}function GT(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];sa(r,s=>{e.push(s)})}}function h0(n,e,t,i){if(!(n=zt(n)))return!1;let r=null,s=DD(n);const o=!s&&Xn(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=DD(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)h0(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{sa(s.imports,u=>{h0(u,e,t,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&GT(c,e)}if(!a){const c=Yl(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Hn},{provide:HT,useValue:r,multi:!0},{provide:d0,useValue:()=>Y(r),multi:!0})}const l=s.providers;null==l||a||sa(l,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}const GU=ii({provide:String,useValue:ii});function f0(n){return null!==n&&"object"==typeof n&&GU in n}function Ql(n){return"function"==typeof n}const p0=new Ie("Set Injector scope."),Jm={},jU={};let m0;function eg(){return void 0===m0&&(m0=new zT),m0}class Qa{}class $T extends Qa{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_0(e,o=>this.processProvider(o)),this.records.set(VT,Bu(void 0,this)),r.has("environment")&&this.records.set(Qa,Bu(void 0,this));const s=this.records.get(p0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HT.multi,Hn,Pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Ou(this),i=Ds(void 0);try{return e()}finally{Ou(t),Ds(i)}}get(e,t=$h,i=Pt.Default){this.assertNotDestroyed();const r=Ou(this),s=Ds(void 0);try{if(!(i&Pt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function YU(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ie}(e)&&wb(e);a=l&&this.injectableDefInScope(l)?Bu(g0(e),Jm):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Pt.Self?eg():this.parent).get(e,t=i&Pt.Optional&&t===$h?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[qm]=o[qm]||[]).unshift(ri(e)),r)throw o;return function eU(n,e,t,i){const r=n[qm];throw e[_T]&&r.unshift(e[_T]),n.message=function tU(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=ri(e);if(Array.isArray(e))r=e.map(ri).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ri(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Yz,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[qm]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Ds(s),Ou(r)}}resolveInjectorInitializers(){const e=Ou(this),t=Ds(void 0);try{const i=this.get(d0.multi,Hn,Pt.Self);for(const r of i)r()}finally{Ou(e),Ds(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(ri(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){let t=Ql(e=zt(e))?e:zt(e&&e.provide);const i=function qU(n){return f0(n)?Bu(void 0,n.useValue):Bu(qT(n),Jm)}(e);if(Ql(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Bu(void 0,Jm,!0),r.factory=()=>e0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Jm&&(t.value=jU,t.value=t.factory()),"object"==typeof t.value&&t.value&&function KU(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=zt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function g0(n){const e=wb(n),t=null!==e?e.factory:Yl(n);if(null!==t)return t;if(n instanceof Ie)throw new _e(204,!1);if(n instanceof Function)return function $U(n){const e=n.length;if(e>0)throw jh(e,"?"),new _e(204,!1);const t=function NH(n){const e=n&&(n[Dm]||n[TD]);if(e){const t=function BH(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new _e(204,!1)}function qT(n,e,t){let i;if(Ql(n)){const r=zt(n);return Yl(r)||g0(r)}if(f0(n))i=()=>zt(n.useValue);else if(function jT(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...e0(n.deps||[]));else if(function WT(n){return!(!n||!n.useExisting)}(n))i=()=>Y(zt(n.useExisting));else{const r=zt(n&&(n.useClass||n.provide));if(!function XU(n){return!!n.deps}(n))return Yl(r)||g0(r);i=()=>new r(...e0(n.deps))}return i}function Bu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZU(n){return!!n.\u0275providers}function _0(n,e){for(const t of n)Array.isArray(t)?_0(t,e):ZU(t)?_0(t.\u0275providers,e):e(t)}class XT{}class e4{resolveComponentFactory(e){throw function JU(n){const e=Error(`No component factory found for ${ri(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ja=(()=>{class n{}return n.NULL=new e4,n})();function t4(){return Vu(Yi(),xe())}function Vu(n,e){return new Et(Rs(n,e))}let Et=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=t4,n})();function n4(n){return n instanceof Et?n.nativeElement:n}class ef{}let eo=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function r4(){const n=xe(),t=us(Yi().index,n);return(Kr(t)?t:n)[11]}(),n})(),s4=(()=>{class n{}return n.\u0275prov=Je({token:n,providedIn:"root",factory:()=>null}),n})();class Jl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const o4=new Jl("14.1.0"),v0={};function C0(n){return n.ngOriginalError}class oa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&C0(e);for(;t&&C0(t);)t=C0(t);return t||null}}const M0=new Map;let y4=0;const E0="__ngContext__";function yr(n,e){Kr(e)?(n[E0]=e[20],function w4(n){M0.set(n[20],n)}(e)):n[E0]=e}function tf(n){const e=n[E0];return"number"==typeof e?function eA(n){return M0.get(n)||null}(e):e||null}function D0(n){const e=tf(n);return e?Kr(e)?e:e.lView:null}const R4=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(ei))();function aa(n){return n instanceof Function?n():n}var Yr=(()=>((Yr=Yr||{})[Yr.Important=1]="Important",Yr[Yr.DashCase=2]="DashCase",Yr))();function A0(n,e){return undefined(n,e)}function nf(n){const e=n[3];return Qs(e)?e[3]:e}function R0(n){return lA(n[13])}function I0(n){return lA(n[4])}function lA(n){for(;null!==n&&!Qs(n);)n=n[4];return n}function zu(n,e,t,i,r){if(null!=i){let s,o=!1;Qs(i)?s=i:Kr(i)&&(o=!0,i=i[0]);const a=Ni(i);0===n&&null!==t?null==r?pA(e,t,a):ec(e,t,a,r||null,!0):1===n&&null!==t?ec(e,t,a,r||null,!0):2===n?function wA(n,e,t){const i=tg(n,e);i&&function X4(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Z4(n,e,t,i,r){const s=t[7];s!==Ni(t)&&zu(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];rf(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function P0(n,e,t){return n.createElement(e,t)}function uA(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,Lb(r,-1)),t.splice(i,1)}function O0(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&uA(r,i),e>0&&(n[t-1][4]=i[4]);const s=jm(n,10+e);!function H4(n,e){rf(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function dA(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&rf(n,e,t,3,null,null),function G4(n){let e=n[13];if(!e)return L0(n[1],n);for(;e;){let t=null;if(Kr(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Kr(e)&&L0(e[1],e),e=e[3];null===e&&(e=n),Kr(e)&&L0(e[1],e),t=e&&e[4]}e=t}}(e)}}function L0(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function q4(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Vh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function $4(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Ni(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Qs(e[3])){t!==e[3]&&uA(t,e);const i=e[19];null!==i&&i.detachView(n)}!function x4(n){M0.delete(n[20])}(e)}}function hA(n,e,t){return function fA(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Ys.None||r===Ys.Emulated)return null}return Rs(i,t)}(n,e.parent,t)}function ec(n,e,t,i,r){n.insertBefore(e,t,i,r)}function pA(n,e,t){n.appendChild(e,t)}function mA(n,e,t,i,r){null!==i?ec(n,e,t,i,r):pA(n,e,t)}function tg(n,e){return n.parentNode(e)}function gA(n,e,t){return vA(n,e,t)}let vA=function _A(n,e,t){return 40&n.type?Rs(n,t):null};function ng(n,e,t,i){const r=hA(n,i,e),s=e[11],a=gA(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)mA(s,r,t[l],a,!1);else mA(s,r,t,a,!1)}function ig(n,e){if(null!==e){const t=e.type;if(3&t)return Rs(e,n);if(4&t)return N0(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return ig(n,i);{const r=n[e.index];return Qs(r)?N0(-1,r):Ni(r)}}if(32&t)return A0(e,n)()||Ni(n[e.index]);{const i=bA(n,e);return null!==i?Array.isArray(i)?i[0]:ig(nf(n[16]),i):ig(n,e.next)}}return null}function bA(n,e){return null!==e?n[16][6].projection[e.projection]:null}function N0(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return ig(i,r)}return e[7]}function B0(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&yr(Ni(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)B0(n,e,t.child,i,r,s,!1),zu(e,n,r,a,s);else if(32&l){const c=A0(t,i);let u;for(;u=c();)zu(e,n,r,u,s);zu(e,n,r,a,s)}else 16&l?xA(n,e,i,t,r,s):zu(e,n,r,a,s);t=o?t.projectionNext:t.next}}function rf(n,e,t,i,r,s){B0(t,i,n.firstChild,e,r,s,!1)}function xA(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)zu(e,n,r,l[c],s);else B0(n,e,l,o[3],r,s,!0)}function CA(n,e,t){n.setAttribute(e,"style",t)}function V0(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function MA(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const SA="ng-template";function J4(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==MA(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function EA(n){return 4===n.type&&n.value!==SA}function e5(n,e,t){return e===(4!==n.type||t?n.value:SA)}function t5(n,e,t){let i=4;const r=n.attrs||[],s=function s5(n){for(let e=0;e<n.length;e++)if(JD(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!e5(n,l,t)||""===l&&1===e.length){if(to(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!J4(n.attrs,c,t)){if(to(i))return!1;o=!0}continue}const d=n5(8&i?"class":l,r,EA(n),t);if(-1===d){if(to(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==MA(f,c,0)||2&i&&c!==h){if(to(i))return!1;o=!0}}}}else{if(!o&&!to(i)&&!to(l))return!1;if(o&&to(l))continue;o=!1,i=l|1&i}}return to(i)||o}function to(n){return 0==(1&n)}function n5(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function o5(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function DA(n,e,t=!1){for(let i=0;i<e.length;i++)if(t5(n,e[i],t))return!0;return!1}function a5(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function TA(n,e){return n?":not("+e.trim()+")":e}function l5(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!to(o)&&(e+=TA(s,r),r=""),i=o,s=s||!to(i);t++}return""!==r&&(e+=TA(s,r)),e}const tn={};function Ue(n){AA(Rn(),xe(),Pr()+n,!1)}function AA(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Nm(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Bm(e,s,0,t)}Ka(t)}function PA(n,e=null,t=null,i){const r=OA(n,e,t,i);return r.resolveInjectorInitializers(),r}function OA(n,e=null,t=null,i,r=new Set){const s=[t||Hn,UU(n)];return i=i||("object"==typeof n?void 0:ri(n)),new $T(s,e||eg(),i||null,r)}let Bi=(()=>{class n{static create(t,i){if(Array.isArray(t))return PA({name:""},i,t,"");{const r=t.name??"";return PA({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=$h,n.NULL=new zT,n.\u0275prov=Je({token:n,providedIn:"any",factory:()=>Y(VT)}),n.__NG_ELEMENT_ID__=-1,n})();function R(n,e=Pt.Default){const t=xe();return null===t?Y(n,e):aT(Yi(),t,zt(n),e)}function sg(){throw new Error("invalid")}function og(n,e){return n<<17|e<<2}function no(n){return n>>17&32767}function W0(n){return 2|n}function la(n){return(131068&n)>>2}function j0(n,e){return-131069&n|e<<2}function $0(n){return 1|n}function ZA(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Hb(r),o.contentQueries(2,e[s],s)}}}function cg(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=r,d[2]=76|i,(null!==u||n&&1024&n[2])&&(d[2]|=1024),HD(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[20]=function b4(){return y4++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function Gu(n,e,t,i,r){let s=n.data[e];if(null===s)s=function tw(n,e,t,i,r){const s=GD(),o=Fb(),l=n.data[e]=function j5(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function fz(){return Xt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Bh(){const n=Xt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return xo(s,!0),s}function Wu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ug(n,e,t){zb(e);try{const i=n.viewQuery;null!==i&&uw(1,i,t);const r=n.template;null!==r&&QA(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ZA(n,e),n.staticViewQueries&&uw(2,n.viewQuery,t);const s=n.components;null!==s&&function z5(n,e){for(let t=0;t<e.length;t++)aG(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Ub()}}function sf(n,e,t,i){const r=e[2];if(128!=(128&r)){zb(e);try{HD(e),function WD(n){return Xt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&QA(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&Nm(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Bm(e,c,0,null),Gb(e,0)}if(function sG(n){for(let e=R0(n);null!==e;e=I0(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&Lb(s,1),r[2]|=512}}}(e),function rG(n){for(let e=R0(n);null!==e;e=I0(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Ob(i)&&sf(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&ZA(n,e),o){const c=n.contentCheckHooks;null!==c&&Nm(e,c)}else{const c=n.contentHooks;null!==c&&Bm(e,c,1),Gb(e,1)}!function V5(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Ka(~r);else{const s=r,o=t[++i],a=t[++i];pz(o,s),a(2,e[s])}}}finally{Ka(-1)}}(n,e);const a=n.components;null!==a&&function H5(n,e){for(let t=0;t<e.length;t++)oG(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&uw(2,l,i),o){const c=n.viewCheckHooks;null!==c&&Nm(e,c)}else{const c=n.viewHooks;null!==c&&Bm(e,c,2),Gb(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Lb(e[3],-1))}finally{Ub()}}}function U5(n,e,t,i){const r=e[10],o=VD(e);try{!o&&r.begin&&r.begin(),o&&ug(n,e,i),sf(n,e,t,i)}finally{!o&&r.end&&r.end()}}function QA(n,e,t,i,r){const s=Pr(),o=2&i;try{Ka(-1),o&&e.length>22&&AA(n,e,22,!1),t(i,r)}finally{Ka(s)}}function JA(n,e,t){if(Tb(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function nw(n,e,t){!UD()||(function Y5(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||zh(t,e),yr(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Js(l);c&&tG(e,t,l);const u=Uh(e,n,a,t);yr(u,e),null!==o&&nG(0,a-r,u,l,0,o),c&&(us(t.index,e)[8]=u)}}(n,e,t,Rs(t,e)),128==(128&t.flags)&&function Z5(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function mz(){return Xt.lFrame.currentDirectiveIndex}();try{Ka(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];Bb(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&a1(l,c)}}finally{Ka(-1),Bb(o)}}(n,e,t))}function iw(n,e,t=Rs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function e1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=rw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function rw(n,e,t,i,r,s,o,a,l,c){const u=22+i,d=u+r,h=function G5(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:tn);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function t1(n,e,t,i){const r=p1(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&m1(n).push(i,r.length-1))}function n1(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function r1(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||EA(e)?null:iG(d,s);o.push(h),a=n1(d,c,a),l=n1(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function ps(n,e,t,i,r,s,o,a){const l=Rs(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(dw(n,t,u,i,r),km(e)&&s1(t,e.index)):3&e.type&&(i=function $5(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function s1(n,e){const t=us(e,n);16&t[2]||(t[2]|=32)}function sw(n,e,t,i){let r=!1;if(UD()){const s=function Q5(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];DA(t,o.selectors,!1)&&(r||(r=[]),Gm(zh(t,e),n,o.type),Js(o)?(l1(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,c1(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Wu(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=Hm(t.mergedAttrs,d.hostAttrs),u1(n,t,e,c,d),eG(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}r1(n,t)}o&&function J5(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new _e(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Hm(t.mergedAttrs,t.attrs),r}function o1(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function K5(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function a1(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function l1(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function eG(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Js(e)&&(t[""]=n)}}function c1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function u1(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Yl(r.type)),o=new Vh(s,Js(r),R);n.blueprint[i]=o,t[i]=o,o1(n,e,0,i,Wu(n,t,r.hostVars,tn),r)}function tG(n,e,t){const i=Rs(e,n),r=e1(t),s=n[10],o=dg(n,cg(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function Do(n,e,t,i,r,s){const o=Rs(n,e);!function ow(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Jt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function nG(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function iG(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function d1(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function oG(n,e){const t=us(e,n);if(Ob(t)){const i=t[1];48&t[2]?sf(i,t,i.template,t[8]):t[5]>0&&aw(t)}}function aw(n){for(let i=R0(n);null!==i;i=I0(i))for(let r=10;r<i.length;r++){const s=i[r];if(512&s[2]){const o=s[1];sf(o,s,o.template,s[8])}else s[5]>0&&aw(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=us(t[i],n);Ob(r)&&r[5]>0&&aw(r)}}function aG(n,e){const t=us(e,n),i=t[1];(function lG(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),ug(i,t,t[8])}function dg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function lw(n){for(;n;){n[2]|=32;const e=nf(n);if(XH(n)&&!e)return n;n=e}return null}function f1(n){!function h1(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=D0(t);if(null!==i){const r=i[1];U5(r,i,r.template,t)}}}(n[8])}function uw(n,e,t){Hb(0),e(n,t)}const uG=(()=>Promise.resolve(null))();function p1(n){return n[7]||(n[7]=[])}function m1(n){return n.cleanup||(n.cleanup=[])}function g1(n,e,t){return(null===n||Js(n))&&(t=function rz(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function _1(n,e){const t=n[9],i=t?t.get(oa,null):null;i&&i.handleError(e)}function dw(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function ca(n,e,t){const i=Om(e,n);!function cA(n,e,t){n.setValue(e,t)}(n[11],i,t)}function hg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=yb(r,a):2==s&&(i=yb(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function fg(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Ni(s)),Qs(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&fg(l[1],l,c,i)}const o=t.type;if(8&o)fg(n,e,t.child,i);else if(32&o){const a=A0(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=bA(e,t);if(Array.isArray(a))i.push(...a);else{const l=nf(e[16]);fg(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class af{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return fg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qs(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(O0(e,i),jm(t,i))}this._attachedToViewContainer=!1}dA(this._lView[1],this._lView)}onDestroy(e){t1(this._lView[1],this._lView,null,e)}markForCheck(){lw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function cw(n,e,t){const i=e[10];i.begin&&i.begin();try{sf(n,e,n.template,t)}catch(r){throw _1(e,r),r}finally{i.end&&i.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function U4(n,e){rf(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e}}class dG extends af{constructor(e){super(e),this._view=e}detectChanges(){f1(this._view)}checkNoChanges(){}get context(){return null}}class hw extends Ja{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Xn(e);return new lf(t,this.ngModule)}}function v1(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class fG{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,v0,i);return r!==v0||t===v0?r:this.parentInjector.get(e,t,i)}}class lf extends XT{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function c5(n){return n.map(l5).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return v1(this.componentDef.inputs)}get outputs(){return v1(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Qa?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new fG(e,s):e,a=o.get(ef,null);if(null===a)throw new _e(407,!1);const l=o.get(s4,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function W5(n,e,t){return n.selectRootElement(e,t===Ys.ShadowDom)}(c,i,this.componentDef.encapsulation):P0(a.createRenderer(null,this.componentDef),u,function hG(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=function vG(n,e){return{components:[],scheduler:n||R4,clean:uG,playerHandler:e||null,flags:0}}(),p=rw(0,null,null,1,0,null,null,null,null,null),m=cg(null,p,f,h,null,null,a,c,l,o,null);let g,_;zb(m);try{const v=function gG(n,e,t,i,r,s){const o=t[1];t[22]=n;const l=Gu(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(hg(l,c,!0),null!==n&&(Vm(r,n,c),null!==l.classes&&V0(r,n,l.classes),null!==l.styles&&CA(r,n,l.styles)));const u=i.createRenderer(n,e),d=cg(t,e1(e),null,e.onPush?32:16,t[22],l,i,u,s||null,null,null);return o.firstCreatePass&&(Gm(zh(l,t),o,e.type),l1(o,l),c1(l,t.length,1)),dg(t,d),t[22]=d}(d,this.componentDef,m,a,c);if(d)if(i)Vm(c,d,["ng-version",o4.full]);else{const{attrs:y,classes:b}=function u5(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!to(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Vm(c,d,y),b&&b.length>0&&V0(c,d,b.join(" "))}if(_=Pb(p,22),void 0!==t){const y=_.projection=[];for(let b=0;b<this.ngContentSelectors.length;b++){const x=t[b];y.push(null!=x?Array.from(x):null)}}g=function _G(n,e,t,i,r){const s=t[1],o=function X5(n,e,t){const i=Yi();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),u1(n,i,e,Wu(n,e,1,null),t),r1(n,i));const r=Uh(e,n,i.directiveStart,i);yr(r,e);const s=Rs(i,e);return s&&yr(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,null!==r)for(const l of r)l(o,e);if(e.contentQueries){const l=Yi();e.contentQueries(1,o,l.directiveStart)}const a=Yi();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ka(a.index),o1(t[1],a,0,a.directiveStart,a.directiveEnd,e),a1(e,o)),o}(v,this.componentDef,m,f,[yG]),ug(p,m,null)}finally{Ub()}return new mG(this.componentType,g,Vu(_,m),m,_)}}class mG extends class QU{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new dG(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;dw(s[1],s,r,e,t),s1(s,this._tNode.index)}}get injector(){return new Tu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function yG(){const n=Yi();Fm(xe()[1],n)}function nt(n){let e=function y1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Js(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=fw(n.inputs),o.declaredInputs=fw(n.declaredInputs),o.outputs=fw(n.outputs);const a=r.hostBindings;a&&CG(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&wG(n,l),c&&xG(n,c),vb(n.inputs,r.inputs),vb(n.declaredInputs,r.declaredInputs),vb(n.outputs,r.outputs),Js(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===nt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function bG(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Hm(r.hostAttrs,t=Hm(t,r.hostAttrs))}}(i)}function fw(n){return n===yu?{}:n===Hn?[]:n}function wG(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function xG(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function CG(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let pg=null;function tc(){if(!pg){const n=ei.Symbol;if(n&&n.iterator)pg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(pg=i)}}}return pg}function cf(n){return!!pw(n)&&(Array.isArray(n)||!(n instanceof Map)&&tc()in n)}function pw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function To(n,e,t){return n[e]=t}function br(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function nc(n,e,t,i){const r=br(n,e,t);return br(n,e+1,i)||r}function pi(n,e,t,i){const r=xe();return br(r,Su(),e)&&(Rn(),Do(Mi(),r,n,e,t,i)),pi}function qu(n,e,t,i,r,s){const a=nc(n,function ia(){return Xt.lFrame.bindingIndex}(),t,r);return ra(2),a?e+Jt(t)+i+Jt(r)+s:tn}function Nt(n,e,t,i,r,s,o,a){const l=xe(),c=Rn(),u=n+22,d=c.firstCreatePass?function kG(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Gu(e,n,4,o||null,Xa(c,a));sw(e,t,u,Xa(c,l)),Fm(e,u);const d=u.tViews=rw(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];xo(d,!1);const h=l[11].createComment("");ng(c,l,h,d),yr(h,l),dg(l,l[u]=d1(h,l,h,d)),Pm(d)&&nw(c,l,d),null!=o&&iw(l,d,a)}function io(n){return function Mu(n,e){return n[e]}(function hz(){return Xt.lFrame.contextLView}(),22+n)}function Le(n,e,t){const i=xe();return br(i,Su(),e)&&ps(Rn(),Mi(),i,n,e,i[11],t,!1),Le}function mw(n,e,t,i,r){const o=r?"class":"style";dw(n,t,e.inputs[o],o,i)}function se(n,e,t,i){const r=xe(),s=Rn(),o=22+n,a=r[11],l=r[o]=P0(a,e,function Cz(){return Xt.lFrame.currentNamespace}()),c=s.firstCreatePass?function OG(n,e,t,i,r,s,o){const a=e.consts,c=Gu(e,n,2,r,Xa(a,s));return sw(e,t,c,Xa(a,o)),null!==c.attrs&&hg(c,c.attrs,!1),null!==c.mergedAttrs&&hg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];xo(c,!0);const u=c.mergedAttrs;null!==u&&Vm(a,l,u);const d=c.classes;null!==d&&V0(a,l,d);const h=c.styles;return null!==h&&CA(a,l,h),64!=(64&c.flags)&&ng(s,r,l,c),0===function az(){return Xt.lFrame.elementDepthCount}()&&yr(l,r),function lz(){Xt.lFrame.elementDepthCount++}(),Pm(c)&&(nw(s,r,c),JA(s,c,r)),null!==i&&iw(r,c),se}function fe(){let n=Yi();Fb()?Nb():(n=n.parent,xo(n,!1));const e=n;!function cz(){Xt.lFrame.elementDepthCount--}();const t=Rn();return t.firstCreatePass&&(Fm(t,n),Tb(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Tz(n){return 0!=(16&n.flags)}(e)&&mw(t,e,xe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Az(n){return 0!=(32&n.flags)}(e)&&mw(t,e,xe(),e.stylesWithoutHost,!1),fe}function nn(n,e,t,i){return se(n,e,t,i),fe(),nn}function Ps(n,e,t){const i=xe(),r=Rn(),s=n+22,o=r.firstCreatePass?function LG(n,e,t,i,r){const s=e.consts,o=Xa(s,i),a=Gu(e,n,8,"ng-container",o);return null!==o&&hg(a,o,!0),sw(e,t,a,Xa(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];xo(o,!0);const a=i[s]=i[11].createComment("");return ng(r,i,a,o),yr(a,i),Pm(o)&&(nw(r,i,o),JA(r,o,i)),null!=t&&iw(i,o),Ps}function Os(){let n=Yi();const e=Rn();return Fb()?Nb():(n=n.parent,xo(n,!1)),e.firstCreatePass&&(Fm(e,n),Tb(n)&&e.queries.elementEnd(n)),Os}function Ao(n,e,t){return Ps(n,e,t),Os(),Ao}function ar(){return xe()}function df(n){return!!n&&"function"==typeof n.then}const gw=function A1(n){return!!n&&"function"==typeof n.subscribe};function st(n,e,t,i){const r=xe(),s=Rn(),o=Yi();return R1(s,r,r[11],o,n,e,0,i),st}function gg(n,e){const t=Yi(),i=xe(),r=Rn();return R1(r,i,g1(Vb(r.data),t,i),t,n,e),gg}function R1(n,e,t,i,r,s,o,a){const l=Pm(i),u=n.firstCreatePass&&m1(n),d=e[8],h=p1(e);let f=!0;if(3&i.type||a){const g=Rs(i,e),_=a?a(g):g,v=h.length,y=a?x=>a(Ni(x[i.index])):i.index;let b=null;if(!a&&l&&(b=function FG(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=k1(i,e,d,s,!1);const x=t.listen(_,r,s);h.push(s,x),u&&u.push(r,y,v,v+1)}}else s=k1(i,e,d,s,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[r])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const C=e[m[_]][m[_+1]].subscribe(s),A=h.length;h.push(s,C),u&&u.push(r,i.index,A,-(A+1))}}}function I1(n,e,t,i){try{return!1!==t(i)}catch(r){return _1(n,r),!1}}function k1(n,e,t,i,r){return function s(o){if(o===Function)return i;lw(2&n.flags?us(n.index,e):e);let l=I1(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=I1(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function un(n=1){return function _z(n){return(Xt.lFrame.contextLView=function vz(n,e){for(;n>0;)e=e[15],n--;return e}(n,Xt.lFrame.contextLView))[8]}(n)}function NG(n,e){let t=null;const i=function r5(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?DA(n,s,!0):a5(i,s))return r}else t=r}return t}function lr(n){const e=xe()[16][6];if(!e.projection){const i=e.projection=jh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?NG(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Nn(n,e=0,t){const i=xe(),r=Rn(),s=Gu(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),Nb(),64!=(64&s.flags)&&function Y4(n,e,t){xA(e[11],0,e,t,hA(n,t,e),gA(t.parent||e[6],t,e))}(r,i,s)}function U1(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?no(s):la(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];HG(n[a],e)&&(l=!0,n[a+1]=i?$0(u):W0(u)),a=i?no(u):la(u)}l&&(n[t+1]=i?W0(s):$0(s))}function HG(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Pu(n,e)>=0}const Qi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function G1(n){return n.substring(Qi.key,Qi.keyEnd)}function zG(n){return n.substring(Qi.value,Qi.valueEnd)}function W1(n,e){const t=Qi.textEnd;return t===e?-1:(e=Qi.keyEnd=function WG(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Qi.key=e,t),ed(n,e,t))}function j1(n,e){const t=Qi.textEnd;let i=Qi.key=ed(n,e,t);return t===i?-1:(i=Qi.keyEnd=function jG(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=q1(n,i,t),i=Qi.value=ed(n,i,t),i=Qi.valueEnd=function $G(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const l=n.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=X1(n,l,o,t):e===o-4&&85===s&&82===r&&76===i&&40===l?a=o=X1(n,41,o,t):l>32&&(a=o),s=r,r=i,i=-33&l}return a}(n,i,t),q1(n,i,t))}function $1(n){Qi.key=0,Qi.keyEnd=0,Qi.value=0,Qi.valueEnd=0,Qi.textEnd=n.length}function ed(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function q1(n,e,t,i){return(e=ed(n,e,t))<t&&e++,e}function X1(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function nl(n,e,t){return ro(n,e,t,!1),nl}function In(n,e){return ro(n,e,null,!0),In}function Ls(n){so(Z1,qG,n,!1)}function qG(n,e){for(let t=function GG(n){return $1(n),j1(n,ed(n,0,Qi.textEnd))}(e);t>=0;t=j1(e,t))Z1(n,G1(e),zG(e))}function Ro(n,e){for(let t=function UG(n){return $1(n),W1(n,ed(n,0,Qi.textEnd))}(e);t>=0;t=W1(e,t))hs(n,G1(e),!0)}function ro(n,e,t,i){const r=xe(),s=Rn(),o=ra(2);s.firstUpdatePass&&Y1(s,n,o,i),e!==tn&&br(r,o,e)&&Q1(s,s.data[Pr()],r,r[11],n,r[o+1]=function tW(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ri(fs(n)))),n}(e,t),i,o)}function so(n,e,t,i){const r=Rn(),s=ra(2);r.firstUpdatePass&&Y1(r,null,s,i);const o=xe();if(t!==tn&&br(o,s,t)){const a=r.data[Pr()];if(eR(a,i)&&!K1(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=yb(l,t||"")),mw(r,a,o,t,i)}else!function eW(n,e,t,i,r,s,o,a){r===tn&&(r=Hn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let m,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,m=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,m=f),null!==p&&Q1(n,e,t,i,p,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function JG(n,e,t){if(null==t||""===t)return Hn;const i=[],r=fs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function K1(n,e){return e>=n.expandoStartIndex}function Y1(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Pr()],o=K1(n,t);eR(s,i)&&null===e&&!o&&(e=!1),e=function KG(n,e,t,i){const r=Vb(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=hf(t=vw(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=vw(r,n,e,t,i),null===s){let l=function YG(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==la(i))return n[no(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=vw(null,n,e,l[1],i),l=hf(l,e.attrs,i),function ZG(n,e,t,i){n[no(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function QG(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=hf(i,n[s].hostAttrs,t);return hf(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function BG(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=no(o),l=la(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Pu(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=no(n[a+1]);n[i+1]=og(h,a),0!==h&&(n[h+1]=j0(n[h+1],i)),n[a+1]=function A5(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=og(a,0),0!==a&&(n[a+1]=j0(n[a+1],i)),a=i;else n[i+1]=og(l,0),0===a?a=i:n[l+1]=j0(n[l+1],i),l=i;c&&(n[i+1]=W0(n[i+1])),U1(n,u,i,!0),U1(n,u,i,!1),function VG(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Pu(s,e)>=0&&(t[i+1]=$0(t[i+1]))}(e,u,n,i,s),o=og(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function vw(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=hf(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function hf(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),hs(n,o,!!t||e[++s]))}return void 0===n?null:n}function Z1(n,e,t){hs(n,e,fs(t))}function Q1(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];_g(function GA(n){return 1==(1&n)}(c)?J1(l,e,t,r,la(c),o):void 0)||(_g(s)||function UA(n){return 2==(2&n)}(c)&&(s=J1(l,null,t,r,a,o)),function Q4(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Yr.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Yr.Important),n.setStyle(t,i,r,s))}}(i,o,Om(Pr(),t),r,s))}function J1(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===tn&&(h=d?Hn:void 0);let f=d?Zb(h,i):u===i?h:void 0;if(c&&!_g(f)&&(f=Zb(l,i)),_g(f)&&(a=f,o))return a;const p=n[r+1];r=o?no(p):la(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Zb(l,i))}return a}function _g(n){return void 0!==n}function eR(n,e){return 0!=(n.flags&(e?16:32))}function Ot(n,e=""){const t=xe(),i=Rn(),r=n+22,s=i.firstCreatePass?Gu(i,r,1,e,null):i.data[r],o=t[r]=function k0(n,e){return n.createText(e)}(t[11],e);ng(i,t,o,s),xo(s,!1)}function td(n){return Io("",n,""),td}function Io(n,e,t){const i=xe(),r=function $u(n,e,t,i){return br(n,Su(),t)?e+Jt(t)+i:tn}(i,n,e,t);return r!==tn&&ca(i,Pr(),r),Io}function yw(n,e,t,i,r){const s=xe(),o=qu(s,n,e,t,i,r);return o!==tn&&ca(s,Pr(),o),yw}function nd(n,e,t){const i=xe();return br(i,Su(),e)&&ps(Rn(),Mi(),i,n,e,i[11],t,!0),nd}function vg(n,e,t){const i=xe();if(br(i,Su(),e)){const s=Rn(),o=Mi();ps(s,o,i,n,e,g1(Vb(s.data),o,i),t,!0)}return vg}const rd="en-US";let bR=rd;function xw(n,e,t,i,r){if(n=zt(n),Array.isArray(n))for(let s=0;s<n.length;s++)xw(n[s],e,t,i,r);else{const s=Rn(),o=xe();let a=Ql(n)?n:zt(n.provide),l=qT(n);const c=Yi(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Ql(n)||!n.multi){const f=new Vh(l,r,R),p=Mw(a,e,r?u:u+h,d);-1===p?(Gm(zh(c,o),s,a),Cw(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=Mw(a,e,u+h,d),p=Mw(a,e,u,u+h),m=f>=0&&t[f],g=p>=0&&t[p];if(r&&!g||!r&&!m){Gm(zh(c,o),s,a);const _=function vj(n,e,t,i,r){const s=new Vh(n,t,R);return s.multi=[],s.index=e,s.componentProviders=0,jR(s,r,i&&!t),s}(r?_j:gj,t.length,r,i,l);!r&&g&&(t[p].providerFactory=_),Cw(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(_),o.push(_)}else Cw(s,n,f>-1?f:p,jR(t[r?p:f],l,!r&&i));!r&&i&&g&&t[p].componentProviders++}}}function Cw(n,e,t,i){const r=Ql(e),s=function WU(n){return!!n.useClass}(e);if(r||s){const l=(s?zt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function jR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Mw(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function gj(n,e,t,i){return Sw(this.multi,[])}function _j(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Uh(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),Sw(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Sw(r,s);return s}function Sw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Lt(n,e=[]){return t=>{t.providersResolver=(i,r)=>function mj(n,e,t){const i=Rn();if(i.firstCreatePass){const r=Js(n);xw(t,i.data,i.blueprint,r,!0),xw(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class rc{}class $R{}class qR extends rc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hw(this);const i=ls(e);this._bootstrapComponents=aa(i.bootstrap),this._r3Injector=OA(e,t,[{provide:rc,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],ri(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ew extends $R{constructor(e){super(),this.moduleType=e}create(e){return new qR(this.moduleType,e)}}class bj extends rc{constructor(e,t,i){super(),this.componentFactoryResolver=new hw(this),this.instance=null;const r=new $T([...e,{provide:rc,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],t||eg(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Cg(n,e,t=null){return new bj(n,e,t).injector}function Tw(n,e,t){const i=kr()+n,r=xe();return r[i]===tn?To(r,i,t?e.call(t):e()):function uf(n,e){return n[e]}(r,i)}function Aw(n,e,t,i){return function tI(n,e,t,i,r,s){const o=e+t;return br(n,o,r)?To(n,o+1,s?i.call(s,r):i(r)):_f(n,o+1)}(xe(),kr(),n,e,t,i)}function eI(n,e,t,i,r){return function nI(n,e,t,i,r,s,o){const a=e+t;return nc(n,a,r,s)?To(n,a+2,o?i.call(o,r,s):i(r,s)):_f(n,a+2)}(xe(),kr(),n,e,t,i,r)}function _f(n,e){const t=n[e];return t===tn?void 0:t}function Rw(n){return e=>{setTimeout(n,void 0,e)}}const wt=class jj extends he{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Rw(s),r&&(r=Rw(r)),o&&(o=Rw(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof ve&&e.add(a),a}};function $j(){return this._results[tc()]()}class sc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=tc(),i=sc.prototype;i[t]||(i[t]=$j)}get changes(){return this._changes||(this._changes=new wt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=ds(e);(this._changesDetected=!function Hz(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vi=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kj,n})();const qj=Vi,Xj=class extends qj{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=cg(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),ug(i,r,e),new af(r)}};function Kj(){return Mg(Yi(),xe())}function Mg(n,e){return 4&n.type?new Xj(e,n,Vu(n,e)):null}let Ji=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yj,n})();function Yj(){return lI(Yi(),xe())}const Zj=Ji,oI=class extends Zj{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new Tu(this._hostTNode,this._hostLView)}get parentInjector(){const e=Um(this._hostTNode,this._hostLView);if(nT(e)){const t=Du(e,this._hostLView),i=Eu(e);return new Tu(t[1].data[i+8],t)}return new Tu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=aI(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function Wh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new lf(Xn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Qa,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function oz(n){return Qs(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new oI(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function W4(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],fT(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function j4(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=N0(s,o),l=i[11],c=tg(l,o[7]);return null!==c&&function z4(n,e,t,i,r,s){i[0]=r,i[6]=e,rf(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),fT(Iw(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=aI(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=O0(this._lContainer,t);i&&(jm(Iw(this._lContainer),t),dA(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=O0(this._lContainer,t);return i&&null!=jm(Iw(this._lContainer),t)?new af(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function aI(n){return n[8]}function Iw(n){return n[8]||(n[8]=[])}function lI(n,e){let t;const i=e[n.index];if(Qs(i))t=i;else{let r;if(8&n.type)r=Ni(i);else{const s=e[11];r=s.createComment("");const o=Rs(n,e);ec(s,tg(s,o),r,function K4(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=d1(i,e,r,n),dg(e,t)}return new oI(t,n,e)}class kw{constructor(e){this.queryList=e,this.matches=null}clone(){return new kw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pw{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Pw(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==fI(e,t).matches&&this.queries[t].setDirty()}}class cI{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Ow{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Ow(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Lw{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Lw(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,e8(t,s)),this.matchTNodeWithReadOption(e,t,Wm(t,e,s,!1,!1))}else i===Vi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Wm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Et||r===Ji||r===Vi&&4&t.type)this.addMatch(t.index,-2);else{const s=Wm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function e8(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function n8(n,e,t,i){return-1===t?function t8(n,e){return 11&n.type?Vu(n,e):4&n.type?Mg(n,e):null}(e,n):-2===t?function i8(n,e,t){return t===Et?Vu(e,n):t===Vi?Mg(e,n):t===Ji?lI(e,n):void 0}(n,e,i):Uh(n,n[1],t,e)}function uI(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:n8(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Fw(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=uI(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Fw(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Fw(f[1],f,c,i)}}}}}return i}function dt(n){const e=xe(),t=Rn(),i=$D();Hb(i+1);const r=fI(t,i);if(n.dirty&&VD(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Fw(t,e,i,[]):uI(t,e,r,i);n.reset(s,n4),n.notifyOnChanges()}return!0}return!1}function kn(n,e,t){const i=Rn();i.firstCreatePass&&(hI(i,new cI(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),dI(i,xe(),e)}function Pn(n,e,t,i){const r=Rn();if(r.firstCreatePass){const s=Yi();hI(r,new cI(e,t,i),s.index),function s8(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}dI(r,xe(),t)}function ht(){return function r8(n,e){return n[19].queries[e].queryList}(xe(),$D())}function dI(n,e,t){const i=new sc(4==(4&t));t1(n,e,i,i.destroy),null===e[19]&&(e[19]=new Pw),e[19].queries.push(new kw(i))}function hI(n,e,t){null===n.queries&&(n.queries=new Ow),n.queries.track(new Lw(e,t))}function fI(n,e){return n.queries.getByIndex(e)}function pI(n,e){return Mg(n,e)}function Eg(...n){}const bf=new Ie("Application Initializer");let Dg=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Eg,this.reject=Eg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(df(s))t.push(s);else if(gw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Y(bf,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wf=new Ie("AppId",{providedIn:"root",factory:function PI(){return`${zw()}${zw()}${zw()}`}});function zw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const OI=new Ie("Platform Initializer"),cd=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LI=new Ie("appBootstrapListener"),wr=new Ie("AnimationModuleType");let S8=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ko=new Ie("LocaleId",{providedIn:"root",factory:()=>Is(ko,Pt.Optional|Pt.SkipSelf)||function E8(){return typeof $localize<"u"&&$localize.locale||rd}()});class T8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Uw=(()=>{class n{compileModuleSync(t){return new Ew(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=aa(ls(t).declarations).reduce((o,a)=>{const l=Xn(a);return l&&o.push(new lf(l)),o},[]);return new T8(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I8=(()=>Promise.resolve(0))();function Gw(n){typeof Zone>"u"?I8.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class St{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wt(!1),this.onMicrotaskEmpty=new wt(!1),this.onStable=new wt(!1),this.onError=new wt(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function k8(){let n=ei.requestAnimationFrame,e=ei.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function L8(n){const e=()=>{!function O8(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ei,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jw(n),n.isCheckStableRunning=!0,Ww(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return BI(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),VI(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return BI(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),VI(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,jw(n),Ww(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!St.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(St.isInAngularZone())throw new _e(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,P8,Eg,Eg);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const P8={};function Ww(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function BI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VI(n){n._nesting--,Ww(n)}class F8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wt,this.onMicrotaskEmpty=new wt,this.onStable=new wt,this.onError=new wt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const HI=new Ie(""),Tg=new Ie("");let Xw,$w=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xw||(function N8(n){Xw=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{St.assertNotInAngularZone(),Gw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gw(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Y(St),Y(qw),Y(Tg))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),qw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Xw?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),il=null;const zI=new Ie("AllowMultipleToken"),Kw=new Ie("PlatformDestroyListeners");class UI{constructor(e,t){this.name=e,this.token=t}}function WI(n,e,t=[]){const i=`Platform: ${e}`,r=new Ie(i);return(s=[])=>{let o=Yw();if(!o||o.injector.get(zI,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function H8(n){if(il&&!il.get(zI,!1))throw new _e(400,!1);il=n;const e=n.get($I);(function GI(n){const e=n.get(OI,null);e&&e.forEach(t=>t())})(n)}(function jI(n=[],e){return Bi.create({name:e,providers:[{provide:p0,useValue:"platform"},{provide:Kw,useValue:new Set([()=>il=null])},...n]})}(a,i))}return function U8(n){const e=Yw();if(!e)throw new _e(401,!1);return e}()}}function Yw(){return il?.get($I)??null}let $I=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function G8(n,e){let t;return t="noop"===n?new F8:("zone.js"===n?void 0:n)||new St(e),t}(i?.ngZone,function qI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:St,useValue:r}];return r.run(()=>{const o=Bi.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(oa,null);if(!l)throw new _e(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Ag(this._modules,a),c.unsubscribe()})}),function XI(n,e,t){try{const i=t();return df(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(Dg);return c.runInitializers(),c.donePromise.then(()=>(function wR(n){as(n,"Expected localeId to be defined"),"string"==typeof n&&(bR=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ko,rd)||rd),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=KI({},i);return function B8(n,e,t){const i=new Ew(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(oc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new _e(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Kw,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Y(Bi))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function KI(n,e){return Array.isArray(e)?e.reduce(KI,n):{...n,...e}}let oc=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new D(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new D(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{St.assertNotInAngularZone(),Gw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{St.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=gr(s,o.pipe(vu()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof XT;if(!this._injector.get(Dg).done)throw!r&&function ad(n){const e=Xn(n)||Rr(n)||Ir(n);return null!==e&&e.standalone}(t),new _e(405,false);let o;o=r?t:this._injector.get(Ja).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function V8(n){return n.isBoundToModule}(o)?void 0:this._injector.get(rc),c=o.create(Bi.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(HI,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Ag(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Ag(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(LI,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ag(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _e(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Y(St),Y(Qa),Y(oa))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ag(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let ZI=!0,QI=!1,Hi=(()=>{class n{}return n.__NG_ELEMENT_ID__=q8,n})();function q8(n){return function X8(n,e,t){if(km(n)&&!t){const i=us(n.index,e);return new af(i,i)}return 47&n.type?new af(e[16],e):null}(Yi(),xe(),16==(16&n))}class nk{constructor(){}supports(e){return cf(e)}create(e){return new e6(e)}}const J8=(n,e)=>e;class e6{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||J8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<rk(i,r,s)?t:i,a=rk(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!cf(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function TG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[tc()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new t6(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ik),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ik),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class t6{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class n6{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class ik{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new n6,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rk(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class sk{constructor(){}supports(e){return e instanceof Map||pw(e)}create(){return new r6}}class r6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||pw(e)))throw new _e(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new s6(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class s6{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ok(){return new da([new nk])}let da=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ok()),deps:[[n,new Lu,new Mo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new _e(901,!1)}}return n.\u0275prov=Je({token:n,providedIn:"root",factory:ok}),n})();function ak(){return new xf([new sk])}let xf=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ak()),deps:[[n,new Lu,new Mo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new _e(901,!1)}}return n.\u0275prov=Je({token:n,providedIn:"root",factory:ak}),n})();const l6=WI(null,"core",[]);let c6=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Y(oc))},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();let kg=null;function Po(){return kg}const Kt=new Ie("DocumentToken");let Pg=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:function(){return function f6(){return Y(lk)}()},providedIn:"platform"}),n})();const p6=new Ie("Location Initialized");let lk=(()=>{class n extends Pg{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Po().getBaseHref(this._doc)}onPopState(t){const i=Po().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Po().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){ck()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){ck()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:function(){return function m6(){return new lk(Y(Kt))}()},providedIn:"platform"}),n})();function ck(){return!!window.history.pushState}function tx(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function uk(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function fa(n){return n&&"?"!==n[0]?"?"+n:n}let lc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:function(){return function g6(){const n=Y(Kt).location;return new hk(Y(Pg),n&&n.origin||"")}()},providedIn:"root"}),n})();const dk=new Ie("appBaseHref");let hk=(()=>{class n extends lc{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tx(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+fa(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+fa(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+fa(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(Pg),Y(dk,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),_6=(()=>{class n extends lc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=tx(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+fa(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+fa(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(Pg),Y(dk,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),Cf=(()=>{class n{constructor(t){this._subject=new wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=uk(fk(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+fa(i))}normalize(t){return n.stripTrailingSlash(function y6(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,fk(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fa(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fa(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=fa,n.joinWithSlash=tx,n.stripTrailingSlash=uk,n.\u0275fac=function(t){return new(t||n)(Y(lc))},n.\u0275prov=Je({token:n,factory:function(){return function v6(){return new Cf(Y(lc))}()},providedIn:"root"}),n})();function fk(n){return n.replace(/\/index.html$/,"")}let Ef=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(cf(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ri(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(R(da),R(xf),R(Et),R(eo))},n.\u0275dir=Ae({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class r${constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gg=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new r$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),Mk(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Mk(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Vi),R(da))},n.\u0275dir=Ae({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Mk(n,e){n.context.$implicit=e.item}let ma=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new o$,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sk("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sk("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Vi))},n.\u0275dir=Ae({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class o${constructor(){this.$implicit=null,this.ngIf=null}}function Sk(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ri(e)}'.`)}class dx{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Wg=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Ek=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new dx(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Vi),R(Wg,9))},n.\u0275dir=Ae({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Df=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Yr.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(xf),R(eo))},n.\u0275dir=Ae({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();const Ak="browser";function jg(n){return n===Ak}let O$=(()=>{class n{}return n.\u0275prov=Je({token:n,providedIn:"root",factory:()=>new L$(Y(Kt),window)}),n})();class L${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function F$(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Rk(this.window.history)||Rk(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Rk(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class px extends class B$ extends class h6{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function d6(n){kg||(kg=n)}(new px)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function V$(){return Tf=Tf||document.querySelector("base"),Tf?Tf.getAttribute("href"):null}();return null==t?null:function H$(n){$g=$g||document.createElement("a"),$g.setAttribute("href",n);const e=$g.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Tf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function n$(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let $g,Tf=null;const Ik=new Ie("TRANSITION_ID"),U$=[{provide:bf,useFactory:function z$(n,e,t){return()=>{t.get(Dg).donePromise.then(()=>{const i=Po(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ik,Kt,Bi],multi:!0}];let W$=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const qg=new Ie("EventManagerPlugins");let Xg=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Y(qg),Y(St))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();class kk{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Po().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Pk=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),Af=(()=>{class n extends Pk{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Ok),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ok))}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();function Ok(n){Po().remove(n)}const mx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gx=/%COMP%/g;function Kg(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Kg(n,r,t):(r=r.replace(gx,n),t.push(r))}return t}function Nk(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Yg=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new _x(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Ys.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Y$(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Ys.ShadowDom:return new Z$(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Kg(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Y(Xg),Y(Af),Y(wf))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();class _x{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mx[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Vk(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Vk(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=mx[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=mx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Yr.DashCase|Yr.Important)?e.style.setProperty(t,i,r&Yr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nk(i)):this.eventManager.addEventListener(e,t,Nk(i))}}function Vk(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Y$ extends _x{constructor(e,t,i,r){super(e),this.component=i;const s=Kg(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function q$(n){return"_ngcontent-%COMP%".replace(gx,n)}(r+"-"+i.id),this.hostAttr=function X$(n){return"_nghost-%COMP%".replace(gx,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Z$ extends _x{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Kg(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Q$=(()=>{class n extends kk{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const Hk=["alt","control","meta","shift"],eq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zk={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nq=(()=>{class n extends kk{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Po().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(Hk.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function iq(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&zk.hasOwnProperty(e)&&(e=zk[e]))}return eq[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Hk.forEach(s=>{s!=r&&(0,tq[s])(t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const aq=WI(l6,"browser",[{provide:cd,useValue:Ak},{provide:OI,useValue:function rq(){px.makeCurrent()},multi:!0},{provide:Kt,useFactory:function oq(){return function dU(n){n0=n}(document),document},deps:[]}]),Gk=new Ie(""),Wk=[{provide:Tg,useClass:class G${addToWindow(e){ei.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},ei.getAllAngularTestabilities=()=>e.getAllTestabilities(),ei.getAllAngularRootElements=()=>e.getAllRootElements(),ei.frameworkStabilizers||(ei.frameworkStabilizers=[]),ei.frameworkStabilizers.push(i=>{const r=ei.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Po().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:HI,useClass:$w,deps:[St,qw,Tg]},{provide:$w,useClass:$w,deps:[St,qw,Tg]}],jk=[{provide:p0,useValue:"root"},{provide:oa,useFactory:function sq(){return new oa},deps:[]},{provide:qg,useClass:Q$,multi:!0,deps:[Kt,St,cd]},{provide:qg,useClass:nq,multi:!0,deps:[Kt]},{provide:Yg,useClass:Yg,deps:[Xg,Af,wf]},{provide:ef,useExisting:Yg},{provide:Pk,useExisting:Af},{provide:Af,useClass:Af,deps:[Kt]},{provide:Xg,useClass:Xg,deps:[qg,St]},{provide:class N${},useClass:W$,deps:[]},[]];let $k=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:wf,useValue:t.appId},{provide:Ik,useExisting:wf},U$]}}}return n.\u0275fac=function(t){return new(t||n)(Y(Gk,12))},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[...jk,...Wk],imports:[co,c6]}),n})(),qk=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:function(t){let i=null;return i=t?new t:function cq(){return new qk(Y(Kt))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let bx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:function(t){let i=null;return i=t?new(t||n):Y(Yk),i},providedIn:"root"}),n})(),Yk=(()=>{class n extends bx{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case zn.NONE:return i;case zn.HTML:return So(i,"HTML")?fs(i):NT(this._doc,String(i)).toString();case zn.STYLE:return So(i,"Style")?fs(i):i;case zn.SCRIPT:if(So(i,"Script"))return fs(i);throw new Error("unsafe value used in a script context");case zn.URL:return So(i,"URL")?fs(i):Zh(String(i));case zn.RESOURCE_URL:if(So(i,"ResourceURL"))return fs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function bU(n){return new pU(n)}(t)}bypassSecurityTrustStyle(t){return function wU(n){return new mU(n)}(t)}bypassSecurityTrustScript(t){return function xU(n){return new gU(n)}(t)}bypassSecurityTrustUrl(t){return function CU(n){return new _U(n)}(t)}bypassSecurityTrustResourceUrl(t){return function MU(n){return new vU(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:function(t){let i=null;return i=t?new t:function _q(n){return new Yk(n.get(Kt))}(Y(Bi)),i},providedIn:"root"}),n})();const{isArray:vq}=Array,{getPrototypeOf:yq,prototype:bq,keys:wq}=Object;function Zk(n){if(1===n.length){const e=n[0];if(vq(e))return{args:e,keys:null};if(function xq(n){return n&&"object"==typeof n&&yq(n)===bq}(e)){const t=wq(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Cq}=Array;function wx(n){return Oe(e=>function Mq(n,e){return Cq(e)?n(...e):n(e)}(n,e))}function Qk(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Jk(...n){const e=xD(n),{args:t,keys:i}=Zk(n),r=new D(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Ar(t[u]).subscribe(ft(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?Qk(i,a):a),s.complete())}))}});return e?r.pipe(wx(e)):r}let eP=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(R(eo),R(Et))},n.\u0275dir=Ae({type:n}),n})(),cc=(()=>{class n extends eP{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,features:[nt]}),n})();const Qr=new Ie("NgValueAccessor"),Eq={provide:Qr,useExisting:An(()=>ud),multi:!0},Tq=new Ie("CompositionEventMode");let ud=(()=>{class n extends eP{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Dq(){const n=Po()?Po().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(R(eo),R(Et),R(Tq,8))},n.\u0275dir=Ae({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&st("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Lt([Eq]),nt]}),n})();function sl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function nP(n){return null!=n&&"number"==typeof n.length}const xr=new Ie("NgValidators"),ol=new Ie("NgAsyncValidators"),Rq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Iq{static min(e){return function iP(n){return e=>{if(sl(e.value)||sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function rP(n){return e=>{if(sl(e.value)||sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function sP(n){return sl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function oP(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function aP(n){return sl(n.value)||Rq.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function lP(n){return e=>sl(e.value)||!nP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function cP(n){return e=>nP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function uP(n){if(!n)return Zg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(sl(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return gP(e)}static composeAsync(e){return _P(e)}}function Zg(n){return null}function dP(n){return null!=n}function hP(n){return df(n)?Ai(n):n}function fP(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function pP(n,e){return e.map(t=>t(n))}function mP(n){return n.map(e=>function kq(n){return!n.validate}(e)?e:t=>e.validate(t))}function gP(n){if(!n)return null;const e=n.filter(dP);return 0==e.length?null:function(t){return fP(pP(t,e))}}function xx(n){return null!=n?gP(mP(n)):null}function _P(n){if(!n)return null;const e=n.filter(dP);return 0==e.length?null:function(t){return Jk(pP(t,e).map(hP)).pipe(Oe(fP))}}function Cx(n){return null!=n?_P(mP(n)):null}function vP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yP(n){return n._rawValidators}function bP(n){return n._rawAsyncValidators}function Mx(n){return n?Array.isArray(n)?n:[n]:[]}function Qg(n,e){return Array.isArray(n)?n.includes(e):n===e}function wP(n,e){const t=Mx(e);return Mx(n).forEach(r=>{Qg(t,r)||t.push(r)}),t}function xP(n,e){return Mx(e).filter(t=>!Qg(n,t))}class CP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Nr extends CP{get formDirective(){return null}get path(){return null}}class ga extends CP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Rf=(()=>{class n extends class MP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(R(ga,2))},n.\u0275dir=Ae({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&In("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[nt]}),n})();const If="VALID",e_="INVALID",dd="PENDING",kf="DISABLED";function Tx(n){return(t_(n)?n.validators:n)||null}function EP(n){return Array.isArray(n)?xx(n):n||null}function Ax(n,e){return(t_(e)?e.asyncValidators:n)||null}function DP(n){return Array.isArray(n)?Cx(n):n||null}function t_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class RP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=EP(this._rawValidators),this._composedAsyncValidatorFn=DP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===If}get invalid(){return this.status===e_}get pending(){return this.status==dd}get disabled(){return this.status===kf}get enabled(){return this.status!==kf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=EP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=DP(e)}addValidators(e){this.setValidators(wP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xP(e,this._rawAsyncValidators))}hasValidator(e){return Qg(this._rawValidators,e)}hasAsyncValidator(e){return Qg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kf,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=If,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===If||this.status===dd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kf:If}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dd,this._hasOwnPendingAsyncValidator=!0;const t=hP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?kf:this.errors?e_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dd)?dd:this._anyControlsHaveStatus(e_)?e_:If}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){t_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Rx extends RP{constructor(e,t,i){super(Tx(t),Ax(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function AP(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new _e(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function TP(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new _e(1e3,"");if(!i[t])throw new _e(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Pf(n,e){Ix(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Uq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&IP(n,e)})}(n,e),function Wq(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Gq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&IP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zq(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function i_(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),s_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function r_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ix(n,e){const t=yP(n);null!==e.validator?n.setValidators(vP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=bP(n);null!==e.asyncValidator?n.setAsyncValidators(vP(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();r_(e._rawValidators,r),r_(e._rawAsyncValidators,r)}function s_(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=yP(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=bP(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return r_(e._rawValidators,i),r_(e._rawAsyncValidators,i),t}function IP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kP(n,e){Ix(n,e)}function OP(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const Kq={provide:Nr,useExisting:An(()=>o_)},Of=(()=>Promise.resolve(null))();let o_=(()=>{class n extends Nr{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new wt,this.form=new Rx({},xx(t),Cx(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Of.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Pf(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Of.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Of.then(()=>{const i=this._findContainer(t.path),r=new Rx({});kP(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Of.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Of.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,OP(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(R(xr,10),R(ol,10))},n.\u0275dir=Ae({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&st("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([Kq]),nt]}),n})();function LP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const NP=class extends RP{constructor(e=null,t,i){super(Tx(t),Ax(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),t_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Qq={provide:ga,useExisting:An(()=>hd)},HP=(()=>Promise.resolve(null))();let hd=(()=>{class n extends ga{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new NP,this._registered=!1,this.update=new wt,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Px(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===ud?t=s:function qq(n){return Object.getPrototypeOf(n.constructor)===cc}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function kx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Pf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function ha(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);HP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function n_(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(R(Nr,9),R(xr,10),R(ol,10),R(Qr,10),R(Hi,8))},n.\u0275dir=Ae({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lt([Qq]),nt,Ri]}),n})(),UP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();const s9={provide:Nr,useExisting:An(()=>a_)};let a_=(()=>{class n extends Nr{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new wt,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(s_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Pf(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){i_(t.control||null,t,!1),function Xq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,OP(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(i_(i||null,t),(n=>n instanceof NP)(r)&&(Pf(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);kP(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function jq(n,e){return s_(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ix(this.form,this),this._oldForm&&s_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(R(xr,10),R(ol,10))},n.\u0275dir=Ae({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&st("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([s9]),nt,Ri]}),n})(),C9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[UP]}),n})(),M9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[C9]}),n})();class oO{}const _a="*";function Lf(n,e){return{type:7,name:n,definitions:e,options:{}}}function Oo(n,e=null){return{type:4,styles:e,timings:n}}function aO(n,e=null){return{type:3,steps:n,options:e}}function lO(n,e=null){return{type:2,steps:n,options:e}}function ki(n){return{type:6,styles:n,offset:null}}function Lo(n,e,t){return{type:0,name:n,styles:e,options:t}}function Fo(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cO(n=null){return{type:9,options:n}}function uO(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function dO(n){Promise.resolve(null).then(n)}class Ff{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class hO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?dO(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function fO(n){return new _e(3e3,!1)}function c7(){return typeof window<"u"&&typeof window.document<"u"}function Hx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function al(n){switch(n.length){case 0:return new Ff;case 1:return n[0];default:return new hO(n)}}function pO(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((p,m)=>{let g=m,_=p;if("offset"!==m)switch(g=e.normalizePropertyName(g,o),_){case"!":_=r.get(m);break;case _a:_=s.get(m);break;default:_=e.normalizeStyleValue(m,g,_,o)}f.set(g,_)}),h||a.push(f),c=f,l=d}),o.length)throw function Y9(n){return new _e(3502,!1)}();return a}function zx(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Ux(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Ux(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Ux(t,"destroy",n)))}}function Ux(n,e,t){const s=Gx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Gx(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ms(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function mO(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Wx=(n,e)=>!1,gO=(n,e,t)=>[],_O=null;function jx(n){const e=n.parentNode||n.host;return e===_O?null:e}(Hx()||typeof Element<"u")&&(c7()?(_O=(()=>document.documentElement)(),Wx=(n,e)=>{for(;e;){if(e===n)return!0;e=jx(e)}return!1}):Wx=(n,e)=>n.contains(e),gO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let dc=null,vO=!1;const yO=Wx,bO=gO;let wO=(()=>{class n{validateStyleProperty(t){return function d7(n){dc||(dc=function h7(){return typeof document<"u"?document.body:null}()||{},vO=!!dc.style&&"WebkitAppearance"in dc.style);let e=!0;return dc.style&&!function u7(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in dc.style,!e&&vO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in dc.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return yO(t,i)}getParentElement(t){return jx(t)}query(t,i,r){return bO(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Ff(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),$x=(()=>{class n{}return n.NOOP=new wO,n})();const qx="ng-enter",l_="ng-leave",c_="ng-trigger",u_=".ng-trigger",CO="ng-animating",Xx=".ng-animating";function ll(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Kx(parseFloat(e[1]),e[2])}function Kx(n,e){return"s"===e?1e3*n:n}function d_(n,e,t){return n.hasOwnProperty("duration")?n:function m7(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(fO()),{duration:0,delay:0,easing:""};r=Kx(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Kx(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function T9(){return new _e(3100,!1)}()),a=!0),s<0&&(e.push(function A9(){return new _e(3101,!1)}()),a=!0),a&&e.splice(l,0,fO())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Nf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function MO(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function cl(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function EO(n,e,t){return t?e+":"+t+";":""}function DO(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=EO(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=EO(0,y7(t),n.style[t]));n.setAttribute("style",e)}function No(n,e,t){n.style&&(e.forEach((i,r)=>{const s=Zx(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),Hx()&&DO(n))}function hc(n,e){n.style&&(e.forEach((t,i)=>{const r=Zx(i);n.style[r]=""}),Hx()&&DO(n))}function Bf(n){return Array.isArray(n)?1==n.length?n[0]:lO(n):n}const Yx=new RegExp("{{\\s*(.+?)\\s*}}","g");function TO(n){let e=[];if("string"==typeof n){let t;for(;t=Yx.exec(n);)e.push(t[1]);Yx.lastIndex=0}return e}function h_(n,e,t){const i=n.toString(),r=i.replace(Yx,(s,o)=>{let a=e[o];return null==a&&(t.push(function I9(n){return new _e(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function f_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const v7=/-+([a-z0-9])/g;function Zx(n){return n.replace(v7,(...e)=>e[1].toUpperCase())}function y7(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function gs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function k9(n){return new _e(3004,!1)}()}}function AO(n,e){return window.getComputedStyle(n)[e]}function S7(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function E7(n,e,t){if(":"==n[0]){const l=function D7(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function $9(n){return new _e(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function j9(n){return new _e(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(RO(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(RO(o,r))}(i,t,e)):t.push(n),t}const __=new Set(["true","1"]),v_=new Set(["false","0"]);function RO(n,e){const t=__.has(n)||v_.has(n),i=__.has(e)||v_.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?__.has(n):v_.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?__.has(e):v_.has(e)),o&&a}}const T7=new RegExp("s*:selfs*,?","g");function Qx(n,e,t,i){return new A7(n).build(e,t,i)}class A7{constructor(e){this._driver=e}build(e,t,i){const r=new k7(t);return this._resetContextStyleTimingState(r),gs(this,Bf(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function O9(){return new _e(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function L9(){return new _e(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{TO(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(f_(s.values()),t.errors.push(function F9(n,e){return new _e(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=gs(this,Bf(e.animation),t);return{type:1,matchers:S7(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:fc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>gs(this,i,t)),options:fc(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=gs(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:fc(e.options)}}visitAnimate(e,t){const i=function O7(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Jx(d_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Jx(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=d_(t,e);return Jx(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:ki({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=ki(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===_a?i.push(a):t.errors.push(new _e(3002,!1)):i.push(MO(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function B9(n,e,t,i,r){return new _e(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function _7(n,e,t){const i=e.params||{},r=TO(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function R9(n){return new _e(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function V9(){return new _e(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const v=this._makeStyleAst(_,t);let y=null!=v.offset?v.offset:function P7(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(v.styles),b=0;return null!=y&&(s++,b=v.offset=y),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),v});l&&t.errors.push(function H9(){return new _e(3012,!1)}()),a&&t.errors.push(function z9(){return new _e(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function U9(){return new _e(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return u.forEach((_,v)=>{const y=h>0?v==f?1:h*v:o[v],b=y*g;t.currentTime=p+m.delay+b,m.duration=b,this._validateStyleAst(_,t),_.offset=y,i.styles.push(_)}),i}visitReference(e,t){return{type:8,animation:gs(this,Bf(e.animation),t),options:fc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:fc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:fc(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function R7(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(T7,"")),n=n.replace(/@\*/g,u_).replace(/@\w+/g,t=>u_+"-"+t.slice(1)).replace(/:animating/g,Xx),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ms(t.collectedStyles,t.currentQuerySelector,new Map);const a=gs(this,Bf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:fc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function G9(){return new _e(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:d_(e.timings,t.errors,!0);return{type:12,animation:gs(this,Bf(e.animation),t),timings:i,options:null}}}class k7{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fc(n){return n?(n=Nf(n)).params&&(n.params=function I7(n){return n?Nf(n):null}(n.params)):n={},n}function Jx(n,e,t){return{duration:n,delay:e,easing:t}}function eC(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class y_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const N7=new RegExp(":enter","g"),V7=new RegExp(":leave","g");function tC(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new H7).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class H7{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new y_;const d=new nC(e,t,c,r,s,u,[]);d.options=l;const h=l.delay?ll(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),gs(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let m=f.length-1;m>=0;m--){const g=f[m];if(g.element===t){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[eC(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?ll(i.duration):null,a=null!=i.delay?ll(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),gs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=b_);const o=ll(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>gs(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ll(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),gs(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return d_(t.params?h_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?ll(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=b_);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),gs(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;gs(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const b_={};class nC{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=b_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new w_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=ll(i.duration)),null!=i.delay&&(r.delay=ll(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=h_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new nC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=b_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new z7(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(N7,"."+this._enterClassName)).replace(V7,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function W9(n){return new _e(3014,!1)}()),a}}class w_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new w_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||_a),this._currentKeyframe.set(t,_a);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function U7(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,_a)}else cl(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=h_(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??_a),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=cl(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===_a&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?f_(e.values()):[],o=t.size?f_(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return eC(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class z7 extends w_{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=cl(e[0]);l.set("offset",0),s.push(l);const c=cl(e[0]);c.set("offset",PO(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=cl(e[d]);const f=h.get("offset");h.set("offset",PO((t+f*i)/o)),s.push(h)}i=o,t=0,r="",e=s}return eC(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function PO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class iC{}const G7=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class W7 extends iC{normalizePropertyName(e,t){return Zx(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(G7.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function P9(n,e){return new _e(3005,!1)}())}return o+s}}function OO(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const rC={};class LO{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function j7(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||rC,p=this.buildStyles(i,a&&a.params||rC,d),m=l&&l.params||rC,g=this.buildStyles(r,m,d),_=new Set,v=new Map,y=new Map,b="void"===r,x={params:$7(m,h),delay:this.ast.options?.delay},C=u?[]:tC(e,t,this.ast.animation,s,o,p,g,x,c,d);let A=0;if(C.forEach(T=>{A=Math.max(T.duration+T.delay,A)}),d.length)return OO(t,this._triggerName,i,r,b,p,g,[],[],v,y,A,d);C.forEach(T=>{const B=T.element,H=ms(v,B,new Set);T.preStyleProps.forEach(ie=>H.add(ie));const J=ms(y,B,new Set);T.postStyleProps.forEach(ie=>J.add(ie)),B!==t&&_.add(B)});const w=f_(_.values());return OO(t,this._triggerName,i,r,b,p,g,C,w,v,y,A)}}function $7(n,e){const t=Nf(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class q7{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Nf(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=h_(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(l,o)})}),i}}class K7{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new q7(r.style,r.options&&r.options.params||{},i))}),FO(this.states,"true","1"),FO(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new LO(e,r,this.states))}),this.fallbackTransition=function Y7(n,e,t){return new LO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function FO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Z7=new y_;class Q7{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=Qx(this._driver,t,i,[]);if(i.length)throw function Z9(n){return new _e(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=pO(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=tC(this._driver,t,s,qx,l_,new Map,new Map,i,Z7,r),o.forEach(u=>{const d=ms(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function Q9(){return new _e(3300,!1)}()),o=[]),r.length)throw function J9(n){return new _e(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,_a))})});const c=al(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function e7(n){return new _e(3301,!1)}();return t}listen(e,t,i,r){const s=Gx(t,"","","");return zx(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const NO="ng-animate-queued",sC="ng-animate-disabled",iX=[],BO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bs="__ng_removed";class oC{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function lX(n){return n??null}(i?e.value:e),i){const s=Nf(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Vf="void",aC=new oC(Vf);class sX{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Vs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function t7(n,e){return new _e(3302,!1)}();if(null==i||0==i.length)throw function n7(n){return new _e(3303,!1)}();if(!function cX(n){return"start"==n||"done"==n}(i))throw function r7(n,e){return new _e(3400,!1)}();const s=ms(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=ms(this._engine.statesByElement,e,new Map);return a.has(t)||(Vs(e,c_),Vs(e,c_+"-"+t),a.set(t,aC)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function s7(n){return new _e(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new lC(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Vs(e,c_),Vs(e,c_+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new oC(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=aC),c.value!==Vf&&l.value===c.value){if(!function hX(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],g=s.matchStyles(l.value,l.params,m),_=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{hc(e,g),No(e,_)})}return}const h=ms(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Vs(e,NO),o.onStart(()=>{fd(e,NO)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(e);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,u_,!0);i.forEach(r=>{if(r[Bs])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,Vf,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&al(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||aC,u=new oC(Vf),d=new lC(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Bs];(!s||s===BO)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Vs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=Gx(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,zx(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class oX{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new sX(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(x_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!x_(t))return;const s=t[Bs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Vs(e,sC)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),fd(e,sC))}removeNode(e,t,i,r){if(x_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Bs]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return x_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,u_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Xx,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return al(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Bs];if(t&&t.setForRemoval){if(e[Bs]=BO,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(sC)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Vs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?al(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function o7(n){return new _e(3402,!1)}()}_flushAnimations(e,t){const i=new y_,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(V=>{u.add(V);const j=this.driver.query(V,".ng-animate-queued",!0);for(let q=0;q<j.length;q++)u.add(j[q])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=zO(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((V,j)=>{const q=qx+m++;p.set(j,q),V.forEach($=>Vs($,q))});const g=[],_=new Set,v=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){const j=this.collectedLeaveElements[V],q=j[Bs];q&&q.setForRemoval&&(g.push(j),_.add(j),q.hasAnimation?this.driver.query(j,".ng-star-inserted",!0).forEach($=>_.add($)):v.add(j))}const y=new Map,b=zO(h,Array.from(_));b.forEach((V,j)=>{const q=l_+m++;y.set(j,q),V.forEach($=>Vs($,q))}),e.push(()=>{f.forEach((V,j)=>{const q=p.get(j);V.forEach($=>fd($,q))}),b.forEach((V,j)=>{const q=y.get(j);V.forEach($=>fd($,q))}),g.forEach(V=>{this.processLeaveNode(V)})});const x=[],C=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(t).forEach(q=>{const $=q.player,ee=q.element;if(x.push($),this.collectedEnterElements.length){const Yt=ee[Bs];if(Yt&&Yt.setForMove){if(Yt.previousTriggersValues&&Yt.previousTriggersValues.has(q.triggerName)){const Ht=Yt.previousTriggersValues.get(q.triggerName),Tt=this.statesByElement.get(q.element);if(Tt&&Tt.has(q.triggerName)){const qe=Tt.get(q.triggerName);qe.value=Ht,Tt.set(q.triggerName,qe)}}return void $.destroy()}}const Re=!d||!this.driver.containsElement(d,ee),ge=y.get(ee),Ve=p.get(ee),Ge=this._buildInstruction(q,i,Ve,ge,Re);if(Ge.errors&&Ge.errors.length)return void C.push(Ge);if(Re)return $.onStart(()=>hc(ee,Ge.fromStyles)),$.onDestroy(()=>No(ee,Ge.toStyles)),void r.push($);if(q.isFallbackTransition)return $.onStart(()=>hc(ee,Ge.fromStyles)),$.onDestroy(()=>No(ee,Ge.toStyles)),void r.push($);const Mt=[];Ge.timelines.forEach(Yt=>{Yt.stretchStartingKeyframe=!0,this.disabledNodes.has(Yt.element)||Mt.push(Yt)}),Ge.timelines=Mt,i.append(ee,Ge.timelines),o.push({instruction:Ge,player:$,element:ee}),Ge.queriedElements.forEach(Yt=>ms(a,Yt,[]).push($)),Ge.preStyleProps.forEach((Yt,Ht)=>{if(Yt.size){let Tt=l.get(Ht);Tt||l.set(Ht,Tt=new Set),Yt.forEach((qe,hn)=>Tt.add(hn))}}),Ge.postStyleProps.forEach((Yt,Ht)=>{let Tt=c.get(Ht);Tt||c.set(Ht,Tt=new Set),Yt.forEach((qe,hn)=>Tt.add(hn))})});if(C.length){const V=[];C.forEach(j=>{V.push(function a7(n,e){return new _e(3505,!1)}())}),x.forEach(j=>j.destroy()),this.reportError(V)}const A=new Map,w=new Map;o.forEach(V=>{const j=V.element;i.has(j)&&(w.set(j,j),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,A))}),r.forEach(V=>{const j=V.element;this._getPreviousPlayers(j,!1,V.namespaceId,V.triggerName,null).forEach($=>{ms(A,j,[]).push($),$.destroy()})});const T=g.filter(V=>GO(V,l,c)),B=new Map;HO(B,this.driver,v,c,_a).forEach(V=>{GO(V,l,c)&&T.push(V)});const J=new Map;f.forEach((V,j)=>{HO(J,this.driver,new Set(V),l,"!")}),T.forEach(V=>{const j=B.get(V),q=J.get(V);B.set(V,new Map([...Array.from(j?.entries()??[]),...Array.from(q?.entries()??[])]))});const ie=[],z=[],te={};o.forEach(V=>{const{element:j,player:q,instruction:$}=V;if(i.has(j)){if(u.has(j))return q.onDestroy(()=>No(j,$.toStyles)),q.disabled=!0,q.overrideTotalTime($.totalTime),void r.push(q);let ee=te;if(w.size>1){let ge=j;const Ve=[];for(;ge=ge.parentNode;){const Ge=w.get(ge);if(Ge){ee=Ge;break}Ve.push(ge)}Ve.forEach(Ge=>w.set(Ge,ee))}const Re=this._buildAnimation(q.namespaceId,$,A,s,J,B);if(q.setRealPlayer(Re),ee===te)ie.push(q);else{const ge=this.playersByElement.get(ee);ge&&ge.length&&(q.parentPlayer=al(ge)),r.push(q)}}else hc(j,$.fromStyles),q.onDestroy(()=>No(j,$.toStyles)),z.push(q),u.has(j)&&r.push(q)}),z.forEach(V=>{const j=s.get(V.element);if(j&&j.length){const q=al(j);V.setRealPlayer(q)}}),r.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<g.length;V++){const j=g[V],q=j[Bs];if(fd(j,l_),q&&q.hasAnimation)continue;let $=[];if(a.size){let Re=a.get(j);Re&&Re.length&&$.push(...Re);let ge=this.driver.query(j,Xx,!0);for(let Ve=0;Ve<ge.length;Ve++){let Ge=a.get(ge[Ve]);Ge&&Ge.length&&$.push(...Ge)}}const ee=$.filter(Re=>!Re.destroyed);ee.length?uX(this,j,ee):this.processLeaveNode(j)}return g.length=0,ie.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();const j=this.players.indexOf(V);this.players.splice(j,1)}),V.play()}),ie}elementContainsData(e,t){let i=!1;const r=t[Bs];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Vf;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=ms(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}hc(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const g=m[Bs];if(g&&g.removedBeforeQueried)return new Ff(p.duration,p.delay);const _=m!==l,v=function dX(n){const e=[];return UO(n,e),e}((i.get(m)||iX).map(A=>A.getRealPlayer())).filter(A=>!!A.element&&A.element===m),y=s.get(m),b=o.get(m),x=pO(0,this._normalizer,0,p.keyframes,y,b),C=this._buildPlayer(p,x,v);if(p.subTimeline&&r&&d.add(m),_){const A=new lC(e,a,m);A.setRealPlayer(C),c.push(A)}return C});c.forEach(p=>{ms(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function aX(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Vs(p,CO));const f=al(h);return f.onDestroy(()=>{u.forEach(p=>fd(p,CO)),No(l,t.toStyles)}),d.forEach(p=>{ms(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Ff(e.duration,e.delay)}}class lC{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Ff,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>zx(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ms(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function x_(n){return n&&1===n.nodeType}function VO(n,e){const t=n.style.display;return n.style.display=e??"none",t}function HO(n,e,t,i,r){const s=[];t.forEach(l=>s.push(VO(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[Bs]=rX,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>VO(l,s[a++])),o}function zO(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Vs(n,e){n.classList?.add(e)}function fd(n,e){n.classList?.remove(e)}function uX(n,e,t){al(t).onDone(()=>n.processLeaveNode(e))}function UO(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof hO?UO(i.players,e):e.push(i)}}function GO(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class C_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new oX(e,t,i),this._timelineEngine=new Q7(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=Qx(this._driver,s,l,[]);if(l.length)throw function K9(n,e){return new _e(3404,!1)}();a=function X7(n,e,t){return new K7(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=mO(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=mO(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let pX=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&No(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(No(this._element,this._initialStyles),this._endStyles&&(No(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(hc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hc(this._element,this._endStyles),this._endStyles=null),No(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cC(n){let e=null;return n.forEach((t,i)=>{(function mX(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class WO{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:AO(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class gX{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return yO(e,t)}getParentElement(e){return jx(e)}query(e,t,i){return bO(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(f=>f instanceof WO);(function b7(n,e){return 0===n||0===e})(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,m)=>c.set(m,p))});let d=function g7(n){return n.length?n[0]instanceof Map?n:n.map(e=>MO(e)):[]}(t).map(f=>cl(f));d=function w7(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,AO(n,a)))}}return e}(e,d,c);const h=function fX(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=cC(e[0]),e.length>1&&(i=cC(e[e.length-1]))):e instanceof Map&&(t=cC(e)),t||i?new pX(n,t,i):null}(e,d);return new WO(e,d,l,h)}}let _X=(()=>{class n extends oO{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Ys.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?lO(t):t;return jO(this._renderer,null,i,"register",[r]),new vX(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Y(ef),Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();class vX extends class E9{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new yX(this._id,e,t||{},this._renderer)}}class yX{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return jO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function jO(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const $O="@.disabled";let bX=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new qO("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new wX(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Y(ef),Y(C_),Y(St))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();class qO{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==$O?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class wX extends qO{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$O?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function xX(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function CX(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const XO=[{provide:oO,useClass:_X},{provide:iC,useFactory:function SX(){return new W7}},{provide:C_,useClass:(()=>{class n extends C_{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt),Y($x),Y(iC),Y(oc))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})()},{provide:ef,useFactory:function EX(n,e,t){return new bX(n,e,t)},deps:[Yg,C_,St]}],uC=[{provide:$x,useFactory:()=>new gX},{provide:wr,useValue:"BrowserAnimations"},...XO],KO=[{provide:$x,useClass:wO},{provide:wr,useValue:"NoopAnimations"},...XO];let DX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?KO:uC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:uC,imports:[$k]}),n})();function pd(n){return new D(e=>{Ar(n()).subscribe(e)})}function pc(n,e){const t=Qt(n)?n:()=>n,i=r=>r.error(t());return new D(e?r=>e.schedule(i,0,r):i)}const TX=["addListener","removeListener"],AX=["addEventListener","removeEventListener"],RX=["on","off"];function Jr(n,e,t,i){if(Qt(t)&&(i=t,t=void 0),i)return Jr(n,e,t).pipe(wx(i));const[r,s]=function PX(n){return Qt(n.addEventListener)&&Qt(n.removeEventListener)}(n)?AX.map(o=>a=>n[o](e,a,t)):function IX(n){return Qt(n.addListener)&&Qt(n.removeListener)}(n)?TX.map(YO(n,e)):function kX(n){return Qt(n.on)&&Qt(n.off)}(n)?RX.map(YO(n,e)):[];if(!r&&mb(n))return Fi(o=>Jr(o,e,t))(Ar(n));if(!r)throw new TypeError("Invalid event target");return new D(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function YO(n,e){return t=>i=>n[t](e,i)}function pt(...n){return Ai(n,Ph(n))}function md(...n){return function OX(){return _u(1)}()(Ai(n,Ph(n)))}const ul=new D(ke);function On(n,e){return vt((t,i)=>{let r=0;t.subscribe(ft(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Br(n,e){return vt((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(ft(i,l=>{r?.unsubscribe();let c=0;const u=s++;Ar(n(l,u)).subscribe(r=ft(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function dC(){return vt((n,e)=>{let t=null;n._refCount++;const i=ft(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class hC extends D{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,bt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ve;const t=this.getSubject();e.add(this.source.subscribe(ft(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ve.EMPTY)}return e}refCount(){return dC()(this)}}const FX={connector:()=>new he};function ZO(n,e=FX){const{connector:t}=e;return vt((i,r)=>{const s=t();Ar(n(function LX(n){return new D(e=>n.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}function ti(n){return n<=0?()=>Xs:vt((e,t)=>{let i=0;e.subscribe(ft(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function mi(n,e,t){const i=Qt(n)||e||t?{next:n,error:e,complete:t}:n;return i?vt((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ft(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):F}class VX extends ve{constructor(e,t){super()}schedule(e,t=0){return this}}const S_={setInterval(n,e,...t){const{delegate:i}=S_;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=S_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class fC extends VX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return S_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;S_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Q(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const QO={now:()=>(QO.delegate||Date).now(),delegate:void 0};class Hf{constructor(e,t=Hf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Hf.now=QO.now;class pC extends Hf{constructor(e,t=Hf.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const E_=new pC(fC),HX=E_;function D_(n){return Oe(()=>n)}function JO(n,e){return e?t=>md(e.pipe(ti(1),function zX(){return vt((n,e)=>{n.subscribe(ft(e,ke))})}()),t.pipe(JO(n))):Fi((t,i)=>n(t,i).pipe(ti(1),D_(t)))}function mC(n=0,e,t=HX){let i=-1;return null!=e&&(wD(e)?t=e:i=e),new D(r=>{let s=function UX(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const zf="Service workers are disabled or not supported by this browser";class T_{constructor(e){if(this.serviceWorker=e,e){const i=Jr(e,"controllerchange").pipe(Oe(()=>e.controller)),s=md(pd(()=>pt(e.controller)),i);this.worker=s.pipe(On(u=>!!u)),this.registration=this.worker.pipe(Br(()=>e.getRegistration()));const c=Jr(e,"message").pipe(Oe(u=>u.data)).pipe(On(u=>u&&u.type)).pipe(function BX(n){return n?e=>ZO(n)(e):e=>function NX(n,e){const t=Qt(n)?n:()=>n;return Qt(e)?ZO(e,{connector:t}):i=>new hC(i,t)}(new he)(e)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function WX(n){return pd(()=>pc(new Error(n)))}(zf)}postMessage(e,t){return this.worker.pipe(ti(1),mi(i=>{i.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?i=>i.type===e:i=>e.includes(i.type),this.events.pipe(On(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(ti(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(On(t=>t.nonce===e),ti(1),Oe(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let jX=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new he,!t.isEnabled)return this.messages=ul,this.notificationClicks=ul,void(this.subscription=ul);this.messages=this.sw.eventsOfType("PUSH").pipe(Oe(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Oe(r=>r.data)),this.pushManager=this.sw.registration.pipe(Oe(r=>r.pushManager));const i=this.pushManager.pipe(Br(r=>r.getSubscription()));this.subscription=gr(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(zf));const i={userVisibleOnly:!0};let r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return i.applicationServerKey=s,this.pushManager.pipe(Br(o=>o.subscribe(i)),ti(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ti(1),Br(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(zf))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(T_))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),$X=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=ul,this.available=ul,this.activated=ul,void(this.unrecoverable=ul);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(On(i=>"VERSION_READY"===i.type),Oe(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(zf));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(zf));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(Y(T_))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();class gC{}const eL=new Ie("NGSW_REGISTER_SCRIPT");function qX(n,e,t,i){return()=>{if(!jg(i)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[a,...l]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=pt(null);break;case"registerWithDelay":s=tL(+l[0]||0);break;case"registerWhenStable":s=l[0]?gr(nL(n),tL(+l[0])):nL(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(St).runOutsideAngular(()=>s.pipe(ti(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function tL(n){return pt(null).pipe(function GX(n,e=E_){const t=mC(n,e);return JO(()=>t)}(n))}function nL(n){return n.get(oc).isStable.pipe(On(t=>t))}function XX(n,e){return new T_(jg(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let KX=(()=>{class n{static register(t,i={}){return{ngModule:n,providers:[{provide:eL,useValue:t},{provide:gC,useValue:i},{provide:T_,useFactory:XX,deps:[gC,cd]},{provide:bf,useFactory:qX,deps:[Bi,eL,gC,cd],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[jX,$X]}),n})();class _s extends he{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function _C(...n){const e=Ph(n),t=xD(n),{args:i,keys:r}=Zk(n);if(0===i.length)return Ai([],e);const s=new D(function YX(n,e,t=F){return i=>{iL(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)iL(e,()=>{const c=Ai(n[l],e);let u=!1;c.subscribe(ft(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>Qk(r,o):F));return t?s.pipe(wx(t)):s}function iL(n,e,t){n?ea(t,n,e):e()}const gd=Jo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function es(...n){const e=Ph(n);return vt((t,i)=>{(e?md(n,t,e):md(n,t)).subscribe(i)})}function A_(n){return vt((e,t)=>{let i=!1;e.subscribe(ft(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function rL(n=ZX){return vt((e,t)=>{let i=!1;e.subscribe(ft(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function ZX(){return new gd}function dl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?On((r,s)=>n(r,s,i)):F,ti(1),t?A_(e):rL(()=>new gd))}function hl(n,e){return Qt(e)?Fi(n,e,1):Fi(n,1)}function va(n){return vt((e,t)=>{let s,i=null,r=!1;i=e.subscribe(ft(t,void 0,void 0,o=>{s=Ar(n(o,va(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function QX(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ft(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function sL(n,e){return vt(QX(n,e,arguments.length>=2,!0))}function vC(n){return n<=0?()=>Xs:vt((e,t)=>{let i=[];e.subscribe(ft(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function oL(n,e){const t=arguments.length>=2;return i=>i.pipe(n?On((r,s)=>n(r,s,i)):F,vC(1),t?A_(e):rL(()=>new gd))}function R_(n){return vt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const _n="primary";class eK{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _d(n){return new eK(n)}function tK(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Bo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!aL(n[r],e[r]))return!1;return!0}function aL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function lL(n){return Array.prototype.concat.apply([],n)}function cL(n){return n.length>0?n[n.length-1]:null}function cr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ya(n){return gw(n)?n:df(n)?Ai(Promise.resolve(n)):pt(n)}const rK={exact:function hL(n,e,t){if(!gc(n.segments,e.segments)||!I_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!hL(n.children[i],e.children[i],t))return!1;return!0},subset:fL},uL={exact:function sK(n,e){return Bo(n,e)},subset:function oK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aL(n[t],e[t]))},ignored:()=>!0};function dL(n,e,t){return rK[t.paths](n.root,e.root,t.matrixParams)&&uL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fL(n,e,t){return pL(n,e,e.segments,t)}function pL(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!gc(r,t)||e.hasChildren()||!I_(r,t,i))}if(n.segments.length===t.length){if(!gc(n.segments,t)||!I_(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!fL(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gc(n.segments,r)&&I_(n.segments,r,i)&&n.children[_n])&&pL(n.children[_n],e,s,i)}}function I_(n,e,t){return e.every((i,r)=>uL[t](n[r].parameters,i.parameters))}class mc{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_d(this.queryParams)),this._queryParamMap}toString(){return cK.serialize(this)}}class yn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,cr(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return k_(this)}}class Uf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_d(this.parameters)),this._parameterMap}toString(){return yL(this)}}function gc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class mL{}class gL{parse(e){const t=new vK(e);return new mc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gf(e.root,!0)}`,i=function hK(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${P_(t)}=${P_(r)}`).join("&"):`${P_(t)}=${P_(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function uK(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cK=new gL;function k_(n){return n.segments.map(e=>yL(e)).join("/")}function Gf(n,e){if(!n.hasChildren())return k_(n);if(e){const t=n.children[_n]?Gf(n.children[_n],!1):"",i=[];return cr(n.children,(r,s)=>{s!==_n&&i.push(`${s}:${Gf(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function lK(n,e){let t=[];return cr(n.children,(i,r)=>{r===_n&&(t=t.concat(e(i,r)))}),cr(n.children,(i,r)=>{r!==_n&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===_n?[Gf(n.children[_n],!1)]:[`${r}:${Gf(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[_n]?`${k_(n)}/${t[0]}`:`${k_(n)}/(${t.join("//")})`}}function _L(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function P_(n){return _L(n).replace(/%3B/gi,";")}function bC(n){return _L(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function O_(n){return decodeURIComponent(n)}function vL(n){return O_(n.replace(/\+/g,"%20"))}function yL(n){return`${bC(n.path)}${function dK(n){return Object.keys(n).map(e=>`;${bC(e)}=${bC(n[e])}`).join("")}(n.parameters)}`}const fK=/^[^\/()?;=#]+/;function L_(n){const e=n.match(fK);return e?e[0]:""}const pK=/^[^=?&#]+/,gK=/^[^&#]+/;class vK{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[_n]=new yn(e,t)),i}parseSegment(){const e=L_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(e),new Uf(O_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=L_(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=L_(this.remaining);r&&(i=r,this.capture(i))}e[O_(t)]=O_(i)}parseQueryParam(e){const t=function mK(n){const e=n.match(pK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function _K(n){const e=n.match(gK);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=vL(t),s=vL(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=L_(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new _e(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=_n);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[_n]:new yn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _e(4011,!1)}}function wC(n){return n.segments.length>0?new yn([],{[_n]:n}):n}function F_(n){const e={};for(const i of Object.keys(n.children)){const s=F_(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function yK(n){if(1===n.numberOfChildren&&n.children[_n]){const e=n.children[_n];return new yn(n.segments.concat(e.segments),e.children)}return n}(new yn(n.segments,e))}function _c(n){return n instanceof mc}function xK(n,e,t,i,r){if(0===t.length)return vd(e.root,e.root,e.root,i,r);const s=function xL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wL(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return cr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new wL(t,e,i)}(t);return s.toRoot()?vd(e.root,e.root,new yn([],{}),i,r):function o(l){const c=function MK(n,e,t,i){if(n.isAbsolute)return new yd(e.root,!0,0);if(-1===i)return new yd(t,t===e.root,0);return function CL(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new _e(4005,!1);r=i.segments.length}return new yd(i,!1,r-s)}(t,i+(Wf(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),u=c.processChildren?$f(c.segmentGroup,c.index,s.commands):CC(c.segmentGroup,c.index,s.commands);return vd(e.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function Wf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jf(n){return"object"==typeof n&&null!=n&&n.outlets}function vd(n,e,t,i,r){let o,s={};i&&cr(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:bL(n,e,t);const a=wC(F_(o));return new mc(a,s,r)}function bL(n,e,t){const i={};return cr(n.children,(r,s)=>{i[s]=r===e?t:bL(r,e,t)}),new yn(n.segments,i)}class wL{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Wf(i[0]))throw new _e(4003,!1);const r=i.find(jf);if(r&&r!==cL(i))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yd{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function CC(n,e,t){if(n||(n=new yn([],{})),0===n.segments.length&&n.hasChildren())return $f(n,e,t);const i=function EK(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(jf(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!SL(l,c,o))return s;i+=2}else{if(!SL(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new yn(n.segments.slice(0,i.pathIndex),{});return s.children[_n]=new yn(n.segments.slice(i.pathIndex),n.children),$f(s,0,r)}return i.match&&0===r.length?new yn(n.segments,{}):i.match&&!n.hasChildren()?MC(n,e,t):i.match?$f(n,0,r):MC(n,e,t)}function $f(n,e,t){if(0===t.length)return new yn(n.segments,{});{const i=function SK(n){return jf(n[0])?n[0].outlets:{[_n]:n}}(t),r={};return cr(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=CC(n.children[o],e,s))}),cr(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new yn(n.segments,r)}}function MC(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(jf(s)){const l=DK(s.outlets);return new yn(i,l)}if(0===r&&Wf(t[0])){i.push(new Uf(n.segments[e].path,ML(t[0]))),r++;continue}const o=jf(s)?s.outlets[_n]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Wf(a)?(i.push(new Uf(o,ML(a))),r+=2):(i.push(new Uf(o,{})),r++)}return new yn(i,{})}function DK(n){const e={};return cr(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=MC(new yn([],{}),0,t))}),e}function ML(n){const e={};return cr(n,(t,i)=>e[i]=`${t}`),e}function SL(n,e,t){return n==t.path&&Bo(e,t.parameters)}class ba{constructor(e,t){this.id=e,this.url=t}}class SC extends ba{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vc extends ba{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class N_ extends ba{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class EL extends ba{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TK extends ba{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AK extends ba{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RK extends ba{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IK extends ba{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kK extends ba{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PK{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class OK{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LK{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FK{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NK{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BK{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DL{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=EC(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=EC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=DC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return DC(e,this._root).map(t=>t.value)}}function EC(n,e){if(n===e.value)return e;for(const t of e.children){const i=EC(n,t);if(i)return i}return null}function DC(n,e){if(n===e.value)return[e];for(const t of e.children){const i=DC(n,t);if(i.length)return i.unshift(e),i}return[]}class wa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function bd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class AL extends TL{constructor(e,t){super(e),this.snapshot=t,TC(this,e)}toString(){return this.snapshot.toString()}}function RL(n,e){const t=function HK(n,e){const o=new B_([],{},{},"",{},_n,e,null,n.root,-1,{});return new kL("",new wa(o,[]))}(n,e),i=new _s([new Uf("",{})]),r=new _s({}),s=new _s({}),o=new _s({}),a=new _s(""),l=new wd(i,r,o,a,s,_n,e,t.root);return l.snapshot=t.root,new AL(new wa(l,[]),t)}class wd{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>_d(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>_d(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function IL(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function zK(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class B_{constructor(e,t,i,r,s,o,a,l,c,u,d,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._correctedLastPathIndex=h??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_d(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_d(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kL extends TL{constructor(e,t){super(t),this.url=e,TC(this,t)}toString(){return PL(this._root)}}function TC(n,e){e.value._routerState=n,e.children.forEach(t=>TC(n,t))}function PL(n){const e=n.children.length>0?` { ${n.children.map(PL).join(", ")} } `:"";return`${n.value}${e}`}function AC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Bo(e.params,t.params)||n.params.next(t.params),function nK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Bo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function RC(n,e){const t=Bo(n.params,e.params)&&function aK(n,e){return gc(n,e)&&n.every((t,i)=>Bo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||RC(n.parent,e.parent))}function qf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function GK(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qf(n,i,r);return qf(n,i)})}(n,e,t);return new wa(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qf(n,a)),o}}const i=function WK(n){return new wd(new _s(n.url),new _s(n.params),new _s(n.queryParams),new _s(n.fragment),new _s(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>qf(n,s));return new wa(i,r)}}const IC="ngNavigationCancelingError";function OL(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=_c(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=LL(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function LL(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[IC]=!0,i.cancellationCode=e,t&&(i.url=t),i}function FL(n){return NL(n)&&_c(n.url)}function NL(n){return n&&n[IC]}class jK{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Xf,this.attachRef=null}}class Xf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jK,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const V_=!1;let BL=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new wt,this.deactivateEvents=new wt,this.attachEvents=new wt,this.detachEvents=new wt,this.name=r||_n,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,V_);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,V_);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,V_);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new _e(4013,V_);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new $K(t,a,r.injector);if(i&&function qK(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(R(Xf),R(Ji),Za("name"),R(Hi),R(Qa))},n.\u0275dir=Ae({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $K{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===wd?this.route:e===Xf?this.childContexts:this.parent.get(e,t)}}let VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&nn(0,"router-outlet")},dependencies:[BL],encapsulation:2}),n})();function HL(n,e){return n.providers&&!n._injector&&(n._injector=Cg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function PC(n){const e=n.children&&n.children.map(PC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_n&&(t.component=VL),t}function Hs(n){return n.outlet||_n}function zL(n,e){const t=n.filter(i=>Hs(i)===e);return t.push(...n.filter(i=>Hs(i)!==e)),t}function UL(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class QK{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),AC(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=bd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),cr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=bd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=bd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=bd(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new BK(s.value.snapshot))}),e.children.length&&this.forwardEvent(new FK(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(AC(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),AC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=UL(r.snapshot),l=a?.get(Ja)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class GL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class H_{constructor(e,t){this.component=e,this.route=t}}function JK(n,e,t){const i=n._root;return Kf(i,e?e._root:null,t,[i.value])}function z_(n,e,t){return(UL(e)??t).get(n)}function Kf(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=bd(e);return n.children.forEach(o=>{(function tY(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function nY(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gc(n.url,e.url)||!Bo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!RC(n,e)||!Bo(n.queryParams,e.queryParams);default:return!RC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new GL(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Kf(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new H_(a.outlet.component,o))}else o&&Yf(e,a,r),r.canActivateChecks.push(new GL(i)),Kf(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),cr(s,(o,a)=>Yf(o,t.getContext(a),r)),r}function Yf(n,e,t){const i=bd(n),r=n.value;cr(i,(s,o)=>{Yf(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new H_(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Zf(n){return"function"==typeof n}const U_=Symbol("INITIAL_VALUE");function xd(){return Br(n=>_C(n.map(e=>e.pipe(ti(1),es(U_)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===U_)return U_;if(!1===t||t instanceof mc)return t}return!0}),On(e=>e!==U_),ti(1)))}function WL(n){return function G(...n){return W(n)}(mi(e=>{if(_c(e))throw OL(0,e)}),Oe(e=>!0===e))}const OC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jL(n,e,t,i,r){const s=LC(n,e,t);return s.matched?function yY(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?pt(r.map(o=>{const a=n.get(o),l=function lY(n){return n&&Zf(n.canMatch)}(a)?a.canMatch(e,t):a(e,t);return ya(l)})).pipe(xd(),WL()):pt(!0)}(i=HL(e,i),e,t).pipe(Oe(o=>!0===o?s:{...OC})):pt(s)}function LC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...OC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||tK)(t,n,e);if(!r)return{...OC};const s={};cr(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function G_(n,e,t,i,r="corrected"){if(t.length>0&&function xY(n,e,t){return t.some(i=>W_(n,e,i)&&Hs(i)!==_n)}(n,t,i)){const o=new yn(e,function wY(n,e,t,i){const r={};r[_n]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Hs(s)!==_n){const o=new yn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Hs(s)]=o}return r}(n,e,i,new yn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function CY(n,e,t){return t.some(i=>W_(n,e,i))}(n,t,i)){const o=new yn(n.segments,function bY(n,e,t,i,r,s){const o={};for(const a of i)if(W_(n,t,a)&&!r[Hs(a)]){const l=new yn([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Hs(a)]=l}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new yn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function W_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $L(n,e,t,i){return!!(Hs(n)===i||i!==_n&&W_(e,t,n))&&("**"===n.path||LC(e,n,t).matched)}function qL(n,e,t){return 0===e.length&&!n.children[t]}const j_=!1;class $_{constructor(e){this.segmentGroup=e||null}}class XL{constructor(e){this.urlTree=e}}function Qf(n){return pc(new $_(n))}function KL(n){return pc(new XL(n))}class DY{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=G_(this.urlTree.root,[],[],this.config).segmentGroup,t=new yn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,_n).pipe(Oe(s=>this.createUrlTree(F_(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(va(s=>{if(s instanceof XL)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof $_?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,_n).pipe(Oe(r=>this.createUrlTree(F_(r),e.queryParams,e.fragment))).pipe(va(r=>{throw r instanceof $_?this.noMatchError(r):r}))}noMatchError(e){return new _e(4002,j_)}createUrlTree(e,t,i){const r=wC(e);return new mc(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Oe(s=>new yn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Ai(r).pipe(hl(s=>{const o=i.children[s],a=zL(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Oe(l=>({segment:l,outlet:s})))}),sL((s,o)=>(s[o.outlet]=o.segment,s),{}),oL())}expandSegment(e,t,i,r,s,o){return Ai(i).pipe(hl(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(va(c=>{if(c instanceof $_)return pt(null);throw c}))),dl(a=>!!a),va((a,l)=>{if(a instanceof gd||"EmptyError"===a.name)return qL(t,r,s)?pt(new yn([],{})):Qf(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return $L(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Qf(t):Qf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?KL(s):this.lineralizeSegments(i,s).pipe(Fi(o=>{const a=new yn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=LC(t,r,s);if(!a)return Qf(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?KL(d):this.lineralizeSegments(r,d).pipe(Fi(h=>this.expandSegment(e,t,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=HL(i,e),i.loadChildren?(i._loadedRoutes?pt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Oe(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new yn(r,{})))):pt(new yn(r,{}))):jL(t,i,r,e).pipe(Br(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Fi(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=G_(t,a,l,h),m=new yn(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(Oe(y=>new yn(a,y)));if(0===h.length&&0===p.length)return pt(new yn(a,{}));const g=Hs(i)===s;return this.expandSegment(d,m,h,p,g?_n:s,!0).pipe(Oe(v=>new yn(a.concat(v.segments),v.children)))})):Qf(t)))}getChildConfig(e,t,i){return t.children?pt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?pt({routes:t._loadedRoutes,injector:t._loadedInjector}):function vY(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?pt(!0):pt(r.map(o=>{const a=n.get(o),l=function rY(n){return n&&Zf(n.canLoad)}(a)?a.canLoad(e,t):a(e,t);return ya(l)})).pipe(xd(),WL())}(e,t,i).pipe(Fi(r=>r?this.configLoader.loadChildren(e,t).pipe(mi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function SY(n){return pc(LL(j_,3))}())):pt({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return pt(i);if(r.numberOfChildren>1||!r.children[_n])return pc(new _e(4e3,j_));r=r.children[_n]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new mc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return cr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return cr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new yn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new _e(4001,j_);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class AY{}class kY{constructor(e,t,i,r,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=G_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,_n).pipe(Oe(t=>{if(null===t)return null;const i=new B_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_n,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wa(i,t),s=new kL(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=IL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return Ai(Object.keys(i.children)).pipe(hl(r=>{const s=i.children[r],o=zL(t,r);return this.processSegmentGroup(e,o,s,r)}),sL((r,s)=>r&&s?(r.push(...s),r):null),function JX(n,e=!1){return vt((t,i)=>{let r=0;t.subscribe(ft(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),A_(null),oL(),Oe(r=>{if(null===r)return null;const s=YL(r);return function PY(n){n.sort((e,t)=>e.value.outlet===_n?-1:t.value.outlet===_n?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return Ai(t).pipe(hl(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),dl(o=>!!o),va(o=>{if(o instanceof gd)return qL(i,r,s)?pt([]):pt(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!$L(t,i,r,s))return pt(null);let o;if("**"===t.path){const a=r.length>0?cL(r).parameters:{},l=QL(i)+r.length;o=pt({snapshot:new B_(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eF(t),Hs(t),t.component??t._loadedComponent??null,t,ZL(i),l,tF(t),l),consumedSegments:[],remainingSegments:[]})}else o=jL(i,t,r,e).pipe(Oe(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=QL(i)+l.length;return{snapshot:new B_(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eF(t),Hs(t),t.component??t._loadedComponent??null,t,ZL(i),d,tF(t),d),consumedSegments:l,remainingSegments:c}}));return o.pipe(Br(a=>{if(null===a)return pt(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function OY(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=G_(i,c,u,h.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution);if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(Oe(g=>null===g?null:[new wa(l,g)]));if(0===h.length&&0===p.length)return pt([new wa(l,[])]);const m=Hs(t)===s;return this.processSegment(d,h,f,p,m?_n:s).pipe(Oe(g=>null===g?null:[new wa(l,g)]))}))}}function LY(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function YL(n){const e=[],t=new Set;for(const i of n){if(!LY(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=YL(i.children);e.push(new wa(i.value,r))}return e.filter(i=>!t.has(i))}function ZL(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function QL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eF(n){return n.data||{}}function tF(n){return n.resolve||{}}const FC=Symbol("RouteTitle");function nF(n){return"string"==typeof n.title||null===n.title}function NC(n){return Br(e=>{const t=n(e);return t?Ai(t).pipe(Oe(()=>e)):pt(e)})}class jY extends class WY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const BC=new Ie("ROUTES");let VC=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ya(t.loadComponent()).pipe(mi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),R_(()=>{this.componentLoaders.delete(t)})),r=new hC(i,()=>new he).pipe(dC());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return pt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Oe(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=lL(l.get(BC,[],Pt.Self|Pt.Optional)));return{routes:c.map(PC),injector:l}}),R_(()=>{this.childrenLoaders.delete(i)})),o=new hC(s,()=>new he).pipe(dC());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return ya(t()).pipe(Fi(i=>i instanceof $R||Array.isArray(i)?pt(i):Ai(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Y(Bi),Y(Uw))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();class qY{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function XY(n){throw n}function KY(n,e,t){return e.parse("/")}const YY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new he,this.errorHandler=XY,this.malformedUriErrorHandler=KY,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>pt(void 0),this.urlHandlingStrategy=new qY,this.routeReuseStrategy=new jY,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(VC),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new OK(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new PK(h)),this.ngModule=o.get(rc),this.console=o.get(S8);const d=o.get(St);this.isNgZoneEnabled=d instanceof St&&St.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function iK(){return new mc(new yn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=RL(this.currentUrlTree,this.rootComponentType),this.transitions=new _s({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(On(r=>0!==r.id),Oe(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Br(r=>{let s=!1,o=!1;return pt(r).pipe(mi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Br(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return rF(a.source)&&(this.browserUrlTree=a.extractedUrl),pt(a).pipe(Br(d=>{const h=this.transitions.getValue();return i.next(new SC(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Xs:Promise.resolve(d)}),function TY(n,e,t,i){return Br(r=>function EY(n,e,t,i,r){return new DY(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Oe(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mi(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},r.urlAfterRedirects=d.urlAfterRedirects}),function NY(n,e,t,i,r,s){return Fi(o=>function IY(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new kY(n,e,t,i,r,o,a,s).recognize().pipe(Br(l=>null===l?function RY(n){return new D(e=>e.error(n))}(new AY):pt(l)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe(Oe(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),mi(d=>{if(r.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new TK(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,_=new SC(h,this.serializeUrl(f),p,m);i.next(_);const v=RL(f,this.rootComponentType).snapshot;return pt(r={...a,targetSnapshot:v,urlAfterRedirects:f,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Xs}),mi(a=>{const l=new AK(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Oe(a=>r={...a,guards:JK(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function uY(n,e){return Fi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?pt({...t,guardsResult:!0}):function dY(n,e,t,i){return Ai(n).pipe(Fi(r=>function _Y(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?pt(s.map(a=>{const l=z_(a,e,r);return ya(function aY(n){return n&&Zf(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):l(n,e,t,i)).pipe(dl())})).pipe(xd()):pt(!0)}(r.component,r.route,t,e,i)),dl(r=>!0!==r,!0))}(o,i,r,n).pipe(Fi(a=>a&&function iY(n){return"boolean"==typeof n}(a)?function hY(n,e,t,i){return Ai(e).pipe(hl(r=>md(function pY(n,e){return null!==n&&e&&e(new LK(n)),pt(!0)}(r.route.parent,i),function fY(n,e){return null!==n&&e&&e(new NK(n)),pt(!0)}(r.route,i),function gY(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function eY(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>pd(()=>pt(o.guards.map(l=>{const c=z_(l,o.node,t);return ya(function oY(n){return n&&Zf(n.canActivateChild)}(c)?c.canActivateChild(i,n):c(i,n)).pipe(dl())})).pipe(xd())));return pt(s).pipe(xd())}(n,r.path,t),function mY(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return pt(!0);const r=i.map(s=>pd(()=>{const o=z_(s,e,t);return ya(function sY(n){return n&&Zf(n.canActivate)}(o)?o.canActivate(e,n):o(e,n)).pipe(dl())}));return pt(r).pipe(xd())}(n,r.route,t))),dl(r=>!0!==r,!0))}(i,s,n,e):pt(a)),Oe(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),mi(a=>{if(r.guardsResult=a.guardsResult,_c(a.guardsResult))throw OL(0,a.guardsResult);const l=new RK(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),On(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),NC(a=>{if(a.guards.canActivateChecks.length)return pt(a).pipe(mi(l=>{const c=new IK(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Br(l=>{let c=!1;return pt(l).pipe(function BY(n,e){return Fi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return pt(t);let s=0;return Ai(r).pipe(hl(o=>function VY(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!nF(r)&&(s[FC]=r.title),function HY(n,e,t,i){const r=function zY(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return pt({});const s={};return Ai(r).pipe(Fi(o=>function UY(n,e,t,i){const r=z_(n,e,i);return ya(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(dl(),mi(a=>{s[o]=a}))),vC(1),D_(s),va(o=>o instanceof gd?Xs:pc(o)))}(s,n,e,i).pipe(Oe(o=>(n._resolvedData=o,n.data=IL(n,t).resolve,r&&nF(r)&&(n.data[FC]=r.title),null)))}(o.route,i,n,e)),mi(()=>s++),vC(1),Fi(o=>s===r.length?pt(t):Xs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),mi(l=>{const c=new kK(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),NC(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(mi(d=>{c.component=d}),Oe(()=>{})));for(const d of c.children)u.push(...l(d));return u};return _C(l(a.targetSnapshot.root)).pipe(A_(),ti(1))}),NC(()=>this.afterPreactivation()),Oe(a=>{const l=function UK(n,e,t){const i=qf(n,e._root,t?t._root:void 0);return new AL(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),mi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Oe(i=>(new QK(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),mi({next(){s=!0},complete(){s=!0}}),R_(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),va(a=>{if(o=!0,NL(a)){FL(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new N_(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(l),FL(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rF(r.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new EL(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Xs}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(PC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),xK(c,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=_c(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function QY(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new _e(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...YY}:!1===i?{...ZY}:i,_c(t))return dL(this.currentUrlTree,t,r);const s=this.parseUrl(t);return dL(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new vc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,f)=>{a=h,l=f});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),d=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new N_(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){sg()},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();function rF(n){return"imperative"!==n}let sF=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===_n);return i}getResolvedTitleForRoute(t){return t.data[FC]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:function(){return Is(tZ)},providedIn:"root"}),n})(),tZ=(()=>{class n extends sF{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Y(qk))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oF{}let aF=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(On(t=>t instanceof vc),hl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Cg(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ai(r).pipe(_u())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):pt(null);const s=r.pipe(Fi(o=>null===o?pt(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Ai([s,this.loader.loadComponent(i)]).pipe(_u()):s})}}return n.\u0275fac=function(t){return new(t||n)(Y(Cr),Y(Uw),Y(Qa),Y(oF),Y(VC))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const lF=new Ie("");let nZ=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof SC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new DL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){sg()},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const UC=new Ie("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),cF=new Ie("ROUTER_FORROOT_GUARD"),uF=new Ie(""),iZ=[Cf,{provide:mL,useClass:gL},{provide:Cr,useFactory:function cZ(n,e,t,i,r,s,o,a={},l,c){const u=new Cr(null,n,e,t,i,r,lL(s));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),u.titleStrategy=o,function uZ(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(a,u),u},deps:[mL,Xf,Cf,Bi,Uw,BC,sF,UC,[class $Y{},new Mo],[class GY{},new Mo]]},Xf,{provide:wd,useFactory:function dZ(n){return n.routerState.root},deps:[Cr]},VC];function rZ(){return new UI("Router",Cr)}let dF=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[iZ,[],hF(t),{provide:cF,useFactory:lZ,deps:[[Cr,new Mo,new Lu]]},{provide:UC,useValue:i||{}},i?.useHash?{provide:lc,useClass:_6}:{provide:lc,useClass:hk},{provide:lF,useFactory:()=>{const n=Is(Cr),e=Is(O$),t=Is(UC);return t.scrollOffset&&e.setOffset(t.scrollOffset),new nZ(n,e,t)}},i?.preloadingStrategy?vZ(i.preloadingStrategy):[],{provide:UI,multi:!0,useFactory:rZ},i?.initialNavigation?fZ(i):[],[{provide:fF,useFactory:hZ},{provide:LI,multi:!0,useExisting:fF}]]}}static forChild(t){return{ngModule:n,providers:[hF(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Y(cF,8),Y(Cr,8))},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();function lZ(n){return"guarded"}function hF(n){return[{provide:Vz,multi:!0,useValue:n},{provide:BC,multi:!0,useValue:n}]}function hZ(){const n=Is(Bi);return e=>{const t=n.get(oc);if(e!==t.components[0])return;const i=n.get(Cr),r=n.get(pF);null===n.get(GC,null,Pt.Optional)&&i.initialNavigation(),n.get(uF,null,Pt.Optional)?.setUpPreloading(),n.get(lF,null,Pt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const fF=new Ie("");function fZ(n){return["disabled"===n.initialNavigation?[{provide:bf,multi:!0,useFactory:()=>{const n=Is(Cr);return()=>{n.setUpLocationChangeListener()}}},{provide:GC,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:GC,useValue:"enabledBlocking"},{provide:bf,multi:!0,deps:[Bi],useFactory:n=>{const e=n.get(p6,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(r=>{const s=n.get(Cr),o=n.get(pF);(function i(r){n.get(Cr).events.pipe(On(o=>o instanceof vc||o instanceof N_||o instanceof EL),Oe(o=>o instanceof vc||o instanceof N_&&(0===o.code||1===o.code)&&null),On(o=>null!==o),ti(1)).subscribe(()=>{r()})})(()=>{r(!0),t=!0}),s.afterPreactivation=()=>(r(!0),t||o.closed?pt(void 0):o),s.initialNavigation()}))}}]:[]]}const pF=new Ie("",{factory:()=>new he}),GC=new Ie("");function vZ(n){return[aF,{provide:uF,useExisting:aF},{provide:oF,useExisting:n}]}function mF(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function Pi(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){mF(s,i,r,o,a,"next",l)}function a(l){mF(s,i,r,o,a,"throw",l)}o(void 0)})}}let WC;try{WC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{WC=!1}let Cd,Gi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?jg(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!WC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Y(cd))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gF=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _F(){if(Cd)return Cd;if("object"!=typeof document||!document)return Cd=new Set(gF),Cd;let n=document.createElement("input");return Cd=new Set(gF.filter(e=>(n.setAttribute("type",e),n.type===e))),Cd}let Jf,K_,bc,jC;function yc(n){return function yZ(){if(null==Jf&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Jf=!0}))}finally{Jf=Jf||!1}return Jf}()?n:!!n.capture}function vF(){if(null==bc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return bc=!1,bc;if("scrollBehavior"in document.documentElement.style)bc=!0;else{const n=Element.prototype.scrollTo;bc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return bc}function ep(){if("object"!=typeof document||!document)return 0;if(null==K_){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),K_=0,0===n.scrollLeft&&(n.scrollLeft=1,K_=0===n.scrollLeft?1:2),n.remove()}return K_}function $C(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function wc(n){return n.composedPath?n.composedPath()[0]:n.target}function qC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function fl(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function tp(n,e=E_){return vt((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(ft(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function ZC(n){return On((e,t)=>n<=t)}function QC(n,e=F){return n=n??PZ,vt((t,i)=>{let r,s=!0;t.subscribe(ft(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function PZ(n,e){return n===e}function Cn(n){return vt((e,t)=>{Ar(n).subscribe(ft(t,()=>t.complete(),ke)),!t.closed&&e.subscribe(t)})}function Gn(n){return null!=n&&"false"!=`${n}`}function Vo(n,e=0){return function OZ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Y_(n){return Array.isArray(n)?n:[n]}function Wi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ca(n){return n instanceof Et?n.nativeElement:n}let EF=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LZ=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Ca(t);return new D(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new he,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Y(EF))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DF=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new wt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Vo(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(tp(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(R(LZ),R(Et),R(St))},n.\u0275dir=Ae({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),JC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[EF]}),n})();const TF=new Set;let Md,FZ=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):BZ}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function NZ(n){if(!TF.has(n))try{Md||(Md=document.createElement("style"),Md.setAttribute("type","text/css"),document.head.appendChild(Md)),Md.sheet&&(Md.sheet.insertRule(`@media ${n} {body{ }}`,0),TF.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(Gi))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BZ(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let VZ=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new he}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return AF(Y_(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=_C(AF(Y_(t)).map(o=>this._registerQuery(o).observable));return s=md(s.pipe(ti(1)),s.pipe(ZC(1),tp(0))),s.pipe(Oe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new D(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(es(i),Oe(({matches:o})=>({query:t,matches:o})),Cn(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Y(FZ),Y(St))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AF(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class kF extends class UZ{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new he,this._typeaheadSubscription=ve.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new he,this.change=new he,e instanceof sc&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(mi(t=>this._pressedLetters.push(t)),tp(e),On(()=>this._pressedLetters.length>0),Oe(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||fl(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof sc?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let np=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function WZ(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function GZ(n){try{return n.frameElement}catch{return null}}(function QZ(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===OF(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=OF(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function YZ(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function ZZ(n){return!function $Z(n){return function XZ(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function jZ(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function qZ(n){return function KZ(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||PF(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Y(Gi))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PF(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function OF(n){if(!PF(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class JZ{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(ti(1)).subscribe(e)}}let Z_=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new JZ(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Y(np),Y(St),Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LF(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function FF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const eQ=new Ie("cdk-input-modality-detector-options"),tQ={ignoreKeys:[18,17,224,91,16]},Sd=yc({passive:!0,capture:!0});let nQ=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new _s(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=wc(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(LF(o)?"keyboard":"mouse"),this._mostRecentTarget=wc(o))},this._onTouchstart=o=>{FF(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=wc(o))},this._options={...tQ,...s},this.modalityDetected=this._modality.pipe(ZC(1)),this.modalityChanged=this.modalityDetected.pipe(QC()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Sd),r.addEventListener("mousedown",this._onMousedown,Sd),r.addEventListener("touchstart",this._onTouchstart,Sd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Sd),document.removeEventListener("mousedown",this._onMousedown,Sd),document.removeEventListener("touchstart",this._onTouchstart,Sd))}}return n.\u0275fac=function(t){return new(t||n)(Y(Gi),Y(St),Y(Kt),Y(eQ,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rQ=new Ie("cdk-focus-monitor-default-options"),Q_=yc({passive:!0,capture:!0});let pl=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new he,this._rootNodeFocusAndBlurListener=a=>{for(let c=wc(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=Ca(t);if(!this._platform.isBrowser||1!==r.nodeType)return pt(null);const s=function wZ(n){if(function bZ(){if(null==jC){const n=typeof document<"u"?document.head:null;jC=!(!n||!n.createShadowRoot&&!n.attachShadow)}return jC}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new he,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Ca(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Ca(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=wc(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Q_),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Q_)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Cn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Q_),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Q_),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Y(St),Y(Gi),Y(nQ),Y(Kt,8),Y(rQ,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sQ=(()=>{class n{constructor(t,i){this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new wt}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(pl))},n.\u0275dir=Ae({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const BF="cdk-high-contrast-black-on-white",VF="cdk-high-contrast-white-on-black",eM="cdk-high-contrast-active";let HF=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Is(VZ).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(eM,BF,VF),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(eM,BF):2===i&&t.add(eM,VF)}}}return n.\u0275fac=function(t){return new(t||n)(Y(Gi),Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tM=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Y(HF))},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[JC]}),n})();const ip={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=ip;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new ve(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=ip;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=ip;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class aQ extends pC{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class oQ extends fC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ip.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(ip.cancelAnimationFrame(t),e._scheduled=void 0)}});let nM,cQ=1;const J_={};function zF(n){return n in J_&&(delete J_[n],!0)}const uQ={setImmediate(n){const e=cQ++;return J_[e]=!0,nM||(nM=Promise.resolve()),nM.then(()=>zF(e)&&n()),e},clearImmediate(n){zF(n)}},{setImmediate:dQ,clearImmediate:hQ}=uQ,ev={setImmediate(...n){const{delegate:e}=ev;return(e?.setImmediate||dQ)(...n)},clearImmediate(n){const{delegate:e}=ev;return(e?.clearImmediate||hQ)(n)},delegate:void 0};new class pQ extends pC{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class fQ extends fC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ev.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(ev.clearImmediate(t),e._scheduled=void 0)}});function UF(n,e=E_){return function gQ(n){return vt((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(ft(t,c=>{i=!0,r=c,s||Ar(n(c)).subscribe(s=ft(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>mC(n,e))}const _Q=new Ie("cdk-dir-doc",{providedIn:"root",factory:function vQ(){return Is(Kt)}}),yQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let vs=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new wt,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function bQ(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?yQ.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Y(_Q,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})(),iM=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new he,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new D(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(UF(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):pt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(On(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ca(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Jr(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Y(St),Y(Gi),Y(Kt,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rM=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new he,this._elementScrolled=new D(o=>this.ngZone.runOutsideAngular(()=>Jr(this.elementRef.nativeElement,"scroll").pipe(Cn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=ep()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==ep()?t.left=t.right:1==ep()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;vF()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==ep()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==ep()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(iM),R(St),R(vs,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),xc=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new he,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(UF(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Y(Gi),Y(St),Y(Kt,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})(),sM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[rp,sp,rp,sp]}),n})();class oM{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class aM extends oM{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class lM extends oM{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class CQ extends oM{constructor(e){super(),this.element=e instanceof Et?e.nativeElement:e}}class cM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof aM?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof lM?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof CQ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class MQ extends cM{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Bi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Ed=(()=>{class n extends cM{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new wt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(R(Ja),R(Ji),R(Kt))},n.\u0275dir=Ae({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[nt]}),n})(),op=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();const GF=vF();class SQ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Wi(-this._previousScrollPosition.left),e.style.top=Wi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),GF&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),GF&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class EQ{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class WF{enable(){}disable(){}attach(){}}function uM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function jF(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class DQ{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();uM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let TQ=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new WF,this.close=o=>new EQ(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new SQ(this._viewportRuler,this._document),this.reposition=o=>new DQ(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Y(iM),Y(xc),Y(St),Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $F{constructor(e){if(this.scrollStrategy=new WF,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class AQ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let qF=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RQ=(()=>{class n extends qF{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt),Y(St,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IQ=(()=>{class n extends qF{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=wc(s)},this._clickListener=s=>{const o=wc(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt),Y(Gi),Y(St,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tv=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||qC()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),qC()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Y(Kt),Y(Gi))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ap{constructor(e,t,i,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new he,this._attachments=new he,this._detachments=new he,this._locationChanges=ve.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new he,this._outsidePointerEvents=new he,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ti(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Wi(this._config.width),e.height=Wi(this._config.height),e.minWidth=Wi(this._config.minWidth),e.minHeight=Wi(this._config.minHeight),e.maxWidth=Wi(this._config.maxWidth),e.maxHeight=Wi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=Y_(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Cn(gr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const XF="cdk-overlay-connected-position-bounding-box",kQ=/([A-Za-z%]+)$/;class PQ{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new he,this._resizeSubscription=ve.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(XF),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(XF),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=YF(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),m=this._subtractOverflows(s.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=KF(this._overlayRef.getConfig().minHeight),a=KF(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=YF(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new AQ(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Wi(i.height),r.top=Wi(i.top),r.bottom=Wi(i.bottom),r.width=Wi(i.width),r.left=Wi(i.left),r.right=Wi(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Wi(s)),o&&(r.maxWidth=Wi(o))}this._lastBoundingBoxSize=i,Cc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Cc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Cc(i,this._getExactOverlayY(t,e,u)),Cc(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Wi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Wi(o.maxWidth):s&&(i.maxWidth="")),Cc(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Wi(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Wi(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:jF(e,i),isOriginOutsideView:uM(e,i),isOverlayClipped:jF(t,i),isOverlayOutsideView:uM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Y_(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Et)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Cc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function KF(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(kQ);return t&&"px"!==t?null:parseFloat(e)}return n||null}function YF(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const ZF="cdk-global-overlay-wrapper";class OQ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ZF),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",m="";l?m="flex-start":"center"===u?(m="center",h?p=d:f=d):h?"left"===u||"end"===u?(m="flex-end",f=d):("right"===u||"start"===u)&&(m="flex-start",p=d):"left"===u||"start"===u?(m="flex-start",f=d):("right"===u||"end"===u)&&(m="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=m,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(ZF),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let LQ=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new OQ}flexibleConnectedTo(t){return new PQ(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Y(xc),Y(Kt),Y(Gi),Y(tv))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FQ=0,Mc=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new $F(t);return o.direction=o.direction||this._directionality.value,new ap(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+FQ++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(oc)),new MQ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Y(TQ),Y(tv),Y(Ja),Y(LQ),Y(RQ),Y(Bi),Y(St),Y(Kt),Y(vs),Y(Cf),Y(IQ),Y(wr,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const VQ={provide:new Ie("cdk-connected-overlay-scroll-strategy"),deps:[Mc],useFactory:function BQ(n){return()=>n.scrollStrategies.reposition()}};let dM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[Mc,VQ],imports:[rp,op,sM,sM]}),n})();function HQ(n,e){}class nv{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let QF=(()=>{class n extends cM{constructor(t,i,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=$C(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=$C();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=$C())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Z_),R(Kt,8),R(nv),R(np),R(St),R(ap),R(pl))},n.\u0275cmp=Wt({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&kn(Ed,7),2&t){let r;dt(r=ht())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&pi("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[nt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Nt(0,HQ,0,0,"ng-template",0)},dependencies:[Ed],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class hM{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new he,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!fl(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const JF=new Ie("DialogScrollStrategy"),zQ=new Ie("DialogData"),UQ=new Ie("DefaultDialogConfig"),WQ={provide:JF,deps:[Mc],useFactory:function GQ(n){return()=>n.scrollStrategies.block()}};let jQ=0,eN=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new he,this._afterOpenedAtThisLevel=new he,this._ariaHiddenElements=new Map,this.afterAllClosed=pd(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(es(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new nv,...i}).id=i.id||"cdk-dialog-"+jQ++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new hM(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){fM(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){fM(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),fM(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new $F({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector??r.viewContainerRef?.injector,o=[{provide:nv,useValue:r},{provide:hM,useValue:i},{provide:ap,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=QF;const l=new aM(a,r.viewContainerRef,Bi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){const o=this._createInjector(s,i,r);if(t instanceof Vi){let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new lM(t,null,a,o))}else{const a=r.attachComponentPortal(new aM(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:zQ,useValue:t.data},{provide:hM,useValue:i}];return t.providers&&("function"==typeof t.providers?o.push(...t.providers(i,t,r)):o.push(...t.providers)),t.direction&&(!s||!s.get(vs,null,Pt.Optional))&&o.push({provide:vs,useValue:{value:t.direction,change:pt()}}),Bi.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Y(Mc),Y(Bi),Y(UQ,8),Y(n,12),Y(tv),Y(JF))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();function fM(n,e){let t=n.length;for(;t--;)e(n[t])}let $Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[eN,WQ],imports:[dM,op,tM,op]}),n})();const XQ=new Ie("mat-sanity-checks",{providedIn:"root",factory:function qQ(){return!0}});let Wn=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!qC()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Y(HF),Y(XQ,8),Y(Kt))},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[rp,rp]}),n})();function lp(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Gn(e)}}}function Dd(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Td(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Gn(e)}}}function KQ(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Vo(t):this.defaultTabIndex}}}function YQ(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let iN=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function cp(n,e,t){n.nativeElement.classList.toggle(e,t)}let sN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[Wn,Wn]}),n})();class QQ{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const oN={enterDuration:225,exitDuration:150},mM=yc({passive:!0}),aN=["mousedown","touchstart"],lN=["mouseup","mouseleave","touchend","touchcancel"];class eJ{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ca(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...oN,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function tJ(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f,m=new QQ(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",m.state=0,i.persistent||(this._mostRecentTransientRipple=m);let g=null;return!p&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(m),v=()=>this._destroyRipple(m);u.addEventListener("transitionend",_),u.addEventListener("transitioncancel",v),g={onTransitionEnd:_,onTransitionCancel:v}}),this._activeRipples.set(m,g),(p||!c)&&this._finishRippleTransition(m),m}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...oN,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ca(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(aN))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(lN),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=LF(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!FF(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,mM)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(aN.forEach(e=>{this._triggerElement.removeEventListener(e,this,mM)}),this._pointerUpEventsRegistered&&lN.forEach(e=>{this._triggerElement.removeEventListener(e,this,mM)}))}}const nJ=new Ie("mat-ripple-global-options");let Ad=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new eJ(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(St),R(Gi),R(nJ,8),R(wr,8))},n.\u0275dir=Ae({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&In("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),gM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[Wn,Wn]}),n})(),cN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[Wn]}),n})();function rJ(n,e){}const Rd={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},sJ={dialogContainer:Lf("dialogContainer",[Lo("void, exit",ki({opacity:0,transform:"scale(0.7)"})),Lo("enter",ki({transform:"none"})),Fo("* => enter",aO([Oo("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",ki({transform:"none",opacity:1})),uO("@*",cO(),{optional:!0})]),Rd),Fo("* => void, * => exit",aO([Oo("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",ki({opacity:0})),uO("@*",cO(),{optional:!0})]),Rd)])};class iv{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Rd.params.enterAnimationDuration,this.exitAnimationDuration=Rd.params.exitAnimationDuration}}let oJ=(()=>{class n extends QF{constructor(t,i,r,s,o,a,l,c){super(t,i,r,s,o,a,l,c),this._animationStateChanged=new wt}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Z_),R(Kt,8),R(iv),R(np),R(St),R(ap),R(pl))},n.\u0275cmp=Wt({type:n,selectors:[["ng-component"]],features:[nt],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),aJ=(()=>{class n extends oJ{constructor(t,i,r,s,o,a,l,c,u){super(t,i,r,s,o,a,l,u),this._changeDetectorRef=c,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Rd.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Rd.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Z_),R(Kt,8),R(iv),R(np),R(St),R(ap),R(Hi),R(pl))},n.\u0275cmp=Wt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&gg("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(nd("id",i._config.id),pi("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),vg("@dialogContainer",i._getAnimationState()))},features:[nt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Nt(0,rJ,0,0,"ng-template",0)},dependencies:[Ed],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[sJ.dialogContainer]}}),n})();class rv{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new he,this._beforeClosed=new he,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(On(r=>"opened"===r.state),ti(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(On(r=>"closed"===r.state),ti(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),gr(this.backdropClick(),this.keydownEvents().pipe(On(r=>27===r.keyCode&&!this.disableClose&&!fl(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function lJ(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(On(t=>"closing"===t.state),ti(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const cJ=new Ie("MatDialogData"),uJ=new Ie("mat-dialog-default-options"),uN=new Ie("mat-dialog-scroll-strategy"),hJ={provide:uN,deps:[Mc],useFactory:function dJ(n){return()=>n.scrollStrategies.block()}};let fJ=0,pJ=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new he,this._afterOpenedAtThisLevel=new he,this._idPrefix="mat-dialog-",this.afterAllClosed=pd(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(es(void 0))),this._scrollStrategy=a,this._dialog=i.get(eN)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new iv,...i}).id=i.id||`${this._idPrefix}${fJ++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:iv,useValue:i},{provide:nv,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){sg()},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),_M=(()=>{class n extends pJ{constructor(t,i,r,s,o,a,l,c){super(t,i,s,a,l,o,rv,aJ,cJ,c)}}return n.\u0275fac=function(t){return new(t||n)(Y(Mc),Y(Bi),Y(Cf,8),Y(uJ,8),Y(uN),Y(n,12),Y(tv),Y(wr,8))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),mJ=0,dN=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+mJ++}ngOnInit(){this._dialogRef||(this._dialogRef=function gJ(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(R(rv,8),R(Et),R(_M))},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&nd("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),fN=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,i){2&t&&In("mat-dialog-actions-align-center","center"===i.align)("mat-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})(),_J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[_M,hJ],imports:[$Q,dM,op,Wn,Wn]}),n})();const vJ=["mat-button",""],yJ=["*"],wJ=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],xJ=Dd(lp(Td(class{constructor(n){this._elementRef=n}})));let up=(()=>{class n extends xJ{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of wJ)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(pl),R(wr,8))},n.\u0275cmp=Wt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&kn(Ad,5),2&t){let r;dt(r=ht())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(pi("disabled",i.disabled||null),In("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[nt],attrs:vJ,ngContentSelectors:yJ,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(lr(),se(0,"span",0),Nn(1),fe(),nn(2,"span",1)(3,"span",2)),2&t&&(Ue(2),In("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Le("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[Ad],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),CJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[gM,Wn,Wn]}),n})();const MJ=["connectionContainer"],SJ=["inputContainer"],EJ=["label"];function DJ(n,e){1&n&&(Ps(0),se(1,"div",14),nn(2,"div",15)(3,"div",16)(4,"div",17),fe(),se(5,"div",18),nn(6,"div",15)(7,"div",16)(8,"div",17),fe(),Os())}function TJ(n,e){if(1&n){const t=ar();se(0,"div",19),st("cdkObserveContent",function(){return ui(t),di(un().updateOutlineGap())}),Nn(1,1),fe()}2&n&&Le("cdkObserveContentDisabled","outline"!=un().appearance)}function AJ(n,e){if(1&n&&(Ps(0),Nn(1,2),se(2,"span"),Ot(3),fe(),Os()),2&n){const t=un(2);Ue(3),td(t._control.placeholder)}}function RJ(n,e){1&n&&Nn(0,3,["*ngSwitchCase","true"])}function IJ(n,e){1&n&&(se(0,"span",23),Ot(1," *"),fe())}function kJ(n,e){if(1&n){const t=ar();se(0,"label",20,21),st("cdkObserveContent",function(){return ui(t),di(un().updateOutlineGap())}),Nt(2,AJ,4,1,"ng-container",12),Nt(3,RJ,1,0,"ng-content",12),Nt(4,IJ,2,0,"span",22),fe()}if(2&n){const t=un();In("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Le("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),pi("for",t._control.id)("aria-owns",t._control.id),Ue(2),Le("ngSwitchCase",!1),Ue(1),Le("ngSwitchCase",!0),Ue(1),Le("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function PJ(n,e){1&n&&(se(0,"div",24),Nn(1,4),fe())}function OJ(n,e){if(1&n&&(se(0,"div",25),nn(1,"span",26),fe()),2&n){const t=un();Ue(1),In("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function LJ(n,e){1&n&&(se(0,"div"),Nn(1,5),fe()),2&n&&Le("@transitionMessages",un()._subscriptAnimationState)}function FJ(n,e){if(1&n&&(se(0,"div",30),Ot(1),fe()),2&n){const t=un(2);Le("id",t._hintLabelId),Ue(1),td(t.hintLabel)}}function NJ(n,e){if(1&n&&(se(0,"div",27),Nt(1,FJ,2,2,"div",28),Nn(2,6),nn(3,"div",29),Nn(4,7),fe()),2&n){const t=un();Le("@transitionMessages",t._subscriptAnimationState),Ue(1),Le("ngIf",t.hintLabel)}}const BJ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],VJ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],HJ=new Ie("MatError"),zJ={transitionMessages:Lf("transitionMessages",[Lo("enter",ki({opacity:1,transform:"translateY(0%)"})),Fo("void => enter",[ki({opacity:0,transform:"translateY(-5px)"}),Oo("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let vM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n}),n})();const UJ=new Ie("MatHint");let yM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-label"]]}),n})(),GJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-placeholder"]]}),n})();const WJ=new Ie("MatPrefix"),jJ=new Ie("MatSuffix");let pN=0;const qJ=Dd(class{constructor(n){this._elementRef=n}},"primary"),XJ=new Ie("MAT_FORM_FIELD_DEFAULT_OPTIONS"),gN=new Ie("MatFormField");let KJ=(()=>{class n extends qJ{constructor(t,i,r,s,o,a,l){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new he,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+pN++,this._labelId="mat-form-field-label-"+pN++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Gn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(es(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Cn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Cn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),gr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(es(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(es(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Cn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Jr(this._label.nativeElement,"transitionend").pipe(ti(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const u=i.querySelectorAll(`${r}, ${s}`);for(let d=0;d<u.length;d++)u[d].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=i.querySelectorAll(r),c=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const u=i.getBoundingClientRect();if(0===u.width&&0===u.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const d=this._getStartEnd(u),h=t.children,f=this._getStartEnd(h[0].getBoundingClientRect());let p=0;for(let m=0;m<h.length;m++)p+=h[m].offsetWidth;o=Math.abs(f-d)-5,a=p>0?.75*p+10:0}for(let u=0;u<l.length;u++)l[u].style.width=`${o}px`;for(let u=0;u<c.length;u++)c[u].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(vs,8),R(XJ,8),R(Gi),R(St),R(wr,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(Pn(r,vM,5),Pn(r,vM,7),Pn(r,yM,5),Pn(r,yM,7),Pn(r,GJ,5),Pn(r,HJ,5),Pn(r,UJ,5),Pn(r,WJ,5),Pn(r,jJ,5)),2&t){let s;dt(s=ht())&&(i._controlNonStatic=s.first),dt(s=ht())&&(i._controlStatic=s.first),dt(s=ht())&&(i._labelChildNonStatic=s.first),dt(s=ht())&&(i._labelChildStatic=s.first),dt(s=ht())&&(i._placeholderChild=s.first),dt(s=ht())&&(i._errorChildren=s),dt(s=ht())&&(i._hintChildren=s),dt(s=ht())&&(i._prefixChildren=s),dt(s=ht())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(kn(MJ,7),kn(SJ,5),kn(EJ,5)),2&t){let r;dt(r=ht())&&(i._connectionContainerRef=r.first),dt(r=ht())&&(i._inputContainerRef=r.first),dt(r=ht())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&In("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Lt([{provide:gN,useExisting:n}]),nt],ngContentSelectors:VJ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(lr(BJ),se(0,"div",0)(1,"div",1,2),st("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),Nt(3,DJ,9,0,"ng-container",3),Nt(4,TJ,2,1,"div",4),se(5,"div",5,6),Nn(7),se(8,"span",7),Nt(9,kJ,5,16,"label",8),fe()(),Nt(10,PJ,2,0,"div",9),fe(),Nt(11,OJ,2,4,"div",10),se(12,"div",11),Nt(13,LJ,2,1,"div",12),Nt(14,NJ,5,2,"div",13),fe()()),2&t&&(Ue(3),Le("ngIf","outline"==i.appearance),Ue(1),Le("ngIf",i._prefixChildren.length),Ue(5),Le("ngIf",i._hasFloatingLabel()),Ue(1),Le("ngIf",i._suffixChildren.length),Ue(1),Le("ngIf","outline"!=i.appearance),Ue(1),Le("ngSwitch",i._getDisplayedMessages()),Ue(1),Le("ngSwitchCase","error"),Ue(1),Le("ngSwitchCase","hint"))},dependencies:[ma,Wg,Ek,DF],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[zJ.transitionMessages]},changeDetection:0}),n})(),_N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co,Wn,JC,Wn]}),n})();const vN=yc({passive:!0});let YJ=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Xs;const i=Ca(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new he,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,vN),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,vN)}}),s}stopMonitoring(t){const i=Ca(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(Y(Gi),Y(St))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();const ZJ=new Ie("MAT_INPUT_VALUE_ACCESSOR"),QJ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let JJ=0;const eee=YQ(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new he}});let bM=(()=>{class n extends eee{constructor(t,i,r,s,o,a,l,c,u,d){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+JJ++,this.focused=!1,this.stateChanges=new he,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>_F().has(p)),this._iOSKeyupListener=p=>{const m=p.target;!m.value&&0===m.selectionStart&&0===m.selectionEnd&&(m.setSelectionRange(1,1),m.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,f=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===f,this._isTextarea="textarea"===f,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Gn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Iq.required)??!1}set required(t){this._required=Gn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&_F().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Gn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,i=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){QJ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Gi),R(ga,10),R(o_,8),R(a_,8),R(iN),R(ZJ,10),R(YJ),R(St),R(gN,8))},n.\u0275dir=Ae({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&st("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(nd("disabled",i.disabled)("required",i.required),pi("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),In("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Lt([{provide:vM,useExisting:n}]),nt,Ri]}),n})(),tee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[iN],imports:[yN,_N,Wn,yN,_N]}),n})(),nee=(()=>{class n{constructor(t){this.dialogRef=t,this.name="",this.songName="None",this.song=null}ngOnInit(){}fileSelected(t){let i=t.target;i.files&&i.files.length>0&&(this.song=i.files[0],this.songName=i.files[0].name)}cancel(){this.dialogRef.close()}create(){null!==this.song&&this.dialogRef.close({name:this.name,song:this.song})}}return n.\u0275fac=function(t){return new(t||n)(R(rv))},n.\u0275cmp=Wt({type:n,selectors:[["app-file-new"]],decls:23,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","disabled","",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["hidden","","type","file","accept","audio/*",3,"change"],["fileInput",""],["mat-dialog-actions",""],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(t,i){if(1&t){const r=ar();se(0,"h1",0),Ot(1,"New Show"),fe(),se(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),Ot(5,"Name"),fe(),se(6,"input",3),st("ngModelChange",function(o){return i.name=o}),fe()(),nn(7,"br"),se(8,"mat-form-field",2)(9,"mat-label"),Ot(10,"Song"),fe(),se(11,"input",4),st("ngModelChange",function(o){return i.songName=o}),fe()(),nn(12,"br"),se(13,"div")(14,"button",5),st("click",function(){return ui(r),di(io(17).click())}),Ot(15,"Choose Song"),fe(),se(16,"input",6,7),st("change",function(o){return i.fileSelected(o)}),fe()()(),se(18,"div",8)(19,"button",9),st("click",function(){return i.cancel()}),Ot(20,"Cancel"),fe(),se(21,"button",10),st("click",function(){return i.create()}),Ot(22,"Ok"),fe()()}2&t&&(Ue(6),Le("ngModel",i.name),Ue(5),Le("ngModel",i.songName),Ue(10),Le("disabled",null===i.song))},dependencies:[ud,Rf,hd,up,KJ,yM,bM,dN,hN,fN]}),n})();const gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ji=Object.keys,Mr=Array.isArray;function Vr(n,e){return"object"!=typeof e||ji(e).forEach(function(t){n[t]=e[t]}),n}typeof Promise>"u"||gi.Promise||(gi.Promise=Promise);const dp=Object.getPrototypeOf,iee={}.hasOwnProperty;function ys(n,e){return iee.call(n,e)}function Id(n,e){"function"==typeof e&&(e=e(dp(n))),(typeof Reflect>"u"?ji:Reflect.ownKeys)(e).forEach(t=>{Ma(n,t,e[t])})}const bN=Object.defineProperty;function Ma(n,e,t,i){bN(n,e,Vr(t&&ys(t,"get")&&"function"==typeof t.get?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},i))}function kd(n){return{from:function(e){return n.prototype=Object.create(e.prototype),Ma(n.prototype,"constructor",n),{extend:Id.bind(null,n.prototype)}}}}const ree=Object.getOwnPropertyDescriptor;function wM(n,e){let t;return ree(n,e)||(t=dp(n))&&wM(t,e)}const see=[].slice;function sv(n,e,t){return see.call(n,e,t)}function wN(n,e){return e(n)}function hp(n){if(!n)throw new Error("Assertion Failed")}function xN(n){gi.setImmediate?setImmediate(n):setTimeout(n,0)}function CN(n,e){return n.reduce((t,i,r)=>{var s=e(i,r);return s&&(t[s[0]]=s[1]),t},{})}function Sa(n,e){if(ys(n,e))return n[e];if(!e)return n;if("string"!=typeof e){for(var t=[],i=0,r=e.length;i<r;++i){var s=Sa(n,e[i]);t.push(s)}return t}var o=e.indexOf(".");if(-1!==o){var a=n[e.substr(0,o)];return void 0===a?void 0:Sa(a,e.substr(o+1))}}function uo(n,e,t){if(n&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if("string"!=typeof e&&"length"in e){hp("string"!=typeof t&&"length"in t);for(var i=0,r=e.length;i<r;++i)uo(n,e[i],t[i])}else{var s=e.indexOf(".");if(-1!==s){var o=e.substr(0,s),a=e.substr(s+1);if(""===a)void 0===t?Mr(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=t;else{var l=n[o];l&&ys(n,o)||(l=n[o]={}),uo(l,a,t)}}else void 0===t?Mr(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=t}}function MN(n){var e={};for(var t in n)ys(n,t)&&(e[t]=n[t]);return e}const oee=[].concat;function SN(n){return oee.apply([],n)}const EN="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(SN([8,16,32,64].map(n=>["Int","Uint","Float"].map(e=>e+n+"Array")))).filter(n=>gi[n]),aee=EN.map(n=>gi[n]);CN(EN,n=>[n,!0]);let ml=null;function fp(n){ml=typeof WeakMap<"u"&&new WeakMap;const e=xM(n);return ml=null,e}function xM(n){if(!n||"object"!=typeof n)return n;let e=ml&&ml.get(n);if(e)return e;if(Mr(n)){e=[],ml&&ml.set(n,e);for(var t=0,i=n.length;t<i;++t)e.push(xM(n[t]))}else if(aee.indexOf(n.constructor)>=0)e=n;else{const s=dp(n);for(var r in e=s===Object.prototype?{}:Object.create(s),ml&&ml.set(n,e),n)ys(n,r)&&(e[r]=xM(n[r]))}return e}const{toString:lee}={};function CM(n){return lee.call(n).slice(8,-1)}const MM=typeof Symbol<"u"?Symbol.iterator:"@@iterator",cee="symbol"==typeof MM?function(n){var e;return null!=n&&(e=n[MM])&&e.apply(n)}:function(){return null},Pd={};function Ea(n){var e,t,i,r;if(1===arguments.length){if(Mr(n))return n.slice();if(this===Pd&&"string"==typeof n)return[n];if(r=cee(n)){for(t=[];!(i=r.next()).done;)t.push(i.value);return t}if(null==n)return[n];if("number"==typeof(e=n.length)){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}const SM=typeof Symbol<"u"?n=>"AsyncFunction"===n[Symbol.toStringTag]:()=>!1;var Ho=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function DN(n,e){Ho=n,TN=e}var TN=()=>!0;const uee=!new Error("").stack;function Sc(){if(uee)try{throw new Error}catch(n){return n}return new Error}function EM(n,e){var t=n.stack;return t?(e=e||0,0===t.indexOf(n.name)&&(e+=(n.name+n.message).split("\n").length),t.split("\n").slice(e).filter(TN).map(i=>"\n"+i).join("")):""}var AN=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],DM=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(AN),dee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Od(n,e){this._e=Sc(),this.name=n,this.message=e}function RN(n,e){return n+". Errors: "+Object.keys(e).map(t=>e[t].toString()).filter((t,i,r)=>r.indexOf(t)===i).join("\n")}function ov(n,e,t,i){this._e=Sc(),this.failures=e,this.failedKeys=i,this.successCount=t,this.message=RN(n,e)}function pp(n,e){this._e=Sc(),this.name="BulkError",this.failures=Object.keys(e).map(t=>e[t]),this.failuresByPos=e,this.message=RN(n,e)}kd(Od).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+EM(this._e,2))}},toString:function(){return this.name+": "+this.message}}),kd(ov).from(Od),kd(pp).from(Od);var TM=DM.reduce((n,e)=>(n[e]=e+"Error",n),{});const hee=Od;var Ut=DM.reduce((n,e)=>{var t=e+"Error";function i(r,s){this._e=Sc(),this.name=t,r?"string"==typeof r?(this.message=`${r}${s?"\n "+s:""}`,this.inner=s||null):"object"==typeof r&&(this.message=`${r.name} ${r.message}`,this.inner=r):(this.message=dee[e]||t,this.inner=null)}return kd(i).from(hee),n[e]=i,n},{});Ut.Syntax=SyntaxError,Ut.Type=TypeError,Ut.Range=RangeError;var IN=AN.reduce((n,e)=>(n[e+"Error"]=Ut[e],n),{}),av=DM.reduce((n,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(n[e+"Error"]=Ut[e]),n),{});function si(){}function mp(n){return n}function fee(n,e){return null==n||n===mp?e:function(t){return e(n(t))}}function Ec(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function pee(n,e){return n===si?e:function(){var t=n.apply(this,arguments);void 0!==t&&(arguments[0]=t);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ec(i,this.onsuccess):i),r&&(this.onerror=this.onerror?Ec(r,this.onerror):r),void 0!==s?s:t}}function mee(n,e){return n===si?e:function(){n.apply(this,arguments);var t=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Ec(t,this.onsuccess):t),i&&(this.onerror=this.onerror?Ec(i,this.onerror):i)}}function gee(n,e){return n===si?e:function(t){var i=n.apply(this,arguments);Vr(t,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ec(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Ec(s,this.onerror):s),void 0===i?void 0===o?void 0:o:Vr(i,o)}}function _ee(n,e){return n===si?e:function(){return!1!==e.apply(this,arguments)&&n.apply(this,arguments)}}function AM(n,e){return n===si?e:function(){var t=n.apply(this,arguments);if(t&&"function"==typeof t.then){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return t.then(function(){return e.apply(i,s)})}return e.apply(this,arguments)}}av.ModifyError=ov,av.DexieError=Od,av.BulkError=pp;var gp={};const[RM,lv,IM]=typeof Promise>"u"?[]:(()=>{let n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,dp(n),n];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,dp(e),n]})(),kN=lv&&lv.then,cv=RM&&RM.constructor,kM=!!IM;var PM=!1,vee=IM?()=>{IM.then(fv)}:gi.setImmediate?setImmediate.bind(null,fv):gi.MutationObserver?()=>{var n=document.createElement("div");new MutationObserver(()=>{fv(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:()=>{setTimeout(fv,0)},_p=function(n,e){vp.push([n,e]),uv&&(vee(),uv=!1)},OM=!0,uv=!0,Dc=[],dv=[],LM=null,FM=mp,Ld={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:zN,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(n=>{try{zN(n[0],n[1])}catch{}})}},It=Ld,vp=[],Tc=0,hv=[];function mt(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=si,this._lib=!1;var e=this._PSD=It;if(Ho&&(this._stackHolder=Sc(),this._prev=null,this._numPrev=0),"function"!=typeof n){if(n!==gp)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&BM(this,this._value))}this._state=null,this._value=null,++e.ref,ON(this,n)}const NM={get:function(){var n=It,e=gv;function t(i,r){var s=!n.global&&(n!==It||e!==gv);const o=s&&!Da();var a=new mt((l,c)=>{VM(this,new PN(vv(i,n,s,o),vv(r,n,s,o),l,c,n))});return Ho&&NN(a,this),a}return t.prototype=gp,t},set:function(n){Ma(this,"then",n&&n.prototype===gp?NM:{get:function(){return n},set:NM.set})}};function PN(n,e,t,i,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.resolve=t,this.reject=i,this.psd=r}function ON(n,e){try{e(t=>{if(null===n._state){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var i=n._lib&&yp();t&&"function"==typeof t.then?ON(n,(r,s)=>{t instanceof mt?t._then(r,s):t.then(r,s)}):(n._state=!0,n._value=t,LN(n)),i&&bp()}},BM.bind(null,n))}catch(t){BM(n,t)}}function BM(n,e){if(dv.push(e),null===n._state){var t=n._lib&&yp();e=FM(e),n._state=!1,n._value=e,Ho&&null!==e&&"object"==typeof e&&!e._promise&&function(i,r,s){try{(()=>{var i=wM(e,"stack");e._promise=n,Ma(e,"stack",{get:()=>PM?i&&(i.get?i.get.apply(e):i.value):n.stack})}).apply(null,void 0)}catch(o){}}(),i=n,Dc.some(r=>r._value===i._value)||Dc.push(i),LN(n),t&&bp()}var i}function LN(n){var e=n._listeners;n._listeners=[];for(var t=0,i=e.length;t<i;++t)VM(n,e[t]);var r=n._PSD;--r.ref||r.finalize(),0===Tc&&(++Tc,_p(()=>{0==--Tc&&HM()},[]))}function VM(n,e){if(null!==n._state){var t=n._state?e.onFulfilled:e.onRejected;if(null===t)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++Tc,_p(yee,[t,n,e])}else n._listeners.push(e)}function yee(n,e,t){try{LM=e;var i,r=e._value;e._state?i=n(r):(dv.length&&(dv=[]),i=n(r),-1===dv.indexOf(r)&&function(s){for(var o=Dc.length;o;)if(Dc[--o]._value===s._value)return void Dc.splice(o,1)}(e)),t.resolve(i)}catch(s){t.reject(s)}finally{LM=null,0==--Tc&&HM(),--t.psd.ref||t.psd.finalize()}}function FN(n,e,t){if(e.length===t)return e;var i="";if(!1===n._state){var r,s,o=n._value;null!=o?(r=o.name||"Error",s=o.message||o,i=EM(o,0)):(r=o,s=""),e.push(r+(s?": "+s:"")+i)}return Ho&&((i=EM(n._stackHolder,2))&&-1===e.indexOf(i)&&e.push(i),n._prev&&FN(n._prev,e,t)),e}function NN(n,e){var t=e?e._numPrev+1:0;t<100&&(n._prev=e,n._numPrev=t)}function fv(){yp()&&bp()}function yp(){var n=OM;return OM=!1,uv=!1,n}function bp(){var n,e,t;do{for(;vp.length>0;)for(n=vp,vp=[],t=n.length,e=0;e<t;++e){var i=n[e];i[0].apply(null,i[1])}}while(vp.length>0);OM=!0,uv=!0}function HM(){var n=Dc;Dc=[],n.forEach(i=>{i._PSD.onunhandled.call(null,i._value,i)});for(var e=hv.slice(0),t=e.length;t;)e[--t]()}function pv(n){return new mt(gp,!1,n)}function yi(n,e){var t=It;return function(){var i=yp(),r=It;try{return _l(t,!0),n.apply(this,arguments)}catch(s){e&&e(s)}finally{_l(r,!1),i&&bp()}}}Id(mt.prototype,{then:NM,_then:function(n,e){VM(this,new PN(null,null,n,e,It))},catch:function(n){if(1===arguments.length)return this.then(null,n);var e=arguments[0],t=arguments[1];return this.then(null,"function"==typeof e?i=>i instanceof e?t(i):pv(i):i=>i&&i.name===e?t(i):pv(i))},finally:function(n){return this.then(e=>(n(),e),e=>(n(),pv(e)))},stack:{get:function(){if(this._stack)return this._stack;try{PM=!0;var n=FN(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{PM=!1}}},timeout:function(n,e){return n<1/0?new mt((t,i)=>{var r=setTimeout(()=>i(new Ut.Timeout(e)),n);this.then(t,i).finally(clearTimeout.bind(null,r))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ma(mt.prototype,Symbol.toStringTag,"Dexie.Promise"),Ld.env=BN(),Id(mt,{all:function(){var n=Ea.apply(null,arguments).map(_v);return new mt(function(e,t){0===n.length&&e([]);var i=n.length;n.forEach((r,s)=>mt.resolve(r).then(o=>{n[s]=o,--i||e(n)},t))})},resolve:n=>{if(n instanceof mt)return n;if(n&&"function"==typeof n.then)return new mt((t,i)=>{n.then(t,i)});var e=new mt(gp,!0,n);return NN(e,LM),e},reject:pv,race:function(){var n=Ea.apply(null,arguments).map(_v);return new mt((e,t)=>{n.map(i=>mt.resolve(i).then(e,t))})},PSD:{get:()=>It,set:n=>It=n},totalEchoes:{get:()=>gv},newPSD:gl,usePSD:Nd,scheduler:{get:()=>_p,set:n=>{_p=n}},rejectionMapper:{get:()=>FM,set:n=>{FM=n}},follow:(n,e)=>new mt((t,i)=>gl((r,s)=>{var o=It;o.unhandleds=[],o.onunhandled=s,o.finalize=Ec(function(){var a;a=()=>{0===this.unhandleds.length?r():s(this.unhandleds[0])},hv.push(function l(){a(),hv.splice(hv.indexOf(l),1)}),++Tc,_p(()=>{0==--Tc&&HM()},[])},o.finalize),n()},e,t,i))}),cv&&(cv.allSettled&&Ma(mt,"allSettled",function(){const n=Ea.apply(null,arguments).map(_v);return new mt(e=>{0===n.length&&e([]);let t=n.length;const i=new Array(t);n.forEach((r,s)=>mt.resolve(r).then(o=>i[s]={status:"fulfilled",value:o},o=>i[s]={status:"rejected",reason:o}).then(()=>--t||e(i)))})}),cv.any&&typeof AggregateError<"u"&&Ma(mt,"any",function(){const n=Ea.apply(null,arguments).map(_v);return new mt((e,t)=>{0===n.length&&t(new AggregateError([]));let i=n.length;const r=new Array(i);n.forEach((s,o)=>mt.resolve(s).then(a=>e(a),a=>{r[o]=a,--i||t(new AggregateError(r))}))})}));const Sr={awaits:0,echoes:0,id:0};var bee=0,mv=[],zM=0,gv=0,wee=0;function gl(n,e,t,i){var r=It,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++wee;var o=Ld.env;s.env=kM?{Promise:mt,PromiseProp:{value:mt,configurable:!0,writable:!0},all:mt.all,race:mt.race,allSettled:mt.allSettled,any:mt.any,resolve:mt.resolve,reject:mt.reject,nthen:HN(o.nthen,s),gthen:HN(o.gthen,s)}:{},e&&Vr(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Nd(s,n,t,i);return 0===s.ref&&s.finalize(),a}function Fd(){return Sr.id||(Sr.id=++bee),++Sr.awaits,Sr.echoes+=100,Sr.id}function Da(){return!!Sr.awaits&&(0==--Sr.awaits&&(Sr.id=0),Sr.echoes=100*Sr.awaits,!0)}function _v(n){return Sr.echoes&&n&&n.constructor===cv?(Fd(),n.then(e=>(Da(),e),e=>(Da(),tr(e)))):n}function xee(n){++gv,Sr.echoes&&0!=--Sr.echoes||(Sr.echoes=Sr.id=0),mv.push(It),_l(n,!0)}function Cee(){var n=mv[mv.length-1];mv.pop(),_l(n,!1)}function _l(n,e){var t=It;if((e?!Sr.echoes||zM++&&n===It:!zM||--zM&&n===It)||VN(e?xee.bind(null,n):Cee),n!==It&&(It=n,t===Ld&&(Ld.env=BN()),kM)){var i=Ld.env.Promise,r=n.env;lv.then=r.nthen,i.prototype.then=r.gthen,(t.global||n.global)&&(Object.defineProperty(gi,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function BN(){var n=gi.Promise;return kM?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(gi,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:lv.then,gthen:n.prototype.then}:{}}function Nd(n,e,t,i,r){var s=It;try{return _l(n,!0),e(t,i,r)}finally{_l(s,!1)}}function VN(n){kN.call(RM,n)}function vv(n,e,t,i){return"function"!=typeof n?n:function(){var r=It;t&&Fd(),_l(e,!0);try{return n.apply(this,arguments)}finally{_l(r,!1),i&&VN(Da)}}}function HN(n,e){return function(t,i){return n.call(this,vv(t,e),vv(i,e))}}function zN(n,e){var t;try{t=e.onuncatched(n)}catch{}if(!1!==t)try{var i,r={promise:e,reason:n};if(gi.document&&document.createEvent?((i=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),Vr(i,r)):gi.CustomEvent&&Vr(i=new CustomEvent("unhandledrejection",{detail:r}),r),i&&gi.dispatchEvent&&(dispatchEvent(i),!gi.PromiseRejectionEvent&&gi.onunhandledrejection))try{gi.onunhandledrejection(i)}catch{}Ho&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${n.stack||n}`)}catch{}}-1===(""+kN).indexOf("[native code]")&&(Fd=Da=si);var tr=mt.reject;function UM(n,e,t,i){if(n.idbdb&&(n._state.openComplete||It.letThrough||n._vip)){var r=n._createTransaction(e,t,n._dbSchema);try{r.create(),n._state.PR1398_maxLoop=3}catch(s){return s.name===TM.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>UM(n,e,t,i))):tr(s)}return r._promise(e,(s,o)=>gl(()=>(It.trans=r,i(s,o,r)))).then(s=>r._completion.then(()=>s))}if(n._state.openComplete)return tr(new Ut.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return tr(new Ut.DatabaseClosed);n.open().catch(si)}return n._state.dbReadyPromise.then(()=>UM(n,e,t,i))}const Ac=String.fromCharCode(65535),Ta="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",wp=[],yv=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Mee=yv,See=yv,UN=n=>!/(dexie\.js|dexie\.min\.js)/.test(n);function Rc(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}const GN={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bv(n){return"string"!=typeof n||/\./.test(n)?e=>e:e=>(void 0===e[n]&&n in e&&delete(e=fp(e))[n],e)}class Eee{_trans(e,t,i){const r=this._tx||It.trans,s=this.name;function o(l,c,u){if(!u.schema[s])throw new Ut.NotFound("Table "+s+" not part of transaction");return t(u.idbtrans,u)}const a=yp();try{return r&&r.db===this.db?r===It.trans?r._promise(e,o,i):gl(()=>r._promise(e,o,i),{trans:r,transless:It.transless||It}):UM(this.db,e,[this.name],o)}finally{a&&bp()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",i=>this.core.get({trans:i,key:e}).then(r=>this.hook.reading.fire(r))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Mr(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=ji(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const i=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&t.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>t.indexOf(u)>=0))[0];if(i&&this.db._maxKey!==Ac)return this.where(i.name).equals(i.keyPath.map(c=>e[c]));!i&&Ho&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function o(c,u){try{return 0===s.cmp(c,u)}catch{return!1}}const[a,l]=t.reduce(([c,u],d)=>{const h=r[d],f=e[d];return[c||h,c||!h?Rc(u,h&&h.multi?p=>{const m=Sa(p,d);return Mr(m)&&m.some(g=>o(f,g))}:p=>o(f,Sa(p,d))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):i?this.filter(l):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Mr(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=i=>{if(!i)return i;const r=Object.create(e.prototype);for(var s in i)if(ys(i,s))try{r[s]=i[s]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass(function(e){Vr(this,e)})}add(e,t){const{auto:i,keyPath:r}=this.schema.primKey;let s=e;return r&&i&&(s=bv(r)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:null!=t?[t]:null,values:[s]})).then(o=>o.numFailures?mt.reject(o.failures[0]):o.lastResult).then(o=>{if(r)try{uo(e,r,o)}catch{}return o})}update(e,t){if("object"!=typeof e||Mr(e))return this.where(":id").equals(e).modify(t);{const i=Sa(e,this.schema.primKey.keyPath);if(void 0===i)return tr(new Ut.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?ji(t).forEach(r=>{uo(e,r,t[r])}):t(e,{value:e,primKey:i})}catch{}return this.where(":id").equals(i).modify(t)}}put(e,t){const{auto:i,keyPath:r}=this.schema.primKey;let s=e;return r&&i&&(s=bv(r)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:null!=t?[t]:null})).then(o=>o.numFailures?mt.reject(o.failures[0]):o.lastResult).then(o=>{if(r)try{uo(e,r,o)}catch{}return o})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]})).then(t=>t.numFailures?mt.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:GN})).then(e=>e.numFailures?mt.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(i=>i.map(r=>this.hook.reading.fire(r))))}bulkAdd(e,t,i){const r=Array.isArray(t)?t:void 0,s=(i=i||(r?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&r)throw new Ut.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new Ut.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(bv(l)):e;return this.core.mutate({trans:o,type:"add",keys:r,values:u,wantResults:s}).then(({numFailures:d,results:h,lastResult:f,failures:p})=>{if(0===d)return s?h:f;throw new pp(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,p)})})}bulkPut(e,t,i){const r=Array.isArray(t)?t:void 0,s=(i=i||(r?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&r)throw new Ut.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new Ut.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(bv(l)):e;return this.core.mutate({trans:o,type:"put",keys:r,values:u,wantResults:s}).then(({numFailures:d,results:h,lastResult:f,failures:p})=>{if(0===d)return s?h:f;throw new pp(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,p)})})}bulkDelete(e){const t=e.length;return this._trans("readwrite",i=>this.core.mutate({trans:i,type:"delete",keys:e})).then(({numFailures:i,lastResult:r,failures:s})=>{if(0===i)return r;throw new pp(`${this.name}.bulkDelete(): ${i} of ${t} operations failed`,s)})}}function xp(n){var e={},t=function(a,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return e[a].subscribe.apply(null,u),n}if("string"==typeof a)return e[a]};t.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return t;function s(a,l,c){if("object"==typeof a)return o(a);l||(l=_ee),c||(c=si);var u={subscribers:[],fire:c,subscribe:function(d){-1===u.subscribers.indexOf(d)&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(l,c)}};return e[a]=t[a]=u,u}function o(a){ji(a).forEach(function(l){var c=a[l];if(Mr(c))s(l,a[l][0],a[l][1]);else{if("asap"!==c)throw new Ut.InvalidArgument("Invalid event config");var u=s(l,mp,function(){for(var d=arguments.length,h=new Array(d);d--;)h[d]=arguments[d];u.subscribers.forEach(function(f){xN(function(){f.apply(null,h)})})})}})}}function Cp(n,e){return kd(e).from({prototype:n}),e}function Bd(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function GM(n,e){n.filter=Rc(n.filter,e)}function WM(n,e,t){var i=n.replayFilter;n.replayFilter=i?()=>Rc(i(),e()):e,n.justLimit=t&&!i}function wv(n,e){if(n.isPrimKey)return e.primaryKey;const t=e.getIndexByKeyPath(n.index);if(!t)throw new Ut.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return t}function WN(n,e,t){const i=wv(n,e.schema);return e.openCursor({trans:t,values:!n.keysOnly,reverse:"prev"===n.dir,unique:!!n.unique,query:{index:i,range:n.range}})}function xv(n,e,t,i){const r=n.replayFilter?Rc(n.filter,n.replayFilter()):n.filter;if(n.or){const s={},o=(a,l,c)=>{if(!r||r(l,c,h=>l.stop(h),h=>l.fail(h))){var u=l.primaryKey,d=""+u;"[object ArrayBuffer]"===d&&(d=""+new Uint8Array(u)),ys(s,d)||(s[d]=!0,e(a,l,c))}};return Promise.all([n.or._iterate(o,t),jN(WN(n,i,t),n.algorithm,o,!n.keysOnly&&n.valueMapper)])}return jN(WN(n,i,t),Rc(n.algorithm,r),e,!n.keysOnly&&n.valueMapper)}function jN(n,e,t,i){var r=yi(i?(s,o,a)=>t(i(s),o,a):t);return n.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=si},a=>{s.fail(a),o=si})||r(s.value,s,a=>o=a),o()})})}function Hr(n,e){try{const t=$N(n),i=$N(e);if(t!==i)return"Array"===t?1:"Array"===i?-1:"binary"===t?1:"binary"===i?-1:"string"===t?1:"string"===i?-1:"Date"===t?1:"Date"!==i?NaN:-1;switch(t){case"number":case"Date":case"string":return n>e?1:n<e?-1:0;case"binary":return function(r,s){const o=r.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c)if(r[c]!==s[c])return r[c]<s[c]?-1:1;return o===a?0:o<a?-1:1}(qN(n),qN(e));case"Array":return function(r,s){const o=r.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c){const u=Hr(r[c],s[c]);if(0!==u)return u}return o===a?0:o<a?-1:1}(n,e)}}catch{}return NaN}function $N(n){const e=typeof n;if("object"!==e)return e;if(ArrayBuffer.isView(n))return"binary";const t=CM(n);return"ArrayBuffer"===t?"binary":t}function qN(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}class Dee{_read(e,t){var i=this._ctx;return i.error?i.table._trans(null,tr.bind(null,i.error)):i.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,tr.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Rc(t.algorithm,e)}_iterate(e,t){return xv(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&Vr(i,e),t._ctx=i,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(i=>xv(t,e,i,t.table.core))}count(e){return this._read(t=>{const i=this._ctx,r=i.table.core;if(Bd(i,!0))return r.count({trans:t,query:{index:wv(i,r.schema),range:i.range}}).then(o=>Math.min(o,i.limit));var s=0;return xv(i,()=>(++s,!1),t,r).then(()=>s)}).then(e)}sortBy(e,t){const i=e.split(".").reverse(),r=i[0],s=i.length-1;function o(c,u){return u?o(c[i[u]],u-1):c[r]}var a="next"===this._ctx.dir?1:-1;function l(c,u){var d=o(c,s),h=o(u,s);return d<h?-a:d>h?a:0}return this.toArray(function(c){return c.sort(l)}).then(t)}toArray(e){return this._read(t=>{var i=this._ctx;if("next"===i.dir&&Bd(i,!0)&&i.limit>0){const{valueMapper:r}=i,s=wv(i,i.table.core.schema);return i.table.core.query({trans:t,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(({result:o})=>r?o.map(r):o)}{const r=[];return xv(i,s=>r.push(s),t,i.table.core).then(()=>r)}},e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Bd(t)?WM(t,()=>{var i=e;return(r,s)=>0===i||(1===i?(--i,!1):(s(()=>{r.advance(i),i=0}),!1))}):WM(t,()=>{var i=e;return()=>--i<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),WM(this._ctx,()=>{var t=e;return function(i,r,s){return--t<=0&&r(s),t>=0}},!0),this}until(e,t){return GM(this._ctx,function(i,r,s){return!e(i.value)||(r(s),t)}),this}first(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var t;return GM(this._ctx,function(r){return e(r.value)}),(t=this._ctx).isMatch=Rc(t.isMatch,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,r){e(r.primaryKey,r)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each(function(r,s){i.push(s.key)}).then(function(){return i}).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Bd(t,!0)&&t.limit>0)return this._read(r=>{var s=wv(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:r})=>r).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each(function(r,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(t){return t[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var i={};return GM(this._ctx,function(r){var s=r.primaryKey.toString(),o=ys(i,s);return i[s]=!0,!o}),this}modify(e){var t=this._ctx;return this._write(i=>{var r;if("function"==typeof e)r=e;else{var s=ji(e),o=s.length;r=function(m){for(var g=!1,_=0;_<o;++_){var v=s[_],y=e[v];Sa(m,v)!==y&&(uo(m,v,y),g=!0)}return g}}const a=t.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const f=[],p=(m,g)=>{const{failures:_,numFailures:v}=g;h+=m-v;for(let y of ji(_))d.push(_[y])};return this.clone().primaryKeys().then(m=>{const g=_=>{const v=Math.min(u,m.length-_);return a.getMany({trans:i,keys:m.slice(_,_+v),cache:"immutable"}).then(y=>{const b=[],x=[],C=l?[]:null,A=[];for(let T=0;T<v;++T){const B=y[T],H={value:fp(B),primKey:m[_+T]};!1!==r.call(H,H.value,H)&&(null==H.value?A.push(m[_+T]):l||0===Hr(c(B),c(H.value))?(x.push(H.value),l&&C.push(m[_+T])):(A.push(m[_+T]),b.push(H.value)))}const w=Bd(t)&&t.limit===1/0&&("function"!=typeof e||e===jM)&&{index:t.index,range:t.range};return Promise.resolve(b.length>0&&a.mutate({trans:i,type:"add",values:b}).then(T=>{for(let B in T.failures)A.splice(parseInt(B),1);p(b.length,T)})).then(()=>(x.length>0||w&&"object"==typeof e)&&a.mutate({trans:i,type:"put",keys:C,values:x,criteria:w,changeSpec:"function"!=typeof e&&e}).then(T=>p(x.length,T))).then(()=>(A.length>0||w&&e===jM)&&a.mutate({trans:i,type:"delete",keys:A,criteria:w}).then(T=>p(A.length,T))).then(()=>m.length>_+v&&g(_+u))})};return g(0).then(()=>{if(d.length>0)throw new ov("Error modifying one or more objects",d,h,f);return m.length})})})}delete(){var e=this._ctx,t=e.range;return Bd(e)&&(e.isPrimKey&&!See||3===t.type)?this._write(i=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:i,query:{index:r,range:s}}).then(o=>e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(({failures:a,numFailures:u})=>{if(u)throw new ov("Could not delete some values",Object.keys(a).map(d=>a[d]),o-u);return o-u}))}):this.modify(jM)}}const jM=(n,e)=>e.value=null;function Tee(n,e){return n<e?-1:n===e?0:1}function Aee(n,e){return n>e?-1:n===e?0:1}function bs(n,e,t){var i=n instanceof KN?new n.Collection(n):n;return i._ctx.error=t?new t(e):new TypeError(e),i}function Vd(n){return new n.Collection(n,()=>XN("")).limit(0)}function Ree(n,e,t,i,r,s){for(var o=Math.min(n.length,i.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==i[l])return r(n[l],t[l])<0?n.substr(0,l)+t[l]+t.substr(l+1):r(n[l],i[l])<0?n.substr(0,l)+i[l]+t.substr(l+1):a>=0?n.substr(0,a)+e[a]+t.substr(a+1):null;r(n[l],c)<0&&(a=l)}return o<i.length&&"next"===s?n+t.substr(n.length):o<n.length&&"prev"===s?n.substr(0,t.length):a<0?null:n.substr(0,a)+i[a]+t.substr(a+1)}function Cv(n,e,t,i){var r,s,o,a,l,c,u,d=t.length;if(!t.every(m=>"string"==typeof m))return bs(n,"String expected.");function h(m){r="next"===m?v=>v.toUpperCase():v=>v.toLowerCase(),s="next"===m?v=>v.toLowerCase():v=>v.toUpperCase(),o="next"===m?Tee:Aee;var g=t.map(function(_){return{lower:s(_),upper:r(_)}}).sort(function(_,v){return o(_.lower,v.lower)});a=g.map(function(_){return _.upper}),l=g.map(function(_){return _.lower}),c=m,u="next"===m?"":i}h("next");var f=new n.Collection(n,()=>vl(a[0],l[d-1]+i));f._ondirectionchange=function(m){h(m)};var p=0;return f._addAlgorithm(function(m,g,_){var v=m.key;if("string"!=typeof v)return!1;var y=s(v);if(e(y,l,p))return!0;for(var b=null,x=p;x<d;++x){var C=Ree(v,y,a[x],l[x],o,c);null===C&&null===b?p=x+1:(null===b||o(b,C)>0)&&(b=C)}return g(null!==b?function(){m.continue(b+u)}:_),!1}),f}function vl(n,e,t,i){return{type:2,lower:n,upper:e,lowerOpen:t,upperOpen:i}}function XN(n){return{type:1,lower:n,upper:n}}class KN{get Collection(){return this._ctx.table.db.Collection}between(e,t,i,r){i=!1!==i,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(i||r)&&(!i||!r)?Vd(this):new this.Collection(this,()=>vl(e,t,!i,!r))}catch{return bs(this,Ta)}}equals(e){return null==e?bs(this,Ta):new this.Collection(this,()=>XN(e))}above(e){return null==e?bs(this,Ta):new this.Collection(this,()=>vl(e,void 0,!0))}aboveOrEqual(e){return null==e?bs(this,Ta):new this.Collection(this,()=>vl(e,void 0,!1))}below(e){return null==e?bs(this,Ta):new this.Collection(this,()=>vl(void 0,e,!1,!0))}belowOrEqual(e){return null==e?bs(this,Ta):new this.Collection(this,()=>vl(void 0,e))}startsWith(e){return"string"!=typeof e?bs(this,"String expected."):this.between(e,e+Ac,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Cv(this,(t,i)=>0===t.indexOf(i[0]),[e],Ac)}equalsIgnoreCase(e){return Cv(this,(t,i)=>t===i[0],[e],"")}anyOfIgnoreCase(){var e=Ea.apply(Pd,arguments);return 0===e.length?Vd(this):Cv(this,(t,i)=>-1!==i.indexOf(t),e,"")}startsWithAnyOfIgnoreCase(){var e=Ea.apply(Pd,arguments);return 0===e.length?Vd(this):Cv(this,(t,i)=>i.some(r=>0===t.indexOf(r)),e,Ac)}anyOf(){const e=Ea.apply(Pd,arguments);let t=this._cmp;try{e.sort(t)}catch{return bs(this,Ta)}if(0===e.length)return Vd(this);const i=new this.Collection(this,()=>vl(e[0],e[e.length-1]));i._ondirectionchange=s=>{t="next"===s?this._ascending:this._descending,e.sort(t)};let r=0;return i._addAlgorithm((s,o,a)=>{const l=s.key;for(;t(l,e[r])>0;)if(++r,r===e.length)return o(a),!1;return 0===t(l,e[r])||(o(()=>{s.continue(e[r])}),!1)}),i}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ea.apply(Pd,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return bs(this,Ta)}const t=e.reduce((i,r)=>i?i.concat([[i[i.length-1][1],r]]):[[-1/0,r]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const i=this._cmp,r=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===e.length)return Vd(this);if(!e.every(v=>void 0!==v[0]&&void 0!==v[1]&&r(v[0],v[1])<=0))return bs(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ut.InvalidArgument);const l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;let u,d=r;function h(v,y){return d(v[0],y[0])}try{u=e.reduce(function(v,y){let b=0,x=v.length;for(;b<x;++b){const C=v[b];if(i(y[0],C[1])<0&&i(y[1],C[0])>0){C[0]=o(C[0],y[0]),C[1]=a(C[1],y[1]);break}}return b===x&&v.push(y),v},[]),u.sort(h)}catch{return bs(this,Ta)}let f=0;const p=c?v=>r(v,u[f][1])>0:v=>r(v,u[f][1])>=0,m=l?v=>s(v,u[f][0])>0:v=>s(v,u[f][0])>=0;let g=p;const _=new this.Collection(this,()=>vl(u[0][0],u[u.length-1][1],!l,!c));return _._ondirectionchange=v=>{"next"===v?(g=p,d=r):(g=m,d=s),u.sort(h)},_._addAlgorithm((v,y,b)=>{for(var x=v.key;g(x);)if(++f,f===u.length)return y(b),!1;return!((p(C=x)||m(C))&&(0===this._cmp(x,u[f][1])||0===this._cmp(x,u[f][0])||y(()=>{v.continue(d===r?u[f][0]:u[f][1])}),1));var C}),_}startsWithAnyOf(){const e=Ea.apply(Pd,arguments);return e.every(t=>"string"==typeof t)?0===e.length?Vd(this):this.inAnyRange(e.map(t=>[t,t+Ac])):bs(this,"startsWithAnyOf() only works with strings")}}function zo(n){return yi(function(e){return Mp(e),n(e.target.error),!1})}function Mp(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}const yl=xp(null,"storagemutated");class Iee{_lock(){return hp(!It.global),++this._reculock,1!==this._reculock||It.global||(It.lockOwnerFor=this),this}_unlock(){if(hp(!It.global),0==--this._reculock)for(It.global||(It.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Nd(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&It.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,i=this.db._state.dbOpenError;if(hp(!this.idbtrans),!e&&!t)switch(i&&i.name){case"DatabaseClosedError":throw new Ut.DatabaseClosed(i);case"MissingAPIError":throw new Ut.MissingAPI(i.message,i);default:throw new Ut.OpenFailed(i)}if(!this.active)throw new Ut.TransactionInactive;return hp(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=yi(r=>{Mp(r),this._reject(e.error)}),e.onabort=yi(r=>{Mp(r),this.active&&this._reject(new Ut.Abort(e.error)),this.active=!1,this.on("abort").fire(r)}),e.oncomplete=yi(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&yl.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,i){if("readwrite"===e&&"readwrite"!==this.mode)return tr(new Ut.ReadOnly("Transaction is readonly"));if(!this.active)return tr(new Ut.TransactionInactive);if(this._locked())return new mt((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,t,i).then(s,o)},It])});if(i)return gl(()=>{var s=new mt((o,a)=>{this._lock();const l=t(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var r=new mt((s,o)=>{var a=t(s,o,this);a&&a.then&&a.then(s,o)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const i=mt.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>i);else{t._waitingFor=i,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=o)}()}var s=t._waitingFor;return new mt((o,a)=>{i.then(l=>t._waitingQueue.push(yi(o.bind(null,l))),l=>t._waitingQueue.push(yi(a.bind(null,l)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ut.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(ys(t,e))return t[e];const i=this.schema[e];if(!i)throw new Ut.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,i,this);return r.core=this.db.core.table(e),t[e]=r,r}}function $M(n,e,t,i,r,s,o){return{name:n,keyPath:e,unique:t,multi:i,auto:r,compound:s,src:(t&&!o?"&":"")+(i?"*":"")+(r?"++":"")+YN(e)}}function YN(n){return"string"==typeof n?n:n?"["+[].join.call(n,"+")+"]":""}function ZN(n,e,t){return{name:n,primKey:e,indexes:t,mappedClass:null,idxByName:CN(t,i=>[i.name,i])}}let Sp=n=>{try{return n.only([[]]),Sp=()=>[[]],[[]]}catch{return Sp=()=>Ac,Ac}};function qM(n){return null==n?()=>{}:"string"==typeof n?1===(e=n).split(".").length?t=>t[e]:t=>Sa(t,e):e=>Sa(e,n);var e}function QN(n){return[].slice.call(n)}let kee=0;function Ep(n){return null==n?":id":"string"==typeof n?n:`[${n.join("+")}]`}function Pee(n,e,t){function i(l){if(3===l.type)return null;if(4===l.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=l;return void 0===c?void 0===u?null:e.upperBound(u,!!h):void 0===u?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:r,hasGetAll:s}=function(l,c){const u=QN(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:f}=d,p=Mr(h),g={},_={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==h,compound:p,keyPath:h,autoIncrement:f,unique:!0,extractKey:qM(h)},indexes:QN(d.indexNames).map(v=>d.index(v)).map(v=>{const{name:y,unique:b,multiEntry:x,keyPath:C}=v,A={name:y,compound:Mr(C),keyPath:C,unique:b,multiEntry:x,extractKey:qM(C)};return g[Ep(C)]=A,A}),getIndexByKeyPath:v=>g[Ep(v)]};return g[":id"]=_.primaryKey,null!=h&&(g[Ep(h)]=_.primaryKey),_})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(n,t),o=r.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:f,values:p,range:m}){return new Promise((g,_)=>{g=yi(g);const v=d.objectStore(u),y=null==v.keyPath,b="put"===h||"add"===h;if(!b&&"delete"!==h&&"deleteRange"!==h)throw new Error("Invalid operation type: "+h);const{length:x}=f||p||{length:1};if(f&&p&&f.length!==p.length)throw new Error("Given keys array must have same length as given values array.");if(0===x)return g({numFailures:0,failures:{},results:[],lastResult:void 0});let C;const A=[],w=[];let T=0;const B=J=>{++T,Mp(J)};if("deleteRange"===h){if(4===m.type)return g({numFailures:T,failures:w,results:[],lastResult:void 0});A.push(C=3===m.type?v.clear():v.delete(i(m)))}else{const[J,ie]=b?y?[p,f]:[p,null]:[f,null];if(b)for(let z=0;z<x;++z)A.push(C=ie&&void 0!==ie[z]?v[h](J[z],ie[z]):v[h](J[z])),C.onerror=B;else for(let z=0;z<x;++z)A.push(C=v[h](J[z])),C.onerror=B}const H=J=>{const ie=J.target.result;A.forEach((z,te)=>null!=z.error&&(w[te]=z.error)),g({numFailures:T,failures:w,results:"delete"===h?f:A.map(z=>z.result),lastResult:ie})};C.onerror=J=>{B(J),H(J)},C.onsuccess=H})},getMany:({trans:d,keys:h})=>new Promise((f,p)=>{f=yi(f);const m=d.objectStore(u),g=h.length,_=new Array(g);let v,y=0,b=0;const x=A=>{const w=A.target;_[w._pos]=w.result,++b===y&&f(_)},C=zo(p);for(let A=0;A<g;++A)null!=h[A]&&(v=m.get(h[A]),v._pos=A,v.onsuccess=x,v.onerror=C,++y);0===y&&f(_)}),get:({trans:d,key:h})=>new Promise((f,p)=>{f=yi(f);const m=d.objectStore(u).get(h);m.onsuccess=g=>f(g.target.result),m.onerror=zo(p)}),query:(d=s,h=>new Promise((f,p)=>{f=yi(f);const{trans:m,values:g,limit:_,query:v}=h,y=_===1/0?void 0:_,{index:b,range:x}=v,C=m.objectStore(u),A=b.isPrimaryKey?C:C.index(b.name),w=i(x);if(0===_)return f({result:[]});if(d){const T=g?A.getAll(w,y):A.getAllKeys(w,y);T.onsuccess=B=>f({result:B.target.result}),T.onerror=zo(p)}else{let T=0;const B=g||!("openKeyCursor"in A)?A.openCursor(w):A.openKeyCursor(w),H=[];B.onsuccess=J=>{const ie=B.result;return ie?(H.push(g?ie.value:ie.primaryKey),++T===_?f({result:H}):void ie.continue()):f({result:H})},B.onerror=zo(p)}})),openCursor:function({trans:d,values:h,query:f,reverse:p,unique:m}){return new Promise((g,_)=>{g=yi(g);const{index:v,range:y}=f,b=d.objectStore(u),x=v.isPrimaryKey?b:b.index(v.name),C=p?m?"prevunique":"prev":m?"nextunique":"next",A=h||!("openKeyCursor"in x)?x.openCursor(i(y),C):x.openKeyCursor(i(y),C);A.onerror=zo(_),A.onsuccess=yi(w=>{const T=A.result;if(!T)return void g(null);T.___id=++kee,T.done=!1;const B=T.continue.bind(T);let H=T.continuePrimaryKey;H&&(H=H.bind(T));const J=T.advance.bind(T),ie=()=>{throw new Error("Cursor not stopped")};T.trans=d,T.stop=T.continue=T.continuePrimaryKey=T.advance=()=>{throw new Error("Cursor not started")},T.fail=yi(_),T.next=function(){let z=1;return this.start(()=>z--?this.continue():this.stop()).then(()=>this)},T.start=z=>{const te=new Promise((j,q)=>{j=yi(j),A.onerror=zo(q),T.fail=q,T.stop=$=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=ie,j($)}}),V=()=>{if(A.result)try{z()}catch(j){T.fail(j)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return A.onsuccess=yi(j=>{A.onsuccess=V,V()}),T.continue=B,T.continuePrimaryKey=H,T.advance=J,V(),te},g(T)},_)})},count({query:d,trans:h}){const{index:f,range:p}=d;return new Promise((m,g)=>{const _=h.objectStore(u),v=f.isPrimaryKey?_:_.index(f.name),y=i(p),b=y?v.count(y):v.count();b.onsuccess=yi(x=>m(x.target.result)),b.onerror=zo(g)})}};var d}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:n.transaction.bind(n),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Sp(e),schema:r}}function XM({_novip:n},e){const i=function(r,s,{IDBKeyRange:o},l){return{dbcore:(u=Pee(s,o,l),d=r.dbcore,d.reduce((h,{create:f})=>({...h,...f(h)}),u))};var u,d}(n._middlewares,e.db,n._deps,e);n.core=i.dbcore,n.tables.forEach(r=>{const s=r.name;n.core.schema.tables.some(o=>o.name===s)&&(r.core=n.core.table(s),n[s]instanceof n.Table&&(n[s].core=r.core))})}function Mv({_novip:n},e,t,i){t.forEach(r=>{const s=i[r];e.forEach(o=>{const a=wM(o,r);(!a||"value"in a&&void 0===a.value)&&(o===n.Transaction.prototype||o instanceof n.Transaction?Ma(o,r,{get(){return this.table(r)},set(l){bN(this,r,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[r]=new n.Table(r,s))})})}function KM({_novip:n},e){e.forEach(t=>{for(let i in t)t[i]instanceof n.Table&&delete t[i]})}function Oee(n,e){return n._cfg.version-e._cfg.version}function JN(n,e){const t={del:[],add:[],change:[]};let i;for(i in n)e[i]||t.del.push(i);for(i in e){const r=n[i],s=e[i];if(r){const o={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!yv)o.recreate=!0,t.change.push(o);else{const a=r.idxByName,l=s.idxByName;let c;for(c in a)l[c]||o.del.push(c);for(c in l){const u=a[c],d=l[c];u?u.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([i,s])}return t}function YM(n,e,t,i){const r=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return i.forEach(s=>ZM(r,s)),r}function ZM(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function QM(n,e,t){const i={};return sv(e.objectStoreNames,0).forEach(r=>{const s=t.objectStore(r);let o=s.keyPath;const a=$M(YN(o),o||"",!1,!1,!!s.autoIncrement,o&&"string"!=typeof o,!0),l=[];for(let u=0;u<s.indexNames.length;++u){const d=s.index(s.indexNames[u]);o=d.keyPath;var c=$M(d.name,o,!!d.unique,!!d.multiEntry,!1,o&&"string"!=typeof o,!1);l.push(c)}i[r]=ZN(r,a,l)}),i}function JM({_novip:n},e,t){const i=t.db.objectStoreNames;for(let r=0;r<i.length;++r){const s=i[r],o=t.objectStore(s);n._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],c=o.index(l).keyPath,u="string"==typeof c?c:"["+sv(c).join("+")+"]";if(e[s]){const d=e[s].idxByName[u];d&&(d.name=l,delete e[s].idxByName[u],e[s].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&gi.WorkerGlobalScope&&gi instanceof gi.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}class Fee{_parseStoresSpec(e,t){ji(e).forEach(i=>{if(null!==e[i]){var r=e[i].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return $M(l,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Mr(c),0===a)}),s=r.shift();if(s.multi)throw new Ut.Schema("Primary key cannot be multi-valued");r.forEach(o=>{if(o.auto)throw new Ut.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Ut.Schema("Index must have a name and cannot be an empty string")}),t[i]=ZN(i,s,r)}})}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?Vr(this._cfg.storesSource,e):e;const r={};let s={};return t._versions.forEach(o=>{Vr(r,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(r,s)}),t._dbSchema=s,KM(t,[t._allTables,t,t.Transaction.prototype]),Mv(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],ji(s),s),t._storeNames=ji(s),this}upgrade(e){return this._cfg.contentUpgrade=AM(this._cfg.contentUpgrade||si,e),this}}function eS(n,e){let t=n._dbNamesDB;return t||(t=n._dbNamesDB=new Ic("__dbnames",{addons:[],indexedDB:n,IDBKeyRange:e}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function tS(n){return n&&"function"==typeof n.databases}function nS(n){return gl(function(){return It.letThrough=!0,n()})}function Nee(){var n;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var t=function(){return indexedDB.databases().finally(e)};n=setInterval(t,100),t()}).finally(function(){return clearInterval(n)}):Promise.resolve()}function iS(n){var e=s=>n.next(s),t=r(e),i=r(s=>n.throw(s));function r(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&"function"==typeof l.then?l.then(t,i):Mr(l)?Promise.all(l).then(t,i):t(l)}}return r(e)()}function Vee(n,e,t){var i=arguments.length;if(i<2)throw new Ut.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];t=r.pop();var s=SN(r);return[n,s,t]}function e2(n,e,t,i,r){return mt.resolve().then(()=>{const s=It.transless||It,o=n._createTransaction(e,t,n._dbSchema,i),a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),n._state.PR1398_maxLoop=3}catch(d){return d.name===TM.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>e2(n,e,t,null,r))):tr(d)}const l=SM(r);let c;l&&Fd();const u=mt.follow(()=>{if(c=r.call(o,o),c)if(l){var d=Da.bind(null,null);c.then(d,d)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=iS(c))},a);return(c&&"function"==typeof c.then?mt.resolve(c).then(d=>o.active?d:tr(new Ut.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(i&&o._resolve(),o._completion.then(()=>d))).catch(d=>(o._reject(d),tr(d)))})}function Sv(n,e,t){const i=Mr(n)?n.slice():[n];for(let r=0;r<t;++r)i.push(e);return i}const Hee={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return{...n,table(e){const t=n.table(e),{schema:i}=t,r={},s=[];function o(u,d,h){const f=Ep(u),p=r[f]=r[f]||[],m=null==u?0:"string"==typeof u?1:u.length,g=d>0,_={...h,isVirtual:g,keyTail:d,keyLength:m,extractKey:qM(u),unique:!g&&h.unique};return p.push(_),_.isPrimaryKey||s.push(_),m>1&&o(2===m?u[0]:u.slice(0,m-1),d+1,h),p.sort((v,y)=>v.keyTail-y.keyTail),_}const a=o(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[a];for(const u of i.indexes)o(u.keyPath,0,u);function l(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,f=d.keyTail,{type:1===h.type?2:h.type,lower:Sv(h.lower,h.lowerOpen?n.MAX_KEY:n.MIN_KEY,f),lowerOpen:!0,upper:Sv(h.upper,h.upperOpen?n.MIN_KEY:n.MAX_KEY,f),upperOpen:!0})}}:u;var h,f}return{...t,schema:{...i,primaryKey:a,indexes:s,getIndexByKeyPath:function(u){const d=r[Ep(u)];return d&&d[0]}},count:u=>t.count(l(u)),query:u=>t.query(l(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:f}=u.query.index;return h?t.openCursor(l(u)).then(p=>{return p&&(m=p,Object.create(m,{continue:{value:function(_){null!=_?m.continue(Sv(_,u.reverse?n.MAX_KEY:n.MIN_KEY,d)):u.unique?m.continue(m.key.slice(0,f).concat(u.reverse?n.MIN_KEY:n.MAX_KEY,d)):m.continue()}},continuePrimaryKey:{value(_,v){m.continuePrimaryKey(Sv(_,n.MAX_KEY,d),v)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const _=m.key;return 1===f?_[0]:_.slice(0,f)}},value:{get:()=>m.value}}));var m}):t.openCursor(u)}}}}}};function rS(n,e,t,i){return t=t||{},i=i||"",ji(n).forEach(r=>{if(ys(e,r)){var s=n[r],o=e[r];if("object"==typeof s&&"object"==typeof o&&s&&o){const a=CM(s);a!==CM(o)?t[i+r]=e[r]:"Object"===a?rS(s,o,t,i+r+"."):s!==o&&(t[i+r]=e[r])}else s!==o&&(t[i+r]=e[r])}else t[i+r]=void 0}),ji(e).forEach(r=>{ys(n,r)||(t[i+r]=e[r])}),t}const zee={stack:"dbcore",name:"HooksMiddleware",level:2,create:n=>({...n,table(e){const t=n.table(e),{primaryKey:i}=t.schema;return{...t,mutate(s){const o=It.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(s.type){case"add":if(l.fire===si)break;return o._promise("readwrite",()=>u(s),!0);case"put":if(l.fire===si&&c.fire===si)break;return o._promise("readwrite",()=>u(s),!0);case"delete":if(a.fire===si)break;return o._promise("readwrite",()=>u(s),!0);case"deleteRange":if(a.fire===si)break;return o._promise("readwrite",()=>{return d((h=s).trans,h.range,1e4);var h},!0)}return t.mutate(s);function u(h){const f=It.trans,p=h.keys||("delete"===(g=h).type?g.keys:g.keys||g.values.map(i.extractKey));var g;if(!p)throw new Error("Keys missing");return"delete"!==(h="add"===h.type||"put"===h.type?{...h,keys:p}:{...h}).type&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(m,g,_){return"add"===g.type?Promise.resolve([]):m.getMany({trans:g.trans,keys:_,cache:"immutable"})}(t,h,p).then(m=>{const g=p.map((_,v)=>{const y=m[v],b={onerror:null,onsuccess:null};if("delete"===h.type)a.fire.call(b,_,y,f);else if("add"===h.type||void 0===y){const x=l.fire.call(b,_,h.values[v],f);null==_&&null!=x&&(h.keys[v]=_=x,i.outbound||uo(h.values[v],i.keyPath,_))}else{const x=rS(y,h.values[v]),C=c.fire.call(b,x,_,y,f);if(C){const A=h.values[v];Object.keys(C).forEach(w=>{ys(A,w)?A[w]=C[w]:uo(A,w,C[w])})}}return b});return t.mutate(h).then(({failures:_,results:v,numFailures:y,lastResult:b})=>{for(let x=0;x<p.length;++x){const C=v?v[x]:p[x],A=g[x];null==C?A.onerror&&A.onerror(_[x]):A.onsuccess&&A.onsuccess("put"===h.type&&m[x]?h.values[x]:C)}return{failures:_,results:v,numFailures:y,lastResult:b}}).catch(_=>(g.forEach(v=>v.onerror&&v.onerror(_)),Promise.reject(_)))})}function d(h,f,p){return t.query({trans:h,values:!1,query:{index:i,range:f},limit:p}).then(({result:m})=>u({type:"delete",keys:m,trans:h}).then(g=>g.numFailures>0?Promise.reject(g.failures[0]):m.length<p?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...f,lower:m[m.length-1],lowerOpen:!0},p)))}}}}})};function t2(n,e,t){try{if(!e||e.keys.length<n.length)return null;const i=[];for(let r=0,s=0;r<e.keys.length&&s<n.length;++r)0===Hr(e.keys[r],n[s])&&(i.push(t?fp(e.values[r]):e.values[r]),++s);return i.length===n.length?i:null}catch{return null}}const Uee={stack:"dbcore",level:-1,create:n=>({table:e=>{const t=n.table(e);return{...t,getMany:i=>{if(!i.cache)return t.getMany(i);const r=t2(i.keys,i.trans._cache,"clone"===i.cache);return r?mt.resolve(r):t.getMany(i).then(s=>(i.trans._cache={keys:i.keys,values:"clone"===i.cache?fp(s):s},s))},mutate:i=>("add"!==i.type&&(i.trans._cache=null),t.mutate(i))}}})};function sS(n){return!("from"in n)}const Aa=function(n,e){if(!this){const t=new Aa;return n&&"d"in n&&Vr(t,n),t}Vr(this,arguments.length?{d:1,from:n,to:arguments.length>1?e:n}:{d:0})};function Dp(n,e,t){const i=Hr(e,t);if(isNaN(i))return;if(i>0)throw RangeError();if(sS(n))return Vr(n,{from:e,to:t,d:1});const r=n.l,s=n.r;if(Hr(t,n.from)<0)return r?Dp(r,e,t):n.l={from:e,to:t,d:1,l:null,r:null},n2(n);if(Hr(e,n.to)>0)return s?Dp(s,e,t):n.r={from:e,to:t,d:1,l:null,r:null},n2(n);Hr(e,n.from)<0&&(n.from=e,n.l=null,n.d=s?s.d+1:1),Hr(t,n.to)>0&&(n.to=t,n.r=null,n.d=n.l?n.l.d+1:1);const o=!n.r;r&&!n.l&&Ev(n,r),s&&o&&Ev(n,s)}function Ev(n,e){sS(e)||function t(i,{from:r,to:s,l:o,r:a}){Dp(i,r,s),o&&t(i,o),a&&t(i,a)}(n,e)}function oS(n){let e=sS(n)?null:{s:0,n};return{next(t){const i=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,i)for(;e.n.l&&Hr(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!i||Hr(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function n2(n){var e,t;const i=((null===(e=n.r)||void 0===e?void 0:e.d)||0)-((null===(t=n.l)||void 0===t?void 0:t.d)||0),r=i>1?"r":i<-1?"l":"";if(r){const s="r"===r?"l":"r",o={...n},a=n[r];n.from=a.from,n.to=a.to,n[r]=a[r],o[r]=a[s],n[s]=o,o.d=r2(o)}n.d=r2(n)}function r2({r:n,l:e}){return(n?e?Math.max(n.d,e.d):n.d:e?e.d:0)+1}Id(Aa.prototype,{add(n){return Ev(this,n),this},addKey(n){return Dp(this,n,n),this},addKeys(n){return n.forEach(e=>Dp(this,e,e)),this},[MM](){return oS(this)}});const Wee={stack:"dbcore",level:0,create:n=>{const e=n.schema.name,t=new Aa(n.MIN_KEY,n.MAX_KEY);return{...n,table:i=>{const r=n.table(i),{schema:s}=r,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,c={...r,mutate:h=>{const f=h.trans,p=f.mutatedParts||(f.mutatedParts={}),m=C=>{const A=`idb://${e}/${i}/${C}`;return p[A]||(p[A]=new Aa)},g=m(""),_=m(":dels"),{type:v}=h;let[y,b]="deleteRange"===h.type?[h.range]:"delete"===h.type?[h.keys]:h.values.length<50?[[],h.values]:[];const x=h.trans._cache;return r.mutate(h).then(C=>{if(Mr(y)){"delete"!==v&&(y=C.results),g.addKeys(y);const A=t2(y,x);A||"add"===v||_.addKeys(y),(A||b)&&(w=m,B=A,H=b,s.indexes.forEach(function J(ie){const z=w(ie.name||"");function te(j){return null!=j?ie.extractKey(j):null}const V=j=>ie.multiEntry&&Mr(j)?j.forEach(q=>z.addKey(q)):z.addKey(j);(B||H).forEach((j,q)=>{const $=B&&te(B[q]),ee=H&&te(H[q]);0!==Hr($,ee)&&(null!=$&&V($),null!=ee&&V(ee))})}))}else if(y){const A={from:y.lower,to:y.upper};_.add(A),g.add(A)}else g.add(t),_.add(t),s.indexes.forEach(A=>m(A.name).add(t));var w,B,H;return C})}},u=({query:{index:h,range:f}})=>{var p,m;return[h,new Aa(null!==(p=f.lower)&&void 0!==p?p:n.MIN_KEY,null!==(m=f.upper)&&void 0!==m?m:n.MAX_KEY)]},d={get:h=>[o,new Aa(h.key)],getMany:h=>[o,(new Aa).addKeys(h.keys)],count:u,query:u,openCursor:u};return ji(d).forEach(h=>{c[h]=function(f){const{subscr:p}=It;if(p){const m=b=>{const x=`idb://${e}/${i}/${b}`;return p[x]||(p[x]=new Aa)},g=m(""),_=m(":dels"),[v,y]=d[h](f);if(m(v.name||"").add(y),!v.isPrimaryKey){if("count"!==h){const b="query"===h&&l&&f.values&&r.query({...f,values:!1});return r[h].apply(this,arguments).then(x=>{if("query"===h){if(l&&f.values)return b.then(({result:A})=>(g.addKeys(A),x));const C=f.values?x.result.map(a):x.result;f.values?g.addKeys(C):_.addKeys(C)}else if("openCursor"===h){const C=x,A=f.values;return C&&Object.create(C,{key:{get:()=>(_.addKey(C.primaryKey),C.key)},primaryKey:{get(){const w=C.primaryKey;return _.addKey(w),w}},value:{get:()=>(A&&g.addKey(C.primaryKey),C.value)}})}return x})}_.add(t)}}return r[h].apply(this,arguments)}}),c}}}};class Ic{constructor(e,t){this._middlewares={},this.verno=0;const i=Ic.dependencies;this._options=t={addons:Ic.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:si,dbReadyPromise:null,cancelOpen:si,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o,a;s.dbReadyPromise=new mt(a=>{s.dbReadyResolve=a}),s.openCanceller=new mt((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=xp(this,"populate","blocked","versionchange","close",{ready:[AM,si]}),this.on.ready.subscribe=wN(this.on.ready.subscribe,a=>(l,c)=>{Ic.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||mt.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);const d=this;c||a(function h(){d.on.ready.unsubscribe(l),d.on.ready.unsubscribe(h)})}})}),this.Collection=(o=this,Cp(Dee.prototype,function(a,l){this.db=o;let c=GN,u=null;if(l)try{c=l()}catch(p){u=p}const d=a._ctx,h=d.table,f=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:f!==mp?f:null}})),this.Table=(a=this,Cp(Eee.prototype,function(l,c,u){this.db=a,this._tx=u,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:xp(null,{creating:[pee,si],reading:[fee,mp],updating:[gee,si],deleting:[mee,si]})})),this.Transaction=function(a){return Cp(Iee.prototype,function(l,c,u,d,h){this.db=a,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=xp(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new mt((f,p)=>{this._resolve=f,this._reject=p}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},f=>{var p=this.active;return this.active=!1,this.on.error.fire(f),this.parent?this.parent._reject(f):p&&this.idbtrans&&this.idbtrans.abort(),tr(f)})})}(this),this.Version=function(a){return Cp(Fee.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Cp(KN.prototype,function(l,c,u){this.db=a,this._ctx={table:l,index:":id"===c?null:c,or:u};const d=a._deps.indexedDB;if(!d)throw new Ut.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,f)=>d.cmp(f,h),this._max=(h,f)=>d.cmp(h,f)>0?h:f,this._min=(h,f)=>d.cmp(h,f)<0?h:f,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Sp(t.IDBKeyRange),this._createTransaction=(a,l,c,u)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=a=>{this.on("blocked").fire(a),wp.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Hee),this.use(zee),this.use(Wee),this.use(Uee),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new Ut.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Ut.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var i=t.filter(r=>r._cfg.version===e)[0];return i||(i=new this.Version(e),t.push(i),t.sort(Oee),i.stores({}),this._state.autoSchema=!1,i)}_whenReady(e){return this.idbdb&&(this._state.openComplete||It.letThrough||this._vip)?e():new mt((t,i)=>{if(this._state.openComplete)return i(new Ut.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void i(new Ut.DatabaseClosed);this.open().catch(si)}this._state.dbReadyPromise.then(t,i)}).then(e)}use({stack:e,create:t,level:i,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:i??10,name:r}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:t,create:i}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(r=>i?r.create!==i:!!t&&r.name!==t)),this}open(){return function Bee(n){const e=n._state,{indexedDB:t}=n._deps;if(e.isBeingOpened||n.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?tr(e.dbOpenError):n);Ho&&(e.openCanceller._stackHolder=Sc()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const i=e.openCanceller;function r(){if(e.openCanceller!==i)throw new Ut.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return mt.race([i,(typeof navigator>"u"?mt.resolve():Nee()).then(()=>new mt((l,c)=>{if(r(),!t)throw new Ut.MissingAPI;const u=n.name,d=e.autoSchema?t.open(u):t.open(u,Math.round(10*n.verno));if(!d)throw new Ut.MissingAPI;d.onerror=zo(c),d.onblocked=yi(n._fireOnBlocked),d.onupgradeneeded=yi(h=>{if(o=d.transaction,e.autoSchema&&!n._options.allowEmptyDB){d.onerror=Mp,o.abort(),d.result.close();const p=t.deleteDatabase(u);p.onsuccess=p.onerror=yi(()=>{c(new Ut.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{o.onerror=zo(c);var f=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;a=f<1,n._novip.idbdb=d.result,function Lee(n,e,t,i){const r=n._dbSchema,s=n._createTransaction("readwrite",n._storeNames,r);s.create(t),s._completion.catch(i);const o=s._reject.bind(s),a=It.transless||It;gl(()=>{It.trans=s,It.transless=a,0===e?(ji(r).forEach(l=>{YM(t,l,r[l].primKey,r[l].indexes)}),XM(n,t),mt.follow(()=>n.on.populate.fire(s)).catch(o)):function({_novip:l},c,u,d){const h=[],f=l._versions;let p=l._dbSchema=QM(0,l.idbdb,d),m=!1;return f.filter(_=>_._cfg.version>=c).forEach(_=>{h.push(()=>{const v=p,y=_._cfg.dbschema;JM(l,v,d),JM(l,y,d),p=l._dbSchema=y;const b=JN(v,y);b.add.forEach(C=>{YM(d,C[0],C[1].primKey,C[1].indexes)}),b.change.forEach(C=>{if(C.recreate)throw new Ut.Upgrade("Not yet support for changing primary key");{const A=d.objectStore(C.name);C.add.forEach(w=>ZM(A,w)),C.change.forEach(w=>{A.deleteIndex(w.name),ZM(A,w)}),C.del.forEach(w=>A.deleteIndex(w))}});const x=_._cfg.contentUpgrade;if(x&&_._cfg.version>c){XM(l,d),u._memoizedTables={},m=!0;let C=MN(y);b.del.forEach(B=>{C[B]=v[B]}),KM(l,[l.Transaction.prototype]),Mv(l,[l.Transaction.prototype],ji(C),C),u.schema=C;const A=SM(x);let w;A&&Fd();const T=mt.follow(()=>{if(w=x(u),w&&A){var B=Da.bind(null,null);w.then(B,B)}});return w&&"function"==typeof w.then?mt.resolve(w):T.then(()=>w)}}),h.push(v=>{var y,b;(!m||!Mee)&&(y=_._cfg.dbschema,[].slice.call((b=v).db.objectStoreNames).forEach(x=>null==y[x]&&b.db.deleteObjectStore(x))),KM(l,[l.Transaction.prototype]),Mv(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),function g(){return h.length?mt.resolve(h.shift()(u.idbtrans)).then(g):mt.resolve()}().then(()=>{var _,v;v=d,ji(_=p).forEach(y=>{v.db.objectStoreNames.contains(y)||YM(v,y,_[y].primKey,_[y].indexes)})})}(n,e,s,t).catch(o)})}(n,f/10,o,c)}},c),d.onsuccess=yi(()=>{o=null;const h=n._novip.idbdb=d.result,f=sv(h.objectStoreNames);if(f.length>0)try{const m=h.transaction(1===(p=f).length?p[0]:p,"readonly");e.autoSchema?function({_novip:g},_,v){g.verno=_.version/10;const y=g._dbSchema=QM(0,_,v);g._storeNames=sv(_.objectStoreNames,0),Mv(g,[g._allTables],ji(y),y)}(n,h,m):(JM(n,n._dbSchema,m),function(g,_){const v=JN(QM(0,g.idbdb,_),g._dbSchema);return!(v.add.length||v.change.some(y=>y.add.length||y.change.length))}(n,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),XM(n,m)}catch{}var p;wp.push(n),h.onversionchange=yi(m=>{e.vcFired=!0,n.on("versionchange").fire(m)}),h.onclose=yi(m=>{n.on("close").fire(m)}),a&&function({indexedDB:m,IDBKeyRange:g},_){!tS(m)&&"__dbnames"!==_&&eS(m,g).put({name:_}).catch(si)}(n._deps,u),l()},c)}))]).then(()=>(r(),e.onReadyBeingFired=[],mt.resolve(nS(()=>n.on.ready.fire(n.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(AM,si);return e.onReadyBeingFired=[],mt.resolve(nS(()=>c(n.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>n).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return i===e.openCanceller&&n._close(),tr(l)}).finally(()=>{e.openComplete=!0,s()})}(this)}_close(){const e=this._state,t=wp.indexOf(this);if(t>=0&&wp.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new mt(i=>{e.dbReadyResolve=i}),e.openCanceller=new mt((i,r)=>{e.cancelOpen=r})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Ut.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new mt((i,r)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=yi(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!tS(a)&&"__dbnames"!==c&&eS(a,l).delete(c).catch(si)})(this._deps,this.name),i()}),o.onerror=zo(r),o.onblocked=this._fireOnBlocked};if(e)throw new Ut.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ji(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Vee.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,i){let r=It.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const s=-1!==e.indexOf("?");let o,a;e=e.replace("!","").replace("?","");try{if(a=t.map(c=>{var u=c instanceof this.Table?c.name:c;if("string"!=typeof u)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new Ut.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(r){if("readonly"===r.mode&&"readwrite"===o){if(!s)throw new Ut.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach(c=>{if(r&&-1===r.storeNames.indexOf(c)){if(!s)throw new Ut.SubTransaction("Table "+c+" not included in parent transaction.");r=null}}),s&&r&&!r.active&&(r=null)}}catch(c){return r?r._promise(null,(u,d)=>{d(c)}):tr(c)}const l=e2.bind(null,this,o,a,r,i);return r?r._promise(o,l,"lock"):It.trans?Nd(It.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!ys(this._allTables,e))throw new Ut.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const jee=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class $ee{constructor(e){this._subscribe=e}subscribe(e,t,i){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:i})}[jee](){return this}}function s2(n,e){return ji(e).forEach(t=>{Ev(n[t]||(n[t]=new Aa),e[t])}),n}let aS;try{aS={indexedDB:gi.indexedDB||gi.mozIndexedDB||gi.webkitIndexedDB||gi.msIndexedDB,IDBKeyRange:gi.IDBKeyRange||gi.webkitIDBKeyRange}}catch{aS={indexedDB:null,IDBKeyRange:null}}const kc=Ic;function Dv(n){let e=Ra;try{Ra=!0,yl.storagemutated.fire(n)}finally{Ra=e}}Id(kc,{...av,delete:n=>new kc(n,{addons:[]}).delete(),exists:n=>new kc(n,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(n){try{return function({indexedDB:e,IDBKeyRange:t}){return tS(e)?Promise.resolve(e.databases()).then(i=>i.map(r=>r.name).filter(r=>"__dbnames"!==r)):eS(e,t).toCollection().primaryKeys()}(kc.dependencies).then(n)}catch{return tr(new Ut.MissingAPI)}},defineClass:()=>function(n){Vr(this,n)},ignoreTransaction:n=>It.trans?Nd(It.transless,n):n(),vip:nS,async:function(n){return function(){try{var e=iS(n.apply(this,arguments));return e&&"function"==typeof e.then?e:mt.resolve(e)}catch(t){return tr(t)}}},spawn:function(n,e,t){try{var i=iS(n.apply(t,e||[]));return i&&"function"==typeof i.then?i:mt.resolve(i)}catch(r){return tr(r)}},currentTransaction:{get:()=>It.trans||null},waitFor:function(n,e){const t=mt.resolve("function"==typeof n?kc.ignoreTransaction(n):n).timeout(e||6e4);return It.trans?It.trans.waitFor(t):t},Promise:mt,debug:{get:()=>Ho,set:n=>{DN(n,"dexie"===n?()=>!0:UN)}},derive:kd,extend:Vr,props:Id,override:wN,Events:xp,on:yl,liveQuery:function qee(n){return new $ee(e=>{const t=SM(n);let i=!1,r={},s={};const o={get closed(){return i},unsubscribe:()=>{i=!0,yl.storagemutated.unsubscribe(u)}};e.start&&e.start(o);let a=!1,l=!1;function c(){return ji(s).some(h=>r[h]&&function Gee(n,e){const t=oS(e);let i=t.next();if(i.done)return!1;let r=i.value;const s=oS(n);let o=s.next(r.from),a=o.value;for(;!i.done&&!o.done;){if(Hr(a.from,r.to)<=0&&Hr(a.to,r.from)>=0)return!0;Hr(r.from,a.from)<0?r=(i=t.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}(r[h],s[h]))}const u=h=>{s2(r,h),c()&&d()},d=()=>{if(a||i)return;r={};const h={},f=function(p){t&&Fd();const m=()=>gl(n,{subscr:p,trans:null}),g=It.trans?Nd(It.transless,m):m();return t&&g.then(Da,Da),g}(h);l||(yl("storagemutated",u),l=!0),a=!0,Promise.resolve(f).then(p=>{a=!1,i||(c()?d():(r={},s=h,e.next&&e.next(p)))},p=>{a=!1,e.error&&e.error(p),o.unsubscribe()})};return d(),o})},extendObservabilitySet:s2,getByKeyPath:Sa,setByKeyPath:uo,delByKeyPath:function(n,e){"string"==typeof e?uo(n,e,void 0):"length"in e&&[].map.call(e,function(t){uo(n,t,void 0)})},shallowClone:MN,deepClone:fp,getObjectDiff:rS,cmp:Hr,asap:xN,minKey:-1/0,addons:[],connections:wp,errnames:TM,dependencies:aS,semVer:"3.2.2",version:"3.2.2".split(".").map(n=>parseInt(n)).reduce((n,e,t)=>n+e/Math.pow(10,2*t))}),kc.maxKey=Sp(kc.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(yl("storagemutated",n=>{if(!Ra){let e;yv?(e=document.createEvent("CustomEvent"),e.initCustomEvent("x-storagemutated-1",!0,!0,n)):e=new CustomEvent("x-storagemutated-1",{detail:n}),Ra=!0,dispatchEvent(e),Ra=!1}}),addEventListener("x-storagemutated-1",({detail:n})=>{Ra||Dv(n)}));let Ra=!1;if(typeof BroadcastChannel<"u"){const n=new BroadcastChannel("x-storagemutated-1");yl("storagemutated",e=>{Ra||n.postMessage(e)}),n.onmessage=e=>{e.data&&Dv(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){yl("storagemutated",e=>{try{Ra||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:"x-storagemutated-1",changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if("x-storagemutated-1"===e.key){const t=JSON.parse(e.newValue);t&&Dv(t.changedParts)}});const n=self.document&&navigator.serviceWorker;n&&n.addEventListener("message",function({data:e}){e&&"x-storagemutated-1"===e.type&&Dv(e.changedParts)})}mt.rejectionMapper=function(n,e){if(!n||n instanceof Od||n instanceof TypeError||n instanceof SyntaxError||!n.name||!IN[n.name])return n;var t=new IN[n.name](e||n.message,n);return"stack"in n&&Ma(t,"stack",{get:function(){return this.inner.stack}}),t},DN(Ho,UN);var kt=(()=>{return(n=kt||(kt={}))[n.UNSET=-99999]="UNSET",n[n.MULTIPLE_VALUES=-99998]="MULTIPLE_VALUES",kt;var n})();class ts{constructor(e=null){null===e?(this.brightness=kt.UNSET,this.color=kt.UNSET,this.pan=kt.UNSET,this.tilt=kt.UNSET):(this.brightness=e.brightness,this.color=e.color,this.pan=e.pan,this.tilt=e.tilt)}static combine(e,t){let i=new ts;return i.brightness=t.brightness===kt.UNSET?e.brightness:t.brightness,i.color=t.color===kt.UNSET?e.color:t.color,i.pan=t.pan===kt.UNSET?e.pan:t.pan,i.tilt=t.tilt===kt.UNSET?e.tilt:t.tilt,i}static interpolate(e,t,i){if(i>=1)return t;if(i<=0)return e;let r=new ts;return r.brightness=e.brightness!==kt.UNSET&&t.brightness!==kt.UNSET?e.brightness+(t.brightness-e.brightness)*i:e.brightness===kt.UNSET?t.brightness:e.brightness,r.color=e.color!==kt.UNSET&&t.color!==kt.UNSET?(e.color>>16)+((t.color>>16)-(e.color>>16))*i<<16|(e.color>>8&255)+((t.color>>8&255)-(e.color>>8&255))*i<<8|(255&e.color)+((255&t.color)-(255&e.color))*i:e.color===kt.UNSET?t.color:e.color,r.pan=e.pan!==kt.UNSET&&t.pan!==kt.UNSET?e.pan+(t.pan-e.pan)*i:e.pan===kt.UNSET?t.pan:e.pan,r.tilt=e.tilt!==kt.UNSET&&t.tilt!==kt.UNSET?e.tilt+(t.tilt-e.tilt)*i:e.tilt===kt.UNSET?t.tilt:e.tilt,r}}class Ia{constructor(e=null){this.internal=new Map,null!==e&&e.channels.forEach((t,i)=>{this.internal.set(t,e.values[i])})}get(e){return this.internal.get(e)}set(e,t){this.internal.set(e,t)}delete(e){return this.internal.delete(e)}usedChannels(){return Array.from(this.internal.keys())}serialize(){let e=Array.from(this.internal.keys()),t=e.map(i=>this.internal.get(i));return{channels:e,values:t}}static combine(e,t){let i=new Ia;return e.internal.forEach((r,s)=>{let o=t.internal.get(s);i.internal.set(s,o?ts.combine(r,o):r)}),t.internal.forEach((r,s)=>{e.internal.has(s)||i.internal.set(s,r)}),i}}const Uo=new class Yee extends Ic{constructor(){super("AppDB"),this.version(1).stores({shows:"++id,name",cues:"++id,showId,time,fade,title",lightValues:"++id,cueId,channel,brightness,color,pan,tilt"})}newShow(e,t){var i=this;return Pi(function*(){return yield i.shows.add({name:e,song:t,modifyDate:Date.now()})})()}updateShow(e,t){var i=this;return Pi(function*(){i.shows.update(e,{name:t,modifyDate:Date.now()})})()}listShows(){var e=this;return Pi(function*(){return yield e.shows.toArray()})()}deleteShow(e){var t=this;return Pi(function*(){yield t.shows.delete(e);let i=t.cues.where("showId").equals(e);yield t.lightValues.where("cueId").anyOf(yield i.primaryKeys()).delete(),yield i.delete()})()}blobToBase64(e){return Pi(function*(){return new Promise((t,i)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=s=>{i(s)},r.readAsDataURL(e)})})()}base64ToBlob(e){return Pi(function*(){return(yield fetch(e)).blob()})()}exportShow(e){var t=this;return Pi(function*(){let i=yield t.shows.get(e),r=yield t.cues.where("showId").equals(e),s=yield t.lightValues.where("cueId").anyOf(yield r.primaryKeys());if(!i||!r||!s)return null;const o=yield t.blobToBase64(i.song);return{show:{name:i.name,song:o},cues:yield r.toArray(),lightValues:yield s.toArray()}})()}importShow(e){var t=this;return Pi(function*(){let i=yield t.base64ToBlob(e.show.song),r=yield t.shows.add({name:e.show.name,song:i,modifyDate:Date.now()}),s=e.cues.map(c=>c.id),o=yield t.cues.bulkAdd(e.cues.map(c=>(delete c.id,c.showId=r,c)),{allKeys:!0}),a=new Map(s.map((c,u)=>[c,o[u]])),l=e.lightValues.map(c=>{const u=a.get(c.cueId);return u?(c.cueId=u,delete c.id,c):(console.error("Could not find cueId",c.cueId),null)});return yield t.lightValues.bulkAdd(l.filter(c=>null!==c)),r})()}loadShow(e){var t=this;return Pi(function*(){let i=yield t.shows.get(e),r=t.cues.where("showId").equals(e),s=yield t.lightValues.where("cueId").anyOf(yield r.primaryKeys()).toArray(),o=yield r.toArray(),a=[];return o.forEach(l=>{let c=((n,e)=>{if(!n.id)return null;let t=e.map(r=>r.channel),i=e.map(r=>new ts({brightness:r.brightness,color:r.color,pan:r.pan,tilt:r.tilt}));return{id:n.id,time:n.time,fade:n.fade,title:n.title,lightValues:new Ia({channels:t,values:i})}})(l,s.filter(u=>u.cueId===l.id));null!==c&&a.push(c)}),i&&a&&s&&i.id?{id:i.id,name:i.name,song:i.song,modifyDate:new Date(i.modifyDate),cues:a}:null})()}saveShow(e){var t=this;return Pi(function*(){let i=yield t.cues.where("showId").equals(e.id).delete();const s=(yield Promise.all([t.lightValues.where("cueId").anyOf(yield i).delete(),t.shows.put({id:e.id,name:e.name,song:e.song,modifyDate:Date.now()}),t.cues.bulkAdd(e.cues.map(o=>({showId:e.id,time:o.time,fade:o.fade,title:o.title})),{allKeys:!0})]))[2];yield t.lightValues.bulkAdd(e.cues.flatMap((o,a)=>((n,e)=>e.usedChannels().map(i=>{let r=e.get(i);return r?{cueId:n,channel:i,brightness:r.brightness,color:r.color,pan:r.pan,tilt:r.tilt}:null}).filter(i=>null!==i))(s[a],o.lightValues)))})()}showList(){var e=this;return Pi(function*(){return yield e.shows.toArray()})()}};function lS(n){return n&&"function"==typeof n.connect}class o2{applyChanges(e,t,i,r,s){e.forEachOperation((o,a,l)=>{let c,u;if(null==o.previousIndex){const d=i(o,a,l);c=t.createEmbeddedView(d.templateRef,d.context,d.index),u=1}else null==l?(t.remove(a),u=3):(c=t.get(a),t.move(c,l),u=2);s&&s({context:c?.context,operation:u,record:o})})}detach(){}}const Tp=new Ie("_ViewRepeater"),Qee=[[["caption"]],[["colgroup"],["col"]]],Jee=["caption","colgroup, col"];function cS(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Gn(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Hd=new Ie("CDK_TABLE");let zd=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(R(Vi))},n.\u0275dir=Ae({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Ud=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(R(Vi))},n.\u0275dir=Ae({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Tv=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(R(Vi))},n.\u0275dir=Ae({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class ite{}const rte=cS(ite);let ka=(()=>{class n extends rte{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Gn(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(R(Hd,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(Pn(r,zd,5),Pn(r,Ud,5),Pn(r,Tv,5)),2&t){let s;dt(s=ht())&&(i.cell=s.first),dt(s=ht())&&(i.headerCell=s.first),dt(s=ht())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[Lt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),nt]}),n})();class uS{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let dS=(()=>{class n extends uS{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(R(ka),R(Et))},n.\u0275dir=Ae({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[nt]}),n})(),hS=(()=>{class n extends uS{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(R(ka),R(Et))},n.\u0275dir=Ae({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[nt]}),n})();class u2{constructor(){this.tasks=[],this.endTasks=[]}}const fS=new Ie("_COALESCED_STYLE_SCHEDULER");let d2=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new he}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new u2,this._getScheduleObservable().pipe(Cn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new u2;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Ai(Promise.resolve(void 0)):this._ngZone.onStable.pipe(ti(1))}}return n.\u0275fac=function(t){return new(t||n)(Y(St))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})(),pS=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Ap?t.headerCell.template:this instanceof Rp?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(R(Vi),R(da))},n.\u0275dir=Ae({type:n,features:[Ri]}),n})();class ste extends pS{}const ote=cS(ste);let Ap=(()=>{class n extends ote{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(R(Vi),R(da),R(Hd,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[nt,Ri]}),n})();class ate extends pS{}const lte=cS(ate);let Rp=(()=>{class n extends lte{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(R(Vi),R(da),R(Hd,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[nt,Ri]}),n})(),Av=(()=>{class n extends pS{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(R(Vi),R(da),R(Hd,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[nt]}),n})(),Pa=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(R(Ji))},n.\u0275dir=Ae({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),mS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&Ao(0,0)},dependencies:[Pa],encapsulation:2}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&Ao(0,0)},dependencies:[Pa],encapsulation:2}),n})(),Rv=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(R(Vi))},n.\u0275dir=Ae({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const h2=["top","bottom","left","right"];class cte{constructor(e,t,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(h=>h)&&!i.some(h=>h))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,r),l=this._getStickyStartColumnPositions(a,t),c=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),d=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const h="rtl"===this.direction,f=h?"right":"left",p=h?"left":"right";for(const m of e)for(let g=0;g<o;g++){const _=m.children[g];t[g]&&this._addStickyStyle(_,f,l[g],g===u),i[g]&&this._addStickyStyle(_,p,c[g],g===d)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((m,g)=>t[g]?m:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===d?[]:a.slice(d).map((m,g)=>i[g+d]?m:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],a=[],l=[];for(let u=0,d=0;u<r.length;u++){if(!s[u])continue;o[u]=d;const h=r[u];l[u]=this._isNativeHtmlTable?Array.from(h.children):[h];const f=h.getBoundingClientRect().height;d+=f,a[u]=f}const c=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<r.length;u++){if(!s[u])continue;const d=o[u],h=u===c;for(const f of l[u])this._addStickyStyle(f,i,d,h)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:l})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);h2.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of h2)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const vS=new Ie("CDK_SPL");let Iv=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Et))},n.\u0275dir=Ae({type:n,selectors:[["","rowOutlet",""]]}),n})(),kv=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Et))},n.\u0275dir=Ae({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),Pv=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Et))},n.\u0275dir=Ae({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Ov=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(Et))},n.\u0275dir=Ae({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Lv=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h,f){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=l,this._viewRepeater=c,this._coalescedStyleScheduler=u,this._viewportRuler=d,this._stickyPositioningListener=h,this._ngZone=f,this._onDestroy=new he,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new wt,this.viewChange=new _s({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Gn(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Gn(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Cn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),lS(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&St.isInAngularZone()?this._ngZone.onStable.pipe(ti(1),Cn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let l=o[a];const c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),t.push(l)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const l=a.shift();return l.dataIndex=i,l}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Fv(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Fv(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Fv(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Fv(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],lS(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;lS(this.dataSource)?t=this.dataSource.connect(this):function Zee(n){return!!n&&(n instanceof D||Qt(n.lift)&&Qt(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=pt(this.dataSource)),this._renderChangeSubscription=t.pipe(Cn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Pa.mostRecentCellOutlet&&Pa.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new cte(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:pt()).pipe(Cn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(R(da),R(Hi),R(Et),Za("role"),R(vs,8),R(Kt),R(Gi),R(Tp),R(fS),R(xc),R(vS,12),R(St,8))},n.\u0275cmp=Wt({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(Pn(r,Rv,5),Pn(r,ka,5),Pn(r,Av,5),Pn(r,Ap,5),Pn(r,Rp,5)),2&t){let s;dt(s=ht())&&(i._noDataRow=s.first),dt(s=ht())&&(i._contentColumnDefs=s),dt(s=ht())&&(i._contentRowDefs=s),dt(s=ht())&&(i._contentHeaderRowDefs=s),dt(s=ht())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(kn(Iv,7),kn(kv,7),kn(Pv,7),kn(Ov,7)),2&t){let r;dt(r=ht())&&(i._rowOutlet=r.first),dt(r=ht())&&(i._headerRowOutlet=r.first),dt(r=ht())&&(i._footerRowOutlet=r.first),dt(r=ht())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&In("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Lt([{provide:Hd,useExisting:n},{provide:Tp,useClass:o2},{provide:fS,useClass:d2},{provide:vS,useValue:null}])],ngContentSelectors:Jee,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(lr(Qee),Nn(0),Nn(1,1),Ao(2,0)(3,1)(4,2)(5,3))},dependencies:[Iv,kv,Pv,Ov],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function Fv(n,e){return n.concat(Array.from(e))}let dte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[sM]}),n})();const hte=[[["caption"]],[["colgroup"],["col"]]],fte=["caption","colgroup, col"];let Nv=(()=>{class n extends Lv{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275cmp=Wt({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&In("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[Lt([{provide:Tp,useClass:o2},{provide:Lv,useExisting:n},{provide:Hd,useExisting:n},{provide:fS,useClass:d2},{provide:vS,useValue:null}]),nt],ngContentSelectors:fte,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(lr(hte),Nn(0),Nn(1,1),Ao(2,0)(3,1)(4,2)(5,3))},dependencies:[Iv,kv,Pv,Ov],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),Bv=(()=>{class n extends zd{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matCellDef",""]],features:[Lt([{provide:zd,useExisting:n}]),nt]}),n})(),Vv=(()=>{class n extends Ud{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matHeaderCellDef",""]],features:[Lt([{provide:Ud,useExisting:n}]),nt]}),n})(),Hv=(()=>{class n extends ka{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[Lt([{provide:ka,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),nt]}),n})(),zv=(()=>{class n extends dS{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[nt]}),n})(),Uv=(()=>{class n extends hS{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[nt]}),n})(),yS=(()=>{class n extends Ap{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[Lt([{provide:Ap,useExisting:n}]),nt]}),n})(),bS=(()=>{class n extends Av{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[Lt([{provide:Av,useExisting:n}]),nt]}),n})(),wS=(()=>{class n extends mS{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275cmp=Wt({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[Lt([{provide:mS,useExisting:n}]),nt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&Ao(0,0)},dependencies:[Pa],encapsulation:2}),n})(),xS=(()=>{class n extends _S{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275cmp=Wt({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[Lt([{provide:_S,useExisting:n}]),nt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&Ao(0,0)},dependencies:[Pa],encapsulation:2}),n})(),Cte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[dte,Wn,Wn]}),n})();function Ste(n,e){1&n&&(se(0,"mat-header-cell",15),Ot(1," Name "),fe())}function Ete(n,e){if(1&n){const t=ar();se(0,"mat-cell",15)(1,"input",16),st("ngModelChange",function(r){return di(ui(t).$implicit.name=r)})("change",function(){const s=ui(t).$implicit;return di(un().updateShow(s))}),fe()()}if(2&n){const t=e.$implicit;Ue(1),Le("ngModel",t.name)}}function Dte(n,e){1&n&&(se(0,"mat-header-cell"),Ot(1," Last Modified "),fe())}function Tte(n,e){if(1&n&&(se(0,"mat-cell"),Ot(1),fe()),2&n){const t=e.$implicit,i=un();Ue(1),Io(" ",i.formatDate(t.modifyDate)," ")}}function Ate(n,e){1&n&&nn(0,"mat-header-row")}function Rte(n,e){if(1&n){const t=ar();se(0,"mat-row",17),st("click",function(){const s=ui(t).$implicit;return di(un().selectShow(s.id))}),fe()}if(2&n){const t=e.$implicit;Le("ngClass",un().selectedShowId===t.id?"selected":"")}}let Ite=(()=>{class n{constructor(t){this.dialogRef=t,this.selectedShowId=null,this.shows=[],this.displayedColumns=["name","modifyDate"]}ngOnInit(){var t=this;return Pi(function*(){t.shows=yield Uo.listShows(),t.shows.sort((i,r)=>r.modifyDate-i.modifyDate)})()}updateShow(t){t.modifyDate=Date.now(),Uo.updateShow(t.id,t.name),this.shows=this.shows.map(i=>i.id===t.id?t:i),this.shows.sort((i,r)=>r.modifyDate-i.modifyDate)}selectShow(t){this.selectedShowId=t}formatDate(t){return new Date(t).toLocaleString()}cancel(){this.dialogRef.close()}remove(){null!==this.selectedShowId&&(Uo.deleteShow(this.selectedShowId),this.shows=this.shows.filter(t=>t.id!==this.selectedShowId),this.selectedShowId=null)}open(){this.dialogRef.close(this.selectedShowId)}}return n.\u0275fac=function(t){return new(t||n)(R(rv))},n.\u0275cmp=Wt({type:n,selectors:[["app-file-open"]],decls:19,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mat-elevation-z4",3,"dataSource"],["matColumnDef","name"],["class","title-cell",4,"matHeaderCellDef"],["class","title-cell",4,"matCellDef"],["matColumnDef","modifyDate"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions",""],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"],[1,"title-cell"],["matInput","",1,"mat-input-element",3,"ngModel","ngModelChange","change"],[3,"ngClass","click"]],template:function(t,i){1&t&&(se(0,"h1",0),Ot(1,"Open Show"),fe(),se(2,"div",1)(3,"mat-table",2),Ps(4,3),Nt(5,Ste,2,0,"mat-header-cell",4),Nt(6,Ete,2,1,"mat-cell",5),Os(),Ps(7,6),Nt(8,Dte,2,0,"mat-header-cell",7),Nt(9,Tte,2,1,"mat-cell",8),Os(),Nt(10,Ate,1,0,"mat-header-row",9),Nt(11,Rte,1,1,"mat-row",10),fe()(),se(12,"div",11)(13,"button",12),st("click",function(){return i.cancel()}),Ot(14,"Cancel"),fe(),se(15,"button",13),st("click",function(){return i.remove()}),Ot(16,"Delete"),fe(),se(17,"button",14),st("click",function(){return i.open()}),Ot(18,"Open"),fe()()),2&t&&(Ue(3),Le("dataSource",i.shows),Ue(7),Le("matHeaderRowDef",i.displayedColumns),Ue(1),Le("matRowDefColumns",i.displayedColumns),Ue(4),Le("disabled",null===i.selectedShowId),Ue(2),Le("disabled",null===i.selectedShowId))},dependencies:[Ef,ud,Rf,hd,up,bM,Nv,Vv,yS,Hv,Bv,bS,zv,Uv,wS,xS,dN,hN,fN],styles:["mat-row.selected[_ngcontent-%COMP%]{background-color:#eaeaeac6}mat-action-list[_ngcontent-%COMP%]{width:100%}"]}),n})();var kte=rs(28);const Nc=1e3,zr=1001,$i=1003,Ei=1006,wl=1008,Bc=1009,Vc=1014,xl=1015,Op=1016,jd=1020,ho=1023,Hc=1026,$d=1027,Lp=2300,qd=2301,zc=3e3,Kn=3001,La="srgb",Gc="srgb-linear";class Yd{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Er=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let X2=1234567;const Wc=Math.PI/180,Fp=180/Math.PI;function ws(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Er[255&n]+Er[n>>8&255]+Er[n>>16&255]+Er[n>>24&255]+"-"+Er[255&e]+Er[e>>8&255]+"-"+Er[e>>16&15|64]+Er[e>>24&255]+"-"+Er[63&t|128]+Er[t>>8&255]+"-"+Er[t>>16&255]+Er[t>>24&255]+Er[255&i]+Er[i>>8&255]+Er[i>>16&255]+Er[i>>24&255]).toLowerCase()}function Oi(n,e,t){return Math.max(e,Math.min(t,n))}function FS(n,e){return(n%e+e)%e}function Np(n,e,t){return(1-t)*n+t*e}function NS(n){return 0==(n&n-1)&&0!==n}function K2(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Kv(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}var Go=Object.freeze({__proto__:null,DEG2RAD:Wc,RAD2DEG:Fp,generateUUID:ws,clamp:Oi,euclideanModulo:FS,mapLinear:function kne(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function Pne(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:Np,damp:function One(n,e,t,i){return Np(n,e,1-Math.exp(-t*i))},pingpong:function Lne(n,e=1){return e-Math.abs(FS(n,2*e)-e)},smoothstep:function Fne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function Nne(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function Bne(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function Vne(n,e){return n+Math.random()*(e-n)},randFloatSpread:function Hne(n){return n*(.5-Math.random())},seededRandom:function zne(n){void 0!==n&&(X2=n);let e=X2+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function Une(n){return n*Wc},radToDeg:function Gne(n){return n*Fp},isPowerOfTwo:NS,ceilPowerOfTwo:K2,floorPowerOfTwo:Kv,setQuaternionFromProperEuler:function Wne(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),h=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function $ne(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}},denormalize:function jne(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}});class Ce{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xs{constructor(){xs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],m=r[0],g=r[3],_=r[6],v=r[1],y=r[4],b=r[7],x=r[2],C=r[5],A=r[8];return s[0]=o*m+a*v+l*x,s[3]=o*g+a*y+l*C,s[6]=o*_+a*b+l*A,s[1]=c*m+u*v+d*x,s[4]=c*g+u*y+d*C,s[7]=c*_+u*b+d*A,s[2]=h*m+f*v+p*x,s[5]=h*g+f*y+p*C,s[8]=h*_+f*b+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(i*l-c*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Y2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Bp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function jc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Yv(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const BS={[La]:{[Gc]:jc},[Gc]:{[La]:Yv}},fo={legacyMode:!0,get workingColorSpace(){return Gc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(BS[e]&&void 0!==BS[e][t]){const i=BS[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},Z2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nr={r:0,g:0,b:0},po={h:0,s:0,l:0},Zv={h:0,s:0,l:0};function VS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function Qv(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Qd,et=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=La){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,fo.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=Gc){return this.r=t,this.g=i,this.b=r,fo.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=Gc){if(t=FS(t,1),i=Oi(i,0,1),r=Oi(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=VS(a,o,t+1/3),this.g=VS(a,o,t),this.b=VS(a,o,t-1/3)}return fo.toWorkingColorSpace(this,s),this}setStyle(t,i=La){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,fo.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,fo.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(c,u,d,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,fo.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,fo.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=La){const r=Z2[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=jc(t.r),this.g=jc(t.g),this.b=jc(t.b),this}copyLinearToSRGB(t){return this.r=Yv(t.r),this.g=Yv(t.g),this.b=Yv(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=La){return fo.fromWorkingColorSpace(Qv(this,nr),t),Oi(255*nr.r,0,255)<<16^Oi(255*nr.g,0,255)<<8^Oi(255*nr.b,0,255)<<0}getHexString(t=La){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Gc){fo.fromWorkingColorSpace(Qv(this,nr),i);const r=nr.r,s=nr.g,o=nr.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,i=Gc){return fo.fromWorkingColorSpace(Qv(this,nr),i),t.r=nr.r,t.g=nr.g,t.b=nr.b,t}getStyle(t=La){return fo.fromWorkingColorSpace(Qv(this,nr),t),t!==La?`color(${t} ${nr.r} ${nr.g} ${nr.b})`:`rgb(${255*nr.r|0},${255*nr.g|0},${255*nr.b|0})`}offsetHSL(t,i,r){return this.getHSL(po),po.h+=t,po.s+=i,po.l+=r,this.setHSL(po.h,po.s,po.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(po),t.getHSL(Zv);const r=Np(po.h,Zv.h,i),s=Np(po.s,Zv.s,i),o=Np(po.l,Zv.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=Z2,n})();class Q2{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Qd&&(Qd=Bp("canvas")),Qd.width=e.width,Qd.height=e.height;const i=Qd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Qd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Bp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*jc(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*jc(t[i]/255)):jc(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Jd{constructor(e=null){this.isSource=!0,this.uuid=ws(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(HS(r[o].isDataTexture?r[o].image:r[o]))}else s=HS(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function HS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Q2.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Xne=0,mo=(()=>{class n extends Yd{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=zr,s=zr,o=Ei,a=wl,l=ho,c=Bc,u=1,d=zc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Xne++}),this.uuid=ws(),this.name="",this.source=new Jd(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Nc:t.x=t.x-Math.floor(t.x);break;case zr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Nc:t.y=t.y-Math.floor(t.y);break;case zr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class Yn{constructor(e=0,t=0,i=0,r=1){Yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,b=(f+1)/2,x=(_+1)/2,C=(u+h)/4,A=(d+m)/4,w=(p+g)/4;return y>b&&y>x?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=C/i,s=A/i):b>x?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=C/r,s=w/r):x<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),i=A/s,r=w/s),this.set(i,r,s,t),this}let v=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(d-m)/v,this.z=(h-u)/v,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class $c extends Yd{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yn(0,0,e,t),this.scissorTest=!1,this.viewport=new Yn(0,0,e,t),this.texture=new mo({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Ei,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Jd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zS extends mo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$i,this.minFilter=$i,this.wrapR=zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class J2 extends mo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$i,this.minFilter=$i,this.wrapR=zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ns{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=m);if(d!==m||l!==h||c!==f||u!==p){let g=1-a;const _=l*h+c*f+u*p+d*m,v=_>=0?1:-1,y=1-_*_;if(y>Number.EPSILON){const x=Math.sqrt(y),C=Math.atan2(x,_*v);g=Math.sin(g*C)/x,a=Math.sin(a*C)/x}const b=a*v;if(l=l*g+h*b,c=c*g+f*b,u=u*g+p*b,d=d*g+m*b,g===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,t=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(e3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return US.copy(this).projectOnVector(e),this.sub(US)}reflect(e){return this.sub(US.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const US=new k,e3=new ns;class qc{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Xc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Xc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Xc)}else null===i.boundingBox&&i.computeBoundingBox(),GS.copy(i.boundingBox),GS.applyMatrix4(e.matrixWorld),this.union(GS);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xc),Xc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vp),Jv.subVectors(this.max,Vp),eh.subVectors(e.a,Vp),th.subVectors(e.b,Vp),nh.subVectors(e.c,Vp),Cl.subVectors(th,eh),Ml.subVectors(nh,th),Kc.subVectors(eh,nh);let t=[0,-Cl.z,Cl.y,0,-Ml.z,Ml.y,0,-Kc.z,Kc.y,Cl.z,0,-Cl.x,Ml.z,0,-Ml.x,Kc.z,0,-Kc.x,-Cl.y,Cl.x,0,-Ml.y,Ml.x,0,-Kc.y,Kc.x,0];return!(!WS(t,eh,th,nh,Jv)||(t=[1,0,0,0,1,0,0,0,1],!WS(t,eh,th,nh,Jv)))&&(ey.crossVectors(Cl,Ml),t=[ey.x,ey.y,ey.z],WS(t,eh,th,nh,Jv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Xc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Xc).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fa)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fa=[new k,new k,new k,new k,new k,new k,new k,new k],Xc=new k,GS=new qc,eh=new k,th=new k,nh=new k,Cl=new k,Ml=new k,Kc=new k,Vp=new k,Jv=new k,ey=new k,Yc=new k;function WS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Yc.fromArray(n,s);const a=r.x*Math.abs(Yc.x)+r.y*Math.abs(Yc.y)+r.z*Math.abs(Yc.z),l=e.dot(Yc),c=t.dot(Yc),u=i.dot(Yc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Kne=new qc,t3=new k,ty=new k,jS=new k;class Zc{constructor(e=new k,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Kne.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){jS.subVectors(e,this.center);const t=jS.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(jS.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?ty.set(0,0,1).multiplyScalar(e.radius):ty.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(t3.copy(e.center).add(ty)),this.expandByPoint(t3.copy(e.center).sub(ty)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Na=new k,$S=new k,ny=new k,Sl=new k,qS=new k,iy=new k,XS=new k;class ry{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Na)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Na.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Na.copy(this.direction).multiplyScalar(t).add(this.origin),Na.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){$S.copy(e).add(t).multiplyScalar(.5),ny.copy(t).sub(e).normalize(),Sl.copy(this.origin).sub($S);const s=.5*e.distanceTo(t),o=-this.direction.dot(ny),a=Sl.dot(this.direction),l=-Sl.dot(ny),c=Sl.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(ny).multiplyScalar(h).add($S),f}intersectSphere(e,t){Na.subVectors(e.center,this.origin);const i=Na.dot(this.direction),r=Na.dot(Na)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Na)}intersectTriangle(e,t,i,r,s){qS.subVectors(t,e),iy.subVectors(i,e),XS.crossVectors(qS,iy);let a,o=this.direction.dot(XS);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Sl.subVectors(this.origin,e);const l=a*this.direction.dot(iy.crossVectors(Sl,iy));if(l<0)return null;const c=a*this.direction.dot(qS.cross(Sl));if(c<0||l+c>o)return null;const u=-a*Sl.dot(XS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class dn{constructor(){dn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,m,g){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new dn).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ih.setFromMatrixColumn(e,0).length(),s=1/ih.setFromMatrixColumn(e,1).length(),o=1/ih.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h+m*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h-m*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-m*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Yne,e,Zne)}lookAt(e,t,i){const r=this.elements;return Cs.subVectors(e,t),0===Cs.lengthSq()&&(Cs.z=1),Cs.normalize(),El.crossVectors(i,Cs),0===El.lengthSq()&&(1===Math.abs(i.z)?Cs.x+=1e-4:Cs.z+=1e-4,Cs.normalize(),El.crossVectors(i,Cs)),El.normalize(),sy.crossVectors(Cs,El),r[0]=El.x,r[4]=sy.x,r[8]=Cs.x,r[1]=El.y,r[5]=sy.y,r[9]=Cs.y,r[2]=El.z,r[6]=sy.z,r[10]=Cs.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],m=i[6],g=i[10],_=i[14],v=i[3],y=i[7],b=i[11],x=i[15],C=r[0],A=r[4],w=r[8],T=r[12],B=r[1],H=r[5],J=r[9],ie=r[13],z=r[2],te=r[6],V=r[10],j=r[14],q=r[3],$=r[7],ee=r[11],Re=r[15];return s[0]=o*C+a*B+l*z+c*q,s[4]=o*A+a*H+l*te+c*$,s[8]=o*w+a*J+l*V+c*ee,s[12]=o*T+a*ie+l*j+c*Re,s[1]=u*C+d*B+h*z+f*q,s[5]=u*A+d*H+h*te+f*$,s[9]=u*w+d*J+h*V+f*ee,s[13]=u*T+d*ie+h*j+f*Re,s[2]=p*C+m*B+g*z+_*q,s[6]=p*A+m*H+g*te+_*$,s[10]=p*w+m*J+g*V+_*ee,s[14]=p*T+m*ie+g*j+_*Re,s[3]=v*C+y*B+b*z+x*q,s[7]=v*A+y*H+b*te+x*$,s[11]=v*w+y*J+b*V+x*ee,s[15]=v*T+y*ie+b*j+x*Re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15],v=d*g*c-m*h*c+m*l*f-a*g*f-d*l*_+a*h*_,y=p*h*c-u*g*c-p*l*f+o*g*f+u*l*_-o*h*_,b=u*m*c-p*d*c+p*a*f-o*m*f-u*a*_+o*d*_,x=p*d*l-u*m*l-p*a*h+o*m*h+u*a*g-o*d*g,C=t*v+i*y+r*b+s*x;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=v*A,e[1]=(m*h*s-d*g*s-m*r*f+i*g*f+d*r*_-i*h*_)*A,e[2]=(a*g*s-m*l*s+m*r*c-i*g*c-a*r*_+i*l*_)*A,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*A,e[4]=y*A,e[5]=(u*g*s-p*h*s+p*r*f-t*g*f-u*r*_+t*h*_)*A,e[6]=(p*l*s-o*g*s-p*r*c+t*g*c+o*r*_-t*l*_)*A,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*A,e[8]=b*A,e[9]=(p*d*s-u*m*s-p*i*f+t*m*f+u*i*_-t*d*_)*A,e[10]=(o*m*s-p*a*s+p*i*c-t*m*c-o*i*_+t*a*_)*A,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*A,e[12]=x*A,e[13]=(u*m*r-p*d*r+p*i*h-t*m*h-u*i*g+t*d*g)*A,e[14]=(p*a*r-o*m*r-p*i*l+t*m*l+o*i*g-t*a*g)*A,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,m=o*u,g=o*d,_=a*d,v=l*c,y=l*u,b=l*d,x=i.x,C=i.y,A=i.z;return r[0]=(1-(m+_))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*C,r[5]=(1-(h+_))*C,r[6]=(g+v)*C,r[7]=0,r[8]=(p+y)*A,r[9]=(g-v)*A,r[10]=(1-(h+m))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ih.set(r[0],r[1],r[2]).length();const o=ih.set(r[4],r[5],r[6]).length(),a=ih.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],go.copy(this);const c=1/s,u=1/o,d=1/a;return go.elements[0]*=c,go.elements[1]*=c,go.elements[2]*=c,go.elements[4]*=u,go.elements[5]*=u,go.elements[6]*=u,go.elements[8]*=d,go.elements[9]*=d,go.elements[10]*=d,t.setFromRotationMatrix(go),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),d=(t+e)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const ih=new k,go=new dn,Yne=new k(0,0,0),Zne=new k(1,1,1),El=new k,sy=new k,Cs=new k,n3=new dn,r3=new ns;let Qne=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(Oi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Oi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Oi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return n3.makeRotationFromQuaternion(t),this.setFromRotationMatrix(n3,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return r3.setFromEuler(this),this.setFromQuaternion(r3,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class KS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Jne=0;const s3=new k,rh=new ns,Ba=new dn,oy=new k,Hp=new k,eie=new k,tie=new ns,o3=new k(1,0,0),a3=new k(0,1,0),l3=new k(0,0,1),nie={type:"added"},c3={type:"removed"};let ur=(()=>{class n extends Yd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jne++}),this.uuid=ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new k,i=new Qne,r=new ns,s=new k(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new dn},normalMatrix:{value:new xs}}),this.matrix=new dn,this.matrixWorld=new dn,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new KS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return rh.setFromAxisAngle(t,i),this.quaternion.multiply(rh),this}rotateOnWorldAxis(t,i){return rh.setFromAxisAngle(t,i),this.quaternion.premultiply(rh),this}rotateX(t){return this.rotateOnAxis(o3,t)}rotateY(t){return this.rotateOnAxis(a3,t)}rotateZ(t){return this.rotateOnAxis(l3,t)}translateOnAxis(t,i){return s3.copy(t).applyQuaternion(this.quaternion),this.position.add(s3.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(o3,t)}translateY(t){return this.translateOnAxis(a3,t)}translateZ(t){return this.translateOnAxis(l3,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ba.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?oy.copy(t):oy.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Hp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ba.lookAt(Hp,oy,this.up):Ba.lookAt(oy,Hp,this.up),this.quaternion.setFromRotationMatrix(Ba),s&&(Ba.extractRotation(s.matrixWorld),rh.setFromRotationMatrix(Ba),this.quaternion.premultiply(rh.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(nie)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(c3)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(c3)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ba.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ba.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ba),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hp,t,eie),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hp,tie,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),m=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new k(0,1,0),n.DefaultMatrixAutoUpdate=!0,n})();const _o=new k,Va=new k,YS=new k,Ha=new k,sh=new k,oh=new k,u3=new k,ZS=new k,QS=new k,JS=new k;class vo{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),_o.subVectors(e,t),r.cross(_o);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){_o.subVectors(r,t),Va.subVectors(i,t),YS.subVectors(e,t);const o=_o.dot(_o),a=_o.dot(Va),l=_o.dot(YS),c=Va.dot(Va),u=Va.dot(YS),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ha),Ha.x>=0&&Ha.y>=0&&Ha.x+Ha.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ha),l.set(0,0),l.addScaledVector(s,Ha.x),l.addScaledVector(o,Ha.y),l.addScaledVector(a,Ha.z),l}static isFrontFacing(e,t,i,r){return _o.subVectors(i,t),Va.subVectors(e,t),_o.cross(Va).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _o.subVectors(this.c,this.b),Va.subVectors(this.a,this.b),.5*_o.cross(Va).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return vo.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return vo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;sh.subVectors(r,i),oh.subVectors(s,i),ZS.subVectors(e,i);const l=sh.dot(ZS),c=oh.dot(ZS);if(l<=0&&c<=0)return t.copy(i);QS.subVectors(e,r);const u=sh.dot(QS),d=oh.dot(QS);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(sh,o);JS.subVectors(e,s);const f=sh.dot(JS),p=oh.dot(JS);if(p>=0&&f<=p)return t.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(oh,a);const g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return u3.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(u3,a);const _=1/(g+m+h);return o=m*_,a=h*_,t.copy(i).addScaledVector(sh,o).addScaledVector(oh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let iie=0;class yo extends Yd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iie++}),this.uuid=ws(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Us extends yo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qi=new k,ay=new Ce;class Xi{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new et),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Ce),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new k),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Yn),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)ay.fromBufferAttribute(this,t),ay.applyMatrix3(e),this.setXY(t,ay.x,ay.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)qi.fromBufferAttribute(this,t),qi.applyMatrix3(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)qi.fromBufferAttribute(this,t),qi.applyMatrix4(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qi.fromBufferAttribute(this,t),qi.applyNormalMatrix(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qi.fromBufferAttribute(this,t),qi.transformDirection(e),this.setXYZ(t,qi.x,qi.y,qi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class d3 extends Xi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class h3 extends Xi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class xt extends Xi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let rie=0;const Gs=new dn,eE=new ur,ah=new k,Ms=new qc,zp=new qc,rr=new k;class bn extends Yd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rie++}),this.uuid=ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Y2(e)?h3:d3)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new xs).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gs.makeRotationFromQuaternion(e),this.applyMatrix4(Gs),this}rotateX(e){return Gs.makeRotationX(e),this.applyMatrix4(Gs),this}rotateY(e){return Gs.makeRotationY(e),this.applyMatrix4(Gs),this}rotateZ(e){return Gs.makeRotationZ(e),this.applyMatrix4(Gs),this}translate(e,t,i){return Gs.makeTranslation(e,t,i),this.applyMatrix4(Gs),this}scale(e,t,i){return Gs.makeScale(e,t,i),this.applyMatrix4(Gs),this}lookAt(e){return eE.lookAt(e),eE.updateMatrix(),this.applyMatrix4(eE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ah).negate(),this.translate(ah.x,ah.y,ah.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new xt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new qc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Ms.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,Ms.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,Ms.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(Ms.min),this.boundingBox.expandByPoint(Ms.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Zc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new k,1/0);if(e){const i=this.boundingSphere.center;if(Ms.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)zp.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(rr.addVectors(Ms.min,zp.min),Ms.expandByPoint(rr),rr.addVectors(Ms.max,zp.max),Ms.expandByPoint(rr)):(Ms.expandByPoint(zp.min),Ms.expandByPoint(zp.max));Ms.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)rr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(rr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)rr.fromBufferAttribute(a,c),l&&(ah.fromBufferAttribute(e,c),rr.add(ah)),r=Math.max(r,i.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Xi(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let B=0;B<a;B++)c[B]=new k,u[B]=new k;const d=new k,h=new k,f=new k,p=new Ce,m=new Ce,g=new Ce,_=new k,v=new k;function y(B,H,J){d.fromArray(r,3*B),h.fromArray(r,3*H),f.fromArray(r,3*J),p.fromArray(o,2*B),m.fromArray(o,2*H),g.fromArray(o,2*J),h.sub(d),f.sub(d),m.sub(p),g.sub(p);const ie=1/(m.x*g.y-g.x*m.y);!isFinite(ie)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(ie),v.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(ie),c[B].add(_),c[H].add(_),c[J].add(_),u[B].add(v),u[H].add(v),u[J].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let B=0,H=b.length;B<H;++B){const J=b[B],ie=J.start;for(let te=ie,V=ie+J.count;te<V;te+=3)y(i[te+0],i[te+1],i[te+2])}const x=new k,C=new k,A=new k,w=new k;function T(B){A.fromArray(s,3*B),w.copy(A);const H=c[B];x.copy(H),x.sub(A.multiplyScalar(A.dot(H))).normalize(),C.crossVectors(w,H);const ie=C.dot(u[B])<0?-1:1;l[4*B]=x.x,l[4*B+1]=x.y,l[4*B+2]=x.z,l[4*B+3]=ie}for(let B=0,H=b.length;B<H;++B){const J=b[B],ie=J.start;for(let te=ie,V=ie+J.count;te<V;te+=3)T(i[te+0]),T(i[te+1]),T(i[te+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Xi(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new k,s=new k,o=new k,a=new k,l=new k,c=new k,u=new k,d=new k;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const o=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)rr.fromBufferAttribute(e,t),rr.normalize(),e.setXYZ(t,rr.x,rr.y,rr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*u;for(let _=0;_<u;_++)h[p++]=c[f++]}return new Xi(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bn,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const f3=new dn,lh=new ry,tE=new Zc,Dl=new k,Tl=new k,Al=new k,nE=new k,iE=new k,rE=new k,ly=new k,cy=new k,uy=new k,dy=new Ce,hy=new Ce,fy=new Ce,sE=new k,py=new k;class Ur extends ur{constructor(e=new bn,t=new Us){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),tE.copy(i.boundingSphere),tE.applyMatrix4(s),!1===e.ray.intersectsSphere(tE))||(f3.copy(s).invert(),lh.copy(e.ray).applyMatrix4(f3),null!==i.boundingBox&&!1===lh.intersectsBox(i.boundingBox)))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),C=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));x<C;x+=3){const A=a.getX(x),w=a.getX(x+1),T=a.getX(x+2);o=my(this,v,e,lh,l,c,u,d,h,A,w,T),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else for(let _=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);_<v;_+=3){const y=a.getX(_),b=a.getX(_+1),x=a.getX(_+2);o=my(this,r,e,lh,l,c,u,d,h,y,b,x),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),C=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));x<C;x+=3)o=my(this,v,e,lh,l,c,u,d,h,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,t.push(o))}else for(let _=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);_<v;_+=3)o=my(this,r,e,lh,l,c,u,d,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}function my(n,e,t,i,r,s,o,a,l,c,u,d){Dl.fromBufferAttribute(r,c),Tl.fromBufferAttribute(r,u),Al.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(s&&h){ly.set(0,0,0),cy.set(0,0,0),uy.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],_=s[p];0!==g&&(nE.fromBufferAttribute(_,c),iE.fromBufferAttribute(_,u),rE.fromBufferAttribute(_,d),o?(ly.addScaledVector(nE,g),cy.addScaledVector(iE,g),uy.addScaledVector(rE,g)):(ly.addScaledVector(nE.sub(Dl),g),cy.addScaledVector(iE.sub(Tl),g),uy.addScaledVector(rE.sub(Al),g)))}Dl.add(ly),Tl.add(cy),Al.add(uy)}n.isSkinnedMesh&&(n.boneTransform(c,Dl),n.boneTransform(u,Tl),n.boneTransform(d,Al));const f=function sie(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;py.copy(a),py.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(py);return c<t.near||c>t.far?null:{distance:c,point:py.clone(),object:n}}(n,e,t,i,Dl,Tl,Al,sE);if(f){a&&(dy.fromBufferAttribute(a,c),hy.fromBufferAttribute(a,u),fy.fromBufferAttribute(a,d),f.uv=vo.getUV(sE,Dl,Tl,Al,dy,hy,fy,new Ce)),l&&(dy.fromBufferAttribute(l,c),hy.fromBufferAttribute(l,u),fy.fromBufferAttribute(l,d),f.uv2=vo.getUV(sE,Dl,Tl,Al,dy,hy,fy,new Ce));const p={a:c,b:u,c:d,normal:new k,materialIndex:0};vo.getNormal(Dl,Tl,Al,p.normal),f.face=p}return f}class Qc extends bn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(m,g,_,v,y,b,x,C,A,w,T){const B=b/A,H=x/w,J=b/2,ie=x/2,z=C/2,te=A+1,V=w+1;let j=0,q=0;const $=new k;for(let ee=0;ee<V;ee++){const Re=ee*H-ie;for(let ge=0;ge<te;ge++)$[m]=(ge*B-J)*v,$[g]=Re*y,$[_]=z,c.push($.x,$.y,$.z),$[m]=0,$[g]=0,$[_]=C>0?1:-1,u.push($.x,$.y,$.z),d.push(ge/A),d.push(1-ee/w),j+=1}for(let ee=0;ee<w;ee++)for(let Re=0;Re<A;Re++){const Ve=h+Re+te*(ee+1),Ge=h+(Re+1)+te*(ee+1),Mt=h+(Re+1)+te*ee;l.push(h+Re+te*ee,Ve,Mt),l.push(Ve,Ge,Mt),q+=6}a.addGroup(f,q,T),f+=q,h+=j}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new xt(c,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(d,2))}static fromJSON(e){return new Qc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ch(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Dr(n){const e={};for(let t=0;t<n.length;t++){const i=ch(n[t]);for(const r in i)e[r]=i[r]}return e}const oie={clone:ch,merge:Dr};class Rl extends yo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ch(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class oE extends ur{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dn,this.projectionMatrix=new dn,this.projectionMatrixInverse=new dn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class dr extends oE{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Fp*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Wc*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Fp*Math.atan(Math.tan(.5*Wc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Wc*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class cie extends ur{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new dr(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new k(1,0,0)),this.add(r);const s=new dr(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new k(-1,0,0)),this.add(s);const o=new dr(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new k(0,1,0)),this.add(o);const a=new dr(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new k(0,-1,0)),this.add(a);const l=new dr(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new k(0,0,1)),this.add(l);const c=new dr(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new k(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class gy extends mo{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class uie extends $c{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new gy([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ei}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Qc(5,5,5),s=new Rl({name:"CubemapFromEquirect",uniforms:ch(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ur(r,s),a=t.minFilter;return t.minFilter===wl&&(t.minFilter=Ei),new cie(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const aE=new k,die=new k,hie=new xs;class Jc{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=aE.subVectors(i,t).cross(die.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(aE),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||hie.getNormalMatrix(e),r=this.coplanarPoint(aE).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const hh=new Zc,_y=new k;class lE{constructor(e=new Jc,t=new Jc,i=new Jc,r=new Jc,s=new Jc,o=new Jc){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],_=i[13],v=i[14],y=i[15];return t[0].setComponents(a-r,d-l,m-h,y-g).normalize(),t[1].setComponents(a+r,d+l,m+h,y+g).normalize(),t[2].setComponents(a+s,d+c,m+f,y+_).normalize(),t[3].setComponents(a-s,d-c,m-f,y-_).normalize(),t[4].setComponents(a-o,d-u,m-p,y-v).normalize(),t[5].setComponents(a+o,d+u,m+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),hh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(hh)}intersectsSprite(e){return hh.center.set(0,0,0),hh.radius=.7071067811865476,hh.applyMatrix4(e.matrixWorld),this.intersectsSphere(hh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(_y.x=r.normal.x>0?e.max.x:e.min.x,_y.y=r.normal.y>0?e.max.y:e.min.y,_y.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_y)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function p3(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function fie(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=5121}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Up extends bn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],m=[],g=[];for(let _=0;_<u;_++){const v=_*h-o;for(let y=0;y<c;y++)p.push(y*d-s,-v,0),m.push(0,0,1),g.push(y/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let v=0;v<a;v++){const b=v+c*(_+1),x=v+1+c*(_+1),C=v+1+c*_;f.push(v+c*_,b,C),f.push(b,x,C)}this.setIndex(f),this.setAttribute("position",new xt(p,3)),this.setAttribute("normal",new xt(m,3)),this.setAttribute("uv",new xt(g,2))}static fromJSON(e){return new Up(e.width,e.height,e.widthSegments,e.heightSegments)}}const Mn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},it={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new xs},uv2Transform:{value:new xs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xs}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xs}}},Wo={basic:{uniforms:Dr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:Dr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.fog,it.lights,{emissive:{value:new et(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:Dr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:Dr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:Dr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new et(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:Dr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:Dr([it.points,it.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:Dr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:Dr([it.common,it.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:Dr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:Dr([it.sprite,it.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new xs},t2D:{value:null}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},cube:{uniforms:Dr([it.envmap,{opacity:{value:1}}]),vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:Dr([it.common,it.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:Dr([it.lights,it.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};function dse(n,e,t,i,r,s){const o=new et(0);let l,c,a=!0===r?0:1,u=null,d=0,h=null;function p(m,g){t.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let _=!1,v=!0===g.isScene?g.background:null;v&&v.isTexture&&(v=e.get(v));const y=n.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?p(o,a):v&&v.isColor&&(p(v,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===c&&(c=new Ur(new Qc(1,1,1),new Rl({name:"BackgroundCubeMaterial",uniforms:ch(Wo.cube.uniforms),vertexShader:Wo.cube.vertexShader,fragmentShader:Wo.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,C,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,(u!==v||d!==v.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Ur(new Up(2,2),new Rl({name:"BackgroundMaterial",uniforms:ch(Wo.background.uniforms),vertexShader:Wo.background.vertexShader,fragmentShader:Wo.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||d!==v.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}}}function hse(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(z){return i.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function p(z){return i.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function g(z){const te=[],V=[],j=[];for(let q=0;q<r;q++)te[q]=0,V[q]=0,j[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:V,attributeDivisors:j,object:z,attributes:{},index:null}}function y(){const z=c.newAttributes;for(let te=0,V=z.length;te<V;te++)z[te]=0}function b(z){x(z,0)}function x(z,te){const j=c.enabledAttributes,q=c.attributeDivisors;c.newAttributes[z]=1,0===j[z]&&(n.enableVertexAttribArray(z),j[z]=1),q[z]!==te&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,te),q[z]=te)}function C(){const z=c.newAttributes,te=c.enabledAttributes;for(let V=0,j=te.length;V<j;V++)te[V]!==z[V]&&(n.disableVertexAttribArray(V),te[V]=0)}function A(z,te,V,j,q,$){!0!==i.isWebGL2||5124!==V&&5125!==V?n.vertexAttribPointer(z,te,V,j,q,$):n.vertexAttribIPointer(z,te,V,q,$)}function J(){ie(),u=!0,c!==l&&(c=l,f(c.object))}function ie(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(z,te,V,j,q){let $=!1;if(o){const ee=function m(z,te,V){const j=!0===V.wireframe;let q=a[z.id];void 0===q&&(q={},a[z.id]=q);let $=q[te.id];void 0===$&&($={},q[te.id]=$);let ee=$[j];return void 0===ee&&(ee=g(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),$[j]=ee),ee}(j,V,te);c!==ee&&(c=ee,f(c.object)),$=function _(z,te,V,j){const q=c.attributes,$=te.attributes;let ee=0;const Re=V.getAttributes();for(const ge in Re)if(Re[ge].location>=0){const Ge=q[ge];let Mt=$[ge];if(void 0===Mt&&("instanceMatrix"===ge&&z.instanceMatrix&&(Mt=z.instanceMatrix),"instanceColor"===ge&&z.instanceColor&&(Mt=z.instanceColor)),void 0===Ge||Ge.attribute!==Mt||Mt&&Ge.data!==Mt.data)return!0;ee++}return c.attributesNum!==ee||c.index!==j}(z,j,V,q),$&&function v(z,te,V,j){const q={},$=te.attributes;let ee=0;const Re=V.getAttributes();for(const ge in Re)if(Re[ge].location>=0){let Ge=$[ge];void 0===Ge&&("instanceMatrix"===ge&&z.instanceMatrix&&(Ge=z.instanceMatrix),"instanceColor"===ge&&z.instanceColor&&(Ge=z.instanceColor));const Mt={};Mt.attribute=Ge,Ge&&Ge.data&&(Mt.data=Ge.data),q[ge]=Mt,ee++}c.attributes=q,c.attributesNum=ee,c.index=j}(z,j,V,q)}else{const ee=!0===te.wireframe;(c.geometry!==j.id||c.program!==V.id||c.wireframe!==ee)&&(c.geometry=j.id,c.program=V.id,c.wireframe=ee,$=!0)}null!==q&&t.update(q,34963),($||u)&&(u=!1,function w(z,te,V,j){if(!1===i.isWebGL2&&(z.isInstancedMesh||j.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const q=j.attributes,$=V.getAttributes(),ee=te.defaultAttributeValues;for(const Re in $){const ge=$[Re];if(ge.location>=0){let Ve=q[Re];if(void 0===Ve&&("instanceMatrix"===Re&&z.instanceMatrix&&(Ve=z.instanceMatrix),"instanceColor"===Re&&z.instanceColor&&(Ve=z.instanceColor)),void 0!==Ve){const Ge=Ve.normalized,Mt=Ve.itemSize,de=t.get(Ve);if(void 0===de)continue;const Yt=de.buffer,Ht=de.type,Tt=de.bytesPerElement;if(Ve.isInterleavedBufferAttribute){const qe=Ve.data,hn=qe.stride,Me=Ve.offset;if(qe.isInstancedInterleavedBuffer){for(let ye=0;ye<ge.locationSize;ye++)x(ge.location+ye,qe.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=qe.meshPerAttribute*qe.count)}else for(let ye=0;ye<ge.locationSize;ye++)b(ge.location+ye);n.bindBuffer(34962,Yt);for(let ye=0;ye<ge.locationSize;ye++)A(ge.location+ye,Mt/ge.locationSize,Ht,Ge,hn*Tt,(Me+Mt/ge.locationSize*ye)*Tt)}else{if(Ve.isInstancedBufferAttribute){for(let qe=0;qe<ge.locationSize;qe++)x(ge.location+qe,Ve.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let qe=0;qe<ge.locationSize;qe++)b(ge.location+qe);n.bindBuffer(34962,Yt);for(let qe=0;qe<ge.locationSize;qe++)A(ge.location+qe,Mt/ge.locationSize,Ht,Ge,Mt*Tt,Mt/ge.locationSize*qe*Tt)}}else if(void 0!==ee){const Ge=ee[Re];if(void 0!==Ge)switch(Ge.length){case 2:n.vertexAttrib2fv(ge.location,Ge);break;case 3:n.vertexAttrib3fv(ge.location,Ge);break;case 4:n.vertexAttrib4fv(ge.location,Ge);break;default:n.vertexAttrib1fv(ge.location,Ge)}}}}C()}(z,te,V,j),null!==q&&n.bindBuffer(34963,t.get(q).buffer))},reset:J,resetDefaultState:ie,dispose:function T(){J();for(const z in a){const te=a[z];for(const V in te){const j=te[V];for(const q in j)p(j[q].object),delete j[q];delete te[V]}delete a[z]}},releaseStatesOfGeometry:function B(z){if(void 0===a[z.id])return;const te=a[z.id];for(const V in te){const j=te[V];for(const q in j)p(j[q].object),delete j[q];delete te[V]}delete a[z.id]},releaseStatesOfProgram:function H(z){for(const te in a){const V=a[te];if(void 0===V[z.id])continue;const j=V[z.id];for(const q in j)p(j[q].object),delete j[q];delete V[z.id]}},initAttributes:y,enableAttribute:b,disableUnusedAttributes:C}}function fse(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function pse(n,e,t){let i;function s(A){if("highp"===A){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return"mediump"===A&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),_=n.getParameter(36348),v=n.getParameter(36349),y=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const A=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?n.getParameter(36183):0}}function mse(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Jc,a=new xs,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){const m=null!==d?d.length:0;let g=null;if(0!==m){if(g=l.value,!0!==p||null===g){const _=f+4*m,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===g||g.length<_)&&(g=new Float32Array(_));for(let y=0,b=f;y!==m;++y,b+=4)o.copy(d[y]).applyMatrix4(v,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==i||r;return r=h,t=u(d,f,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,_=n.get(d);if(!r||null===p||0===p.length||s&&!g)s?u(null):c();else{const v=s?0:i,y=4*v;let b=_.clippingState||null;l.value=b,b=u(p,h,y,f);for(let x=0;x!==y;++x)b[x]=t[x];_.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}}}function gse(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new uie(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}Wo.physical={uniforms:Dr([Wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};class Gp extends oE{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const m3=[.125,.215,.35,.446,.526,.582],cE=new Gp,g3=new et;let uE=null;const tu=(1+Math.sqrt(5))/2,ph=1/tu,_3=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,tu,ph),new k(0,tu,-ph),new k(ph,0,tu),new k(-ph,0,tu),new k(tu,ph,0),new k(-tu,ph,0)];class v3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){uE=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=w3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=b3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(uE),e.scissorTest=!1,vy(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),uE=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ei,minFilter:Ei,generateMipmaps:!1,type:Op,format:ho,encoding:zc,depthBuffer:!1},r=y3(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=y3(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function _se(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+m3.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=m3[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,g=2,_=1,v=new Float32Array(m*p*f),y=new Float32Array(g*p*f),b=new Float32Array(_*p*f);for(let C=0;C<f;C++){const A=C%3*2/3-1,w=C>2?0:-1;v.set([A,w,0,A+2/3,w,0,A+2/3,w+1,0,A,w,0,A+2/3,w+1,0,A,w+1,0],m*p*C),y.set(h,g*p*C),b.set([C,C,C,C,C,C],_*p*C)}const x=new bn;x.setAttribute("position",new Xi(v,m)),x.setAttribute("uv",new Xi(y,g)),x.setAttribute("faceIndex",new Xi(b,_)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function vse(n,e,t){const i=new Float32Array(20),r=new k(0,1,0);return new Rl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ur(this._lodPlanes[0],e);this._renderer.compile(t,cE)}_sceneToCubeUV(e,t,i,r){const a=new dr(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(g3),u.toneMapping=0,u.autoClear=!1;const f=new Us({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Ur(new Qc,f);let m=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,m=!0):(f.color.copy(g3),m=!0);for(let _=0;_<6;_++){const v=_%3;0===v?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===v?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const y=this._cubeSize;vy(r,v*y,_>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=w3()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=b3());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ur(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;vy(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,cE)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,_3[(r-1)%_3.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Ur(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let v=0;for(let A=0;A<20;++A){const w=A/m,T=Math.exp(-w*w/2);_.push(T),0===A?v+=T:A<g&&(v+=2*T)}for(let A=0;A<_.length;A++)_[A]=_[A]/v;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const b=this._sizeLods[r];vy(t,3*b*(r>y-4?r-y+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(t),l.render(d,cE)}}function y3(n,e,t){const i=new $c(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function vy(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function b3(){return new Rl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function w3(){return new Rl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function yse(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new v3(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new v3(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function bse(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function wse(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(null!==f){const v=f.array;m=f.version;for(let y=0,b=v.length;y<b;y+=3){const x=v[y+0],C=v[y+1],A=v[y+2];h.push(x,C,C,A,A,x)}}else{m=p.version;for(let y=0,b=p.array.length/3-1;y<b;y+=3){const x=y+0,C=y+1,A=y+2;h.push(x,C,C,A,A,x)}}const g=new(Y2(h)?h3:d3)(h,1);g.version=m;const _=s.get(d);_&&e.remove(_),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let g=0,_=m.length;g<_;g++)e.update(m[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function xse(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let m,g;if(r)m=n,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,f,a,h*l,p),t.update(f,s,p)}}function Cse(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Mse(n,e){return n[0]-e[0]}function Sse(n,e){return Math.abs(e[1])-Math.abs(n[1])}function hE(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function Ese(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Yn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=void 0!==p?p.length:0;let g=s.get(u);if(void 0===g||g.count!==m){let te=function(){ie.dispose(),s.delete(u),u.removeEventListener("dispose",te)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,C=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],w=u.morphAttributes.color||[];let T=0;!0===y&&(T=1),!0===b&&(T=2),!0===x&&(T=3);let B=u.attributes.position.count*T,H=1;B>e.maxTextureSize&&(H=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const J=new Float32Array(B*H*4*m),ie=new zS(J,B,H,m);ie.type=xl,ie.needsUpdate=!0;const z=4*T;for(let V=0;V<m;V++){const j=C[V],q=A[V],$=w[V],ee=B*H*4*V;for(let Re=0;Re<j.count;Re++){const ge=Re*z;!0===y&&(o.fromBufferAttribute(j,Re),!0===j.normalized&&hE(o,j),J[ee+ge+0]=o.x,J[ee+ge+1]=o.y,J[ee+ge+2]=o.z,J[ee+ge+3]=0),!0===b&&(o.fromBufferAttribute(q,Re),!0===q.normalized&&hE(o,q),J[ee+ge+4]=o.x,J[ee+ge+5]=o.y,J[ee+ge+6]=o.z,J[ee+ge+7]=0),!0===x&&(o.fromBufferAttribute($,Re),!0===$.normalized&&hE(o,$),J[ee+ge+8]=o.x,J[ee+ge+9]=o.y,J[ee+ge+10]=o.z,J[ee+ge+11]=4===$.itemSize?o.w:1)}}g={count:m,texture:ie,size:new Ce(B,H)},s.set(u,g),u.addEventListener("dispose",te)}let _=0;for(let y=0;y<f.length;y++)_+=f[y];const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=i[u.id];if(void 0===m||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[u.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=f[b]}m.sort(Sse);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(Mse);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let v=0;for(let b=0;b<8;b++){const x=a[b],C=x[0],A=x[1];C!==Number.MAX_SAFE_INTEGER&&A?(g&&u.getAttribute("morphTarget"+b)!==g[C]&&u.setAttribute("morphTarget"+b,g[C]),_&&u.getAttribute("morphNormal"+b)!==_[C]&&u.setAttribute("morphNormal"+b,_[C]),r[b]=A,v+=A):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),_&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function Dse(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const x3=new mo,C3=new zS,M3=new J2,S3=new gy,E3=[],D3=[],T3=new Float32Array(16),A3=new Float32Array(9),R3=new Float32Array(4);function mh(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=E3[r];if(void 0===s&&(s=new Float32Array(r),E3[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Gr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Wr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function yy(n,e){let t=D3[e];void 0===t&&(t=new Int32Array(e),D3[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Tse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Ase(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gr(t,e))return;n.uniform2fv(this.addr,e),Wr(t,e)}}function Rse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Gr(t,e))return;n.uniform3fv(this.addr,e),Wr(t,e)}}function Ise(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gr(t,e))return;n.uniform4fv(this.addr,e),Wr(t,e)}}function kse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Gr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Wr(t,e)}else{if(Gr(t,i))return;R3.set(i),n.uniformMatrix2fv(this.addr,!1,R3),Wr(t,i)}}function Pse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Gr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Wr(t,e)}else{if(Gr(t,i))return;A3.set(i),n.uniformMatrix3fv(this.addr,!1,A3),Wr(t,i)}}function Ose(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Gr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Wr(t,e)}else{if(Gr(t,i))return;T3.set(i),n.uniformMatrix4fv(this.addr,!1,T3),Wr(t,i)}}function Lse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Fse(n,e){const t=this.cache;Gr(t,e)||(n.uniform2iv(this.addr,e),Wr(t,e))}function Nse(n,e){const t=this.cache;Gr(t,e)||(n.uniform3iv(this.addr,e),Wr(t,e))}function Bse(n,e){const t=this.cache;Gr(t,e)||(n.uniform4iv(this.addr,e),Wr(t,e))}function Vse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Hse(n,e){const t=this.cache;Gr(t,e)||(n.uniform2uiv(this.addr,e),Wr(t,e))}function zse(n,e){const t=this.cache;Gr(t,e)||(n.uniform3uiv(this.addr,e),Wr(t,e))}function Use(n,e){const t=this.cache;Gr(t,e)||(n.uniform4uiv(this.addr,e),Wr(t,e))}function Gse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||x3,r)}function Wse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||M3,r)}function jse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||S3,r)}function $se(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||C3,r)}function Xse(n,e){n.uniform1fv(this.addr,e)}function Kse(n,e){const t=mh(e,this.size,2);n.uniform2fv(this.addr,t)}function Yse(n,e){const t=mh(e,this.size,3);n.uniform3fv(this.addr,t)}function Zse(n,e){const t=mh(e,this.size,4);n.uniform4fv(this.addr,t)}function Qse(n,e){const t=mh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Jse(n,e){const t=mh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eoe(n,e){const t=mh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function toe(n,e){n.uniform1iv(this.addr,e)}function noe(n,e){n.uniform2iv(this.addr,e)}function ioe(n,e){n.uniform3iv(this.addr,e)}function roe(n,e){n.uniform4iv(this.addr,e)}function soe(n,e){n.uniform1uiv(this.addr,e)}function ooe(n,e){n.uniform2uiv(this.addr,e)}function aoe(n,e){n.uniform3uiv(this.addr,e)}function loe(n,e){n.uniform4uiv(this.addr,e)}function coe(n,e,t){const i=e.length,r=yy(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||x3,r[s])}function uoe(n,e,t){const i=e.length,r=yy(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||M3,r[s])}function doe(n,e,t){const i=e.length,r=yy(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||S3,r[s])}function hoe(n,e,t){const i=e.length,r=yy(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||C3,r[s])}class poe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function qse(n){switch(n){case 5126:return Tse;case 35664:return Ase;case 35665:return Rse;case 35666:return Ise;case 35674:return kse;case 35675:return Pse;case 35676:return Ose;case 5124:case 35670:return Lse;case 35667:case 35671:return Fse;case 35668:case 35672:return Nse;case 35669:case 35673:return Bse;case 5125:return Vse;case 36294:return Hse;case 36295:return zse;case 36296:return Use;case 35678:case 36198:case 36298:case 36306:case 35682:return Gse;case 35679:case 36299:case 36307:return Wse;case 35680:case 36300:case 36308:case 36293:return jse;case 36289:case 36303:case 36311:case 36292:return $se}}(t.type)}}class moe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function foe(n){switch(n){case 5126:return Xse;case 35664:return Kse;case 35665:return Yse;case 35666:return Zse;case 35674:return Qse;case 35675:return Jse;case 35676:return eoe;case 5124:case 35670:return toe;case 35667:case 35671:return noe;case 35668:case 35672:return ioe;case 35669:case 35673:return roe;case 5125:return soe;case 36294:return ooe;case 36295:return aoe;case 36296:return loe;case 35678:case 36198:case 36298:case 36306:case 35682:return coe;case 35679:case 36299:case 36307:return uoe;case 35680:case 36300:case 36308:case 36293:return doe;case 36289:case 36303:case 36311:case 36292:return hoe}}(t.type)}}class goe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const fE=/(\w+)(\])?(\[|\.)?/g;function I3(n,e){n.seq.push(e),n.map[e.id]=e}function _oe(n,e,t){const i=n.name,r=i.length;for(fE.lastIndex=0;;){const s=fE.exec(i),o=fE.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){I3(t,void 0===c?new poe(a,n,e):new moe(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new goe(a),I3(t,d)),t=d}}}class by{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);_oe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function k3(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let voe=0;function P3(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function yoe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function woe(n,e){const t=function boe(n){switch(n){case zc:return["Linear","( value )"];case Kn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function xoe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Wp(n){return""!==n}function O3(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function L3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Eoe=/^[ \t]*#include +<([\w\d./]+)>/gm;function pE(n){return n.replace(Eoe,Doe)}function Doe(n,e){const t=Mn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return pE(t)}const Toe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Aoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function F3(n){return n.replace(Aoe,N3).replace(Toe,Roe)}function Roe(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),N3(0,e,t,i)}function N3(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function B3(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Foe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Ioe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function koe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Poe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Ooe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function Loe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function Coe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wp).join("\n")}(t),p=function Moe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,_,v=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[p].filter(Wp).join("\n"),g.length>0&&(g+="\n"),_=[f,p].filter(Wp).join("\n"),_.length>0&&(_+="\n")):(g=[B3(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wp).join("\n"),_=[f,B3(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Mn.tonemapping_pars_fragment:"",0!==t.toneMapping?xoe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mn.encodings_pars_fragment,woe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Wp).join("\n")),o=pE(o),o=O3(o,t),o=L3(o,t),a=pE(a),a=O3(a,t),a=L3(a,t),o=F3(o),a=F3(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=v+_+a,x=k3(r,35633,v+g+o),C=k3(r,35632,b);if(r.attachShader(m,x),r.attachShader(m,C),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const T=r.getProgramInfoLog(m).trim(),B=r.getShaderInfoLog(x).trim(),H=r.getShaderInfoLog(C).trim();let J=!0,ie=!0;if(!1===r.getProgramParameter(m,35714)){J=!1;const z=P3(r,x,"vertex"),te=P3(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+T+"\n"+z+"\n"+te)}else""!==T?console.warn("THREE.WebGLProgram: Program Info Log:",T):(""===B||""===H)&&(ie=!1);ie&&(this.diagnostics={runnable:J,programLog:T,vertexShader:{log:B,prefix:g},fragmentShader:{log:H,prefix:_}})}let A,w;return r.deleteShader(x),r.deleteShader(C),this.getUniforms=function(){return void 0===A&&(A=new by(r,m)),A},this.getAttributes=function(){return void 0===w&&(w=function Soe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,m)),w},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=voe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=C,this}let Noe=0;class Boe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const i=new Voe(e);t.set(e,i)}return t.get(e)}}class Voe{constructor(e){this.id=Noe++,this.code=e,this.usedTimes=0}}function Hoe(n,e,t,i,r,s,o){const a=new KS,l=new Boe,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(w,T,B,H,J){const ie=H.fog,z=J.geometry,V=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?H.environment:null)),j=V&&306===V.mapping?V.image.height:null,q=p[w.type];null!==w.precision&&(f=r.getMaxPrecision(w.precision),f!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",f,"instead."));const $=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,ee=void 0!==$?$.length:0;let ge,Ve,Ge,Mt,Re=0;if(void 0!==z.morphAttributes.position&&(Re=1),void 0!==z.morphAttributes.normal&&(Re=2),void 0!==z.morphAttributes.color&&(Re=3),q){const hn=Wo[q];ge=hn.vertexShader,Ve=hn.fragmentShader}else ge=w.vertexShader,Ve=w.fragmentShader,l.update(w),Ge=l.getVertexShaderID(w),Mt=l.getFragmentShaderID(w);const de=n.getRenderTarget(),Ht=w.clearcoat>0,Tt=w.iridescence>0;return{isWebGL2:u,shaderID:q,shaderName:w.type,vertexShader:ge,fragmentShader:Ve,defines:w.defines,customVertexShaderID:Ge,customFragmentShaderID:Mt,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:f,instancing:!0===J.isInstancedMesh,instancingColor:!0===J.isInstancedMesh&&null!==J.instanceColor,supportsVertexTextures:h,outputEncoding:null===de?n.outputEncoding:!0===de.isXRRenderTarget?de.texture.encoding:zc,map:!!w.map,matcap:!!w.matcap,envMap:!!V,envMapMode:V&&V.mapping,envMapCubeUVHeight:j,lightMap:!!w.lightMap,aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:1===w.normalMapType,tangentSpaceNormalMap:0===w.normalMapType,decodeVideoTexture:!!w.map&&!0===w.map.isVideoTexture&&w.map.encoding===Kn,clearcoat:Ht,clearcoatMap:Ht&&!!w.clearcoatMap,clearcoatRoughnessMap:Ht&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:Ht&&!!w.clearcoatNormalMap,iridescence:Tt,iridescenceMap:Tt&&!!w.iridescenceMap,iridescenceThicknessMap:Tt&&!!w.iridescenceThicknessMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,opaque:!1===w.transparent&&1===w.blending,alphaMap:!!w.alphaMap,alphaTest:w.alphaTest>0,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!z.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!z.attributes.color&&4===z.attributes.color.itemSize,vertexUvs:!!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatMap||w.clearcoatRoughnessMap||w.clearcoatNormalMap||w.iridescenceMap||w.iridescenceThicknessMap||w.displacementMap||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheenColorMap||w.sheenRoughnessMap),uvsVertexOnly:!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatNormalMap||w.iridescenceMap||w.iridescenceThicknessMap||w.transmission>0||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheen>0||w.sheenColorMap||w.sheenRoughnessMap||!w.displacementMap),fog:!!ie,useFog:!0===w.fog,fogExp2:ie&&ie.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===J.isSkinnedMesh,morphTargets:void 0!==z.morphAttributes.position,morphNormals:void 0!==z.morphAttributes.normal,morphColors:void 0!==z.morphAttributes.color,morphTargetsCount:ee,morphTextureStride:Re,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&B.length>0,shadowMapType:n.shadowMap.type,toneMapping:w.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:!!w.depthPacking,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function g(w){const T=[];if(w.shaderID?T.push(w.shaderID):(T.push(w.customVertexShaderID),T.push(w.customFragmentShaderID)),void 0!==w.defines)for(const B in w.defines)T.push(B),T.push(w.defines[B]);return!1===w.isRawShaderMaterial&&(function _(w,T){w.push(T.precision),w.push(T.outputEncoding),w.push(T.envMapMode),w.push(T.envMapCubeUVHeight),w.push(T.combine),w.push(T.vertexUvs),w.push(T.fogExp2),w.push(T.sizeAttenuation),w.push(T.morphTargetsCount),w.push(T.morphAttributeCount),w.push(T.numDirLights),w.push(T.numPointLights),w.push(T.numSpotLights),w.push(T.numHemiLights),w.push(T.numRectAreaLights),w.push(T.numDirLightShadows),w.push(T.numPointLightShadows),w.push(T.numSpotLightShadows),w.push(T.shadowMapType),w.push(T.toneMapping),w.push(T.numClippingPlanes),w.push(T.numClipIntersection),w.push(T.depthPacking)}(T,w),function v(w,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.map&&a.enable(4),T.matcap&&a.enable(5),T.envMap&&a.enable(6),T.lightMap&&a.enable(7),T.aoMap&&a.enable(8),T.emissiveMap&&a.enable(9),T.bumpMap&&a.enable(10),T.normalMap&&a.enable(11),T.objectSpaceNormalMap&&a.enable(12),T.tangentSpaceNormalMap&&a.enable(13),T.clearcoat&&a.enable(14),T.clearcoatMap&&a.enable(15),T.clearcoatRoughnessMap&&a.enable(16),T.clearcoatNormalMap&&a.enable(17),T.iridescence&&a.enable(18),T.iridescenceMap&&a.enable(19),T.iridescenceThicknessMap&&a.enable(20),T.displacementMap&&a.enable(21),T.specularMap&&a.enable(22),T.roughnessMap&&a.enable(23),T.metalnessMap&&a.enable(24),T.gradientMap&&a.enable(25),T.alphaMap&&a.enable(26),T.alphaTest&&a.enable(27),T.vertexColors&&a.enable(28),T.vertexAlphas&&a.enable(29),T.vertexUvs&&a.enable(30),T.vertexTangents&&a.enable(31),T.uvsVertexOnly&&a.enable(32),T.fog&&a.enable(33),w.push(a.mask),a.disableAll(),T.useFog&&a.enable(0),T.flatShading&&a.enable(1),T.logarithmicDepthBuffer&&a.enable(2),T.skinning&&a.enable(3),T.morphTargets&&a.enable(4),T.morphNormals&&a.enable(5),T.morphColors&&a.enable(6),T.premultipliedAlpha&&a.enable(7),T.shadowMapEnabled&&a.enable(8),T.physicallyCorrectLights&&a.enable(9),T.doubleSided&&a.enable(10),T.flipSided&&a.enable(11),T.useDepthPacking&&a.enable(12),T.dithering&&a.enable(13),T.specularIntensityMap&&a.enable(14),T.specularColorMap&&a.enable(15),T.transmission&&a.enable(16),T.transmissionMap&&a.enable(17),T.thicknessMap&&a.enable(18),T.sheen&&a.enable(19),T.sheenColorMap&&a.enable(20),T.sheenRoughnessMap&&a.enable(21),T.decodeVideoTexture&&a.enable(22),T.opaque&&a.enable(23),w.push(a.mask)}(T,w),T.push(n.outputEncoding)),T.push(w.customProgramCacheKey),T.join()},getUniforms:function y(w){const T=p[w.type];let B;return B=T?oie.clone(Wo[T].uniforms):w.uniforms,B},acquireProgram:function b(w,T){let B;for(let H=0,J=c.length;H<J;H++){const ie=c[H];if(ie.cacheKey===T){B=ie,++B.usedTimes;break}}return void 0===B&&(B=new Foe(n,T,w,s),c.push(B)),B},releaseProgram:function x(w){if(0==--w.usedTimes){const T=c.indexOf(w);c[T]=c[c.length-1],c.pop(),w.destroy()}},releaseShaderCache:function C(w){l.remove(w)},programs:c,dispose:function A(){l.dispose()}}}function zoe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function Uoe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function V3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function H3(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,m,g){let _=n[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},n[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=m,_.group=g),e++,_}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?i.push(_):!0===f.transparent?r.push(_):t.push(_)},unshift:function l(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?i.unshift(_):!0===f.transparent?r.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||Uoe),i.length>1&&i.sort(h||V3),r.length>1&&r.sort(h||V3)}}}function Goe(){let n=new WeakMap;return{get:function e(i,r){let s;return!1===n.has(i)?(s=new H3,n.set(i,[s])):r>=n.get(i).length?(s=new H3,n.get(i).push(s)):s=n.get(i)[r],s},dispose:function t(){n=new WeakMap}}}function Woe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new et};break;case"SpotLight":t={position:new k,direction:new k,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new et,groundColor:new et};break;case"RectAreaLight":t={color:new et,position:new k,halfWidth:new k,halfHeight:new k}}return n[e.id]=t,t}}}let $oe=0;function qoe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function Xoe(n,e){const t=new Woe,i=function joe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new k);const s=new k,o=new dn,a=new dn;return{setup:function l(u,d){let h=0,f=0,p=0;for(let T=0;T<9;T++)r.probe[T].set(0,0,0);let m=0,g=0,_=0,v=0,y=0,b=0,x=0,C=0;u.sort(qoe);const A=!0!==d?Math.PI:1;for(let T=0,B=u.length;T<B;T++){const H=u[T],J=H.color,ie=H.intensity,z=H.distance,te=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)h+=J.r*ie*A,f+=J.g*ie*A,p+=J.b*ie*A;else if(H.isLightProbe)for(let V=0;V<9;V++)r.probe[V].addScaledVector(H.sh.coefficients[V],ie);else if(H.isDirectionalLight){const V=t.get(H);if(V.color.copy(H.color).multiplyScalar(H.intensity*A),H.castShadow){const j=H.shadow,q=i.get(H);q.shadowBias=j.bias,q.shadowNormalBias=j.normalBias,q.shadowRadius=j.radius,q.shadowMapSize=j.mapSize,r.directionalShadow[m]=q,r.directionalShadowMap[m]=te,r.directionalShadowMatrix[m]=H.shadow.matrix,b++}r.directional[m]=V,m++}else if(H.isSpotLight){const V=t.get(H);if(V.position.setFromMatrixPosition(H.matrixWorld),V.color.copy(J).multiplyScalar(ie*A),V.distance=z,V.coneCos=Math.cos(H.angle),V.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),V.decay=H.decay,H.castShadow){const j=H.shadow,q=i.get(H);q.shadowBias=j.bias,q.shadowNormalBias=j.normalBias,q.shadowRadius=j.radius,q.shadowMapSize=j.mapSize,r.spotShadow[_]=q,r.spotShadowMap[_]=te,r.spotShadowMatrix[_]=H.shadow.matrix,C++}r.spot[_]=V,_++}else if(H.isRectAreaLight){const V=t.get(H);V.color.copy(J).multiplyScalar(ie),V.halfWidth.set(.5*H.width,0,0),V.halfHeight.set(0,.5*H.height,0),r.rectArea[v]=V,v++}else if(H.isPointLight){const V=t.get(H);if(V.color.copy(H.color).multiplyScalar(H.intensity*A),V.distance=H.distance,V.decay=H.decay,H.castShadow){const j=H.shadow,q=i.get(H);q.shadowBias=j.bias,q.shadowNormalBias=j.normalBias,q.shadowRadius=j.radius,q.shadowMapSize=j.mapSize,q.shadowCameraNear=j.camera.near,q.shadowCameraFar=j.camera.far,r.pointShadow[g]=q,r.pointShadowMap[g]=te,r.pointShadowMatrix[g]=H.shadow.matrix,x++}r.point[g]=V,g++}else if(H.isHemisphereLight){const V=t.get(H);V.skyColor.copy(H.color).multiplyScalar(ie*A),V.groundColor.copy(H.groundColor).multiplyScalar(ie*A),r.hemi[y]=V,y++}}v>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=it.LTC_FLOAT_1,r.rectAreaLTC2=it.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=it.LTC_HALF_1,r.rectAreaLTC2=it.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const w=r.hash;(w.directionalLength!==m||w.pointLength!==g||w.spotLength!==_||w.rectAreaLength!==v||w.hemiLength!==y||w.numDirectionalShadows!==b||w.numPointShadows!==x||w.numSpotShadows!==C)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=v,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotShadowMatrix.length=C,w.directionalLength=m,w.pointLength=g,w.spotLength=_,w.rectAreaLength=v,w.hemiLength=y,w.numDirectionalShadows=b,w.numPointShadows=x,w.numSpotShadows=C,r.version=$oe++)},setupView:function c(u,d){let h=0,f=0,p=0,m=0,g=0;const _=d.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const b=u[v];if(b.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),h++}else if(b.isSpotLight){const x=r.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),p++}else if(b.isRectAreaLight){const x=r.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),f++}else if(b.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(_),g++}}},state:r}}function z3(n,e){const t=new Xoe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(i,d)},setupLightsView:function c(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function Koe(n,e){let t=new WeakMap;return{get:function i(s,o=0){let a;return!1===t.has(s)?(a=new z3(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new z3(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function r(){t=new WeakMap}}}class U3 extends yo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class G3 extends yo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new k,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Qoe(n,e,t){let i=new lE;const r=new Ce,s=new Ce,o=new Yn,a=new U3({depthPacking:3201}),l=new G3,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Rl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new bn;p.setAttribute("position",new Xi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ur(p,h),g=this;function _(b,x){const C=e.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===b.mapPass&&(b.mapPass=new $c(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(x,null,C,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(x,null,C,f,m,null)}function v(b,x,C,A,w,T){let B=null;const H=!0===C.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(B=void 0!==H?H:!0===C.isPointLight?l:a,n.localClippingEnabled&&!0===x.clipShadows&&Array.isArray(x.clippingPlanes)&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0){const J=B.uuid,ie=x.uuid;let z=c[J];void 0===z&&(z={},c[J]=z);let te=z[ie];void 0===te&&(te=B.clone(),z[ie]=te),B=te}return B.visible=x.visible,B.wireframe=x.wireframe,B.side=3===T?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:d[x.side],B.alphaMap=x.alphaMap,B.alphaTest=x.alphaTest,B.clipShadows=x.clipShadows,B.clippingPlanes=x.clippingPlanes,B.clipIntersection=x.clipIntersection,B.displacementMap=x.displacementMap,B.displacementScale=x.displacementScale,B.displacementBias=x.displacementBias,B.wireframeLinewidth=x.wireframeLinewidth,B.linewidth=x.linewidth,!0===C.isPointLight&&!0===B.isMeshDistanceMaterial&&(B.referencePosition.setFromMatrixPosition(C.matrixWorld),B.nearDistance=A,B.farDistance=w),B}function y(b,x,C,A,w){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===w)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,b.matrixWorld);const H=e.update(b),J=b.material;if(Array.isArray(J)){const ie=H.groups;for(let z=0,te=ie.length;z<te;z++){const V=ie[z],j=J[V.materialIndex];if(j&&j.visible){const q=v(b,j,A,C.near,C.far,w);n.renderBufferDirect(C,null,H,q,b,V)}}}else if(J.visible){const ie=v(b,J,A,C.near,C.far,w);n.renderBufferDirect(C,null,H,ie,b,null)}}const B=b.children;for(let H=0,J=B.length;H<J;H++)y(B[H],x,C,A,w)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,C){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const A=n.getRenderTarget(),w=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),B=n.state;B.setBlending(0),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let H=0,J=b.length;H<J;H++){const ie=b[H],z=ie.shadow;if(void 0===z){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(!1===z.autoUpdate&&!1===z.needsUpdate)continue;r.copy(z.mapSize);const te=z.getFrameExtents();r.multiply(te),s.copy(z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/te.x),r.x=s.x*te.x,z.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/te.y),r.y=s.y*te.y,z.mapSize.y=s.y)),null===z.map&&(z.map=new $c(r.x,r.y,3!==this.type?{minFilter:$i,magFilter:$i}:{}),z.map.texture.name=ie.name+".shadowMap",z.camera.updateProjectionMatrix()),n.setRenderTarget(z.map),n.clear();const V=z.getViewportCount();for(let j=0;j<V;j++){const q=z.getViewport(j);o.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),B.viewport(o),z.updateMatrices(ie,j),i=z.getFrustum(),y(x,C,z.camera,ie,this.type)}!0!==z.isPointLightShadow&&3===this.type&&_(z,C),z.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(A,w,T)}}function Joe(n,e,t){const i=t.isWebGL2,a=new function r(){let U=!1;const rt=new Yn;let Ze=null;const $t=new Yn(0,0,0,0);return{setMask:function(yt){Ze!==yt&&!U&&(n.colorMask(yt,yt,yt,yt),Ze=yt)},setLocked:function(yt){U=yt},setClear:function(yt,sn,We,on,Zn){!0===Zn&&(yt*=on,sn*=on,We*=on),rt.set(yt,sn,We,on),!1===$t.equals(rt)&&(n.clearColor(yt,sn,We,on),$t.copy(rt))},reset:function(){U=!1,Ze=null,$t.set(-1,0,0,0)}}},l=new function s(){let U=!1,rt=null,Ze=null,$t=null;return{setTest:function(yt){yt?Mt(2929):de(2929)},setMask:function(yt){rt!==yt&&!U&&(n.depthMask(yt),rt=yt)},setFunc:function(yt){if(Ze!==yt){if(yt)switch(yt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Ze=yt}},setLocked:function(yt){U=yt},setClear:function(yt){$t!==yt&&(n.clearDepth(yt),$t=yt)},reset:function(){U=!1,rt=null,Ze=null,$t=null}}},c=new function o(){let U=!1,rt=null,Ze=null,$t=null,yt=null,sn=null,We=null,on=null,Zn=null;return{setTest:function(Qn){U||(Qn?Mt(2960):de(2960))},setMask:function(Qn){rt!==Qn&&!U&&(n.stencilMask(Qn),rt=Qn)},setFunc:function(Qn,$r,Ko){(Ze!==Qn||$t!==$r||yt!==Ko)&&(n.stencilFunc(Qn,$r,Ko),Ze=Qn,$t=$r,yt=Ko)},setOp:function(Qn,$r,Ko){(sn!==Qn||We!==$r||on!==Ko)&&(n.stencilOp(Qn,$r,Ko),sn=Qn,We=$r,on=Ko)},setLocked:function(Qn){U=Qn},setClear:function(Qn){Zn!==Qn&&(n.clearStencil(Qn),Zn=Qn)},reset:function(){U=!1,rt=null,Ze=null,$t=null,yt=null,sn=null,We=null,on=null,Zn=null}}};let u={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,y=null,b=null,x=null,C=null,A=!1,w=null,T=null,B=null,H=null,J=null;const ie=n.getParameter(35661);let z=!1,te=0;const V=n.getParameter(7938);-1!==V.indexOf("WebGL")?(te=parseFloat(/^WebGL (\d)/.exec(V)[1]),z=te>=1):-1!==V.indexOf("OpenGL ES")&&(te=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),z=te>=2);let j=null,q={};const $=n.getParameter(3088),ee=n.getParameter(2978),Re=(new Yn).fromArray($),ge=(new Yn).fromArray(ee);function Ve(U,rt,Ze){const $t=new Uint8Array(4),yt=n.createTexture();n.bindTexture(U,yt),n.texParameteri(U,10241,9728),n.texParameteri(U,10240,9728);for(let sn=0;sn<Ze;sn++)n.texImage2D(rt+sn,0,6408,1,1,0,6408,5121,$t);return yt}const Ge={};function Mt(U){!0!==u[U]&&(n.enable(U),u[U]=!0)}function de(U){!1!==u[U]&&(n.disable(U),u[U]=!1)}Ge[3553]=Ve(3553,3553,1),Ge[34067]=Ve(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Mt(2929),l.setFunc(3),Xe(!1),Ct(1),Mt(2884),Me(0);const qe={100:32774,101:32778,102:32779};if(i)qe[103]=32775,qe[104]=32776;else{const U=e.get("EXT_blend_minmax");null!==U&&(qe[103]=U.MIN_EXT,qe[104]=U.MAX_EXT)}const hn={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Me(U,rt,Ze,$t,yt,sn,We,on){if(0!==U){if(!1===m&&(Mt(3042),m=!0),5===U)yt=yt||rt,sn=sn||Ze,We=We||$t,(rt!==_||yt!==b)&&(n.blendEquationSeparate(qe[rt],qe[yt]),_=rt,b=yt),(Ze!==v||$t!==y||sn!==x||We!==C)&&(n.blendFuncSeparate(hn[Ze],hn[$t],hn[sn],hn[We]),v=Ze,y=$t,x=sn,C=We),g=U,A=null;else if(U!==g||on!==A){if((100!==_||100!==b)&&(n.blendEquation(32774),_=100,b=100),on)switch(U){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",U)}else switch(U){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",U)}v=null,y=null,x=null,C=null,g=U,A=on}}else!0===m&&(de(3042),m=!1)}function Xe(U){w!==U&&(n.frontFace(U?2304:2305),w=U)}function Ct(U){0!==U?(Mt(2884),U!==T&&n.cullFace(1===U?1029:2===U?1028:1032)):de(2884),T=U}function pn(U,rt,Ze){U?(Mt(32823),(H!==rt||J!==Ze)&&(n.polygonOffset(rt,Ze),H=rt,J=Ze)):de(32823)}function Bt(U){void 0===U&&(U=33984+ie-1),j!==U&&(n.activeTexture(U),j=U)}return{buffers:{color:a,depth:l,stencil:c},enable:Mt,disable:de,bindFramebuffer:function Yt(U,rt){return d[U]!==rt&&(n.bindFramebuffer(U,rt),d[U]=rt,i&&(36009===U&&(d[36160]=rt),36160===U&&(d[36009]=rt)),!0)},drawBuffers:function Ht(U,rt){let Ze=f,$t=!1;if(U)if(Ze=h.get(rt),void 0===Ze&&(Ze=[],h.set(rt,Ze)),U.isWebGLMultipleRenderTargets){const yt=U.texture;if(Ze.length!==yt.length||36064!==Ze[0]){for(let sn=0,We=yt.length;sn<We;sn++)Ze[sn]=36064+sn;Ze.length=yt.length,$t=!0}}else 36064!==Ze[0]&&(Ze[0]=36064,$t=!0);else 1029!==Ze[0]&&(Ze[0]=1029,$t=!0);$t&&(t.isWebGL2?n.drawBuffers(Ze):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ze))},useProgram:function Tt(U){return p!==U&&(n.useProgram(U),p=U,!0)},setBlending:Me,setMaterial:function ye(U,rt){2===U.side?de(2884):Mt(2884);let Ze=1===U.side;rt&&(Ze=!Ze),Xe(Ze),1===U.blending&&!1===U.transparent?Me(0):Me(U.blending,U.blendEquation,U.blendSrc,U.blendDst,U.blendEquationAlpha,U.blendSrcAlpha,U.blendDstAlpha,U.premultipliedAlpha),l.setFunc(U.depthFunc),l.setTest(U.depthTest),l.setMask(U.depthWrite),a.setMask(U.colorWrite);const $t=U.stencilWrite;c.setTest($t),$t&&(c.setMask(U.stencilWriteMask),c.setFunc(U.stencilFunc,U.stencilRef,U.stencilFuncMask),c.setOp(U.stencilFail,U.stencilZFail,U.stencilZPass)),pn(U.polygonOffset,U.polygonOffsetFactor,U.polygonOffsetUnits),!0===U.alphaToCoverage?Mt(32926):de(32926)},setFlipSided:Xe,setCullFace:Ct,setLineWidth:function lt(U){U!==B&&(z&&n.lineWidth(U),B=U)},setPolygonOffset:pn,setScissorTest:function jt(U){U?Mt(3089):de(3089)},activeTexture:Bt,bindTexture:function _i(U,rt){null===j&&Bt();let Ze=q[j];void 0===Ze&&(Ze={type:void 0,texture:void 0},q[j]=Ze),(Ze.type!==U||Ze.texture!==rt)&&(n.bindTexture(U,rt||Ge[U]),Ze.type=U,Ze.texture=rt)},unbindTexture:function ai(){const U=q[j];void 0!==U&&void 0!==U.type&&(n.bindTexture(U.type,null),U.type=void 0,U.texture=void 0)},compressedTexImage2D:function L(){try{n.compressedTexImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage2D:function rn(){try{n.texImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage3D:function ae(){try{n.texImage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texStorage2D:function $e(){try{n.texStorage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texStorage3D:function ct(){try{n.texStorage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texSubImage2D:function I(){try{n.texSubImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texSubImage3D:function oe(){try{n.texSubImage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},compressedTexSubImage2D:function Be(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},scissor:function At(U){!1===Re.equals(U)&&(n.scissor(U.x,U.y,U.z,U.w),Re.copy(U))},viewport:function _t(U){!1===ge.equals(U)&&(n.viewport(U.x,U.y,U.z,U.w),ge.copy(U))},reset:function gt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},j=null,q={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,y=null,b=null,x=null,C=null,A=!1,w=null,T=null,B=null,H=null,J=null,Re.set(0,0,n.canvas.width,n.canvas.height),ge.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function eae(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(L,I){return _?new OffscreenCanvas(L,I):Bp("canvas")}function y(L,I,oe,Be){let $e=1;if((L.width>Be||L.height>Be)&&($e=Be/Math.max(L.width,L.height)),$e<1||!0===I){if(typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&L instanceof ImageBitmap){const ct=I?Kv:Math.floor,rn=ct($e*L.width),ae=ct($e*L.height);void 0===m&&(m=v(rn,ae));const At=oe?v(rn,ae):m;return At.width=rn,At.height=ae,At.getContext("2d").drawImage(L,0,0,rn,ae),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+L.width+"x"+L.height+") to ("+rn+"x"+ae+")."),At}return"data"in L&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+L.width+"x"+L.height+")."),L}return L}function b(L){return NS(L.width)&&NS(L.height)}function C(L,I){return L.generateMipmaps&&I&&L.minFilter!==$i&&L.minFilter!==Ei}function A(L){n.generateMipmap(L)}function w(L,I,oe,Be,$e=!1){if(!1===a)return I;if(null!==L){if(void 0!==n[L])return n[L];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+L+"'")}let ct=I;return 6403===I&&(5126===oe&&(ct=33326),5131===oe&&(ct=33325),5121===oe&&(ct=33321)),33319===I&&(5126===oe&&(ct=33328),5131===oe&&(ct=33327),5121===oe&&(ct=33323)),6408===I&&(5126===oe&&(ct=34836),5131===oe&&(ct=34842),5121===oe&&(ct=Be===Kn&&!1===$e?35907:32856),32819===oe&&(ct=32854),32820===oe&&(ct=32855)),(33325===ct||33326===ct||33327===ct||33328===ct||34842===ct||34836===ct)&&e.get("EXT_color_buffer_float"),ct}function T(L,I,oe){return!0===C(L,oe)||L.isFramebufferTexture&&L.minFilter!==$i&&L.minFilter!==Ei?Math.log2(Math.max(I.width,I.height))+1:void 0!==L.mipmaps&&L.mipmaps.length>0?L.mipmaps.length:L.isCompressedTexture&&Array.isArray(L.image)?I.mipmaps.length:1}function B(L){return L===$i||1004===L||1005===L?9728:9729}function H(L){const I=L.target;I.removeEventListener("dispose",H),function ie(L){const I=i.get(L);if(void 0===I.__webglInit)return;const oe=L.source,Be=g.get(oe);if(Be){const $e=Be[I.__cacheKey];$e.usedTimes--,0===$e.usedTimes&&z(L),0===Object.keys(Be).length&&g.delete(oe)}i.remove(L)}(I),I.isVideoTexture&&p.delete(I)}function J(L){const I=L.target;I.removeEventListener("dispose",J),function te(L){const I=L.texture,oe=i.get(L),Be=i.get(I);if(void 0!==Be.__webglTexture&&(n.deleteTexture(Be.__webglTexture),o.memory.textures--),L.depthTexture&&L.depthTexture.dispose(),L.isWebGLCubeRenderTarget)for(let $e=0;$e<6;$e++)n.deleteFramebuffer(oe.__webglFramebuffer[$e]),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer[$e]);else{if(n.deleteFramebuffer(oe.__webglFramebuffer),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let $e=0;$e<oe.__webglColorRenderbuffer.length;$e++)oe.__webglColorRenderbuffer[$e]&&n.deleteRenderbuffer(oe.__webglColorRenderbuffer[$e]);oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(L.isWebGLMultipleRenderTargets)for(let $e=0,ct=I.length;$e<ct;$e++){const rn=i.get(I[$e]);rn.__webglTexture&&(n.deleteTexture(rn.__webglTexture),o.memory.textures--),i.remove(I[$e])}i.remove(I),i.remove(L)}(I)}function z(L){const I=i.get(L);n.deleteTexture(I.__webglTexture),delete g.get(L.source)[I.__cacheKey],o.memory.textures--}let V=0;function ee(L,I){const oe=i.get(L);if(L.isVideoTexture&&function _i(L){const I=o.render.frame;p.get(L)!==I&&(p.set(L,I),L.update())}(L),!1===L.isRenderTargetTexture&&L.version>0&&oe.__version!==L.version){const Be=L.image;if(null===Be)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Be.complete)return void Ht(oe,L,I);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+I),t.bindTexture(3553,oe.__webglTexture)}const Ge={[Nc]:10497,[zr]:33071,1002:33648},Mt={[$i]:9728,1004:9984,1005:9986,[Ei]:9729,1007:9985,[wl]:9987};function de(L,I,oe){if(oe?(n.texParameteri(L,10242,Ge[I.wrapS]),n.texParameteri(L,10243,Ge[I.wrapT]),(32879===L||35866===L)&&n.texParameteri(L,32882,Ge[I.wrapR]),n.texParameteri(L,10240,Mt[I.magFilter]),n.texParameteri(L,10241,Mt[I.minFilter])):(n.texParameteri(L,10242,33071),n.texParameteri(L,10243,33071),(32879===L||35866===L)&&n.texParameteri(L,32882,33071),(I.wrapS!==zr||I.wrapT!==zr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(L,10240,B(I.magFilter)),n.texParameteri(L,10241,B(I.minFilter)),I.minFilter!==$i&&I.minFilter!==Ei&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Be=e.get("EXT_texture_filter_anisotropic");if(I.type===xl&&!1===e.has("OES_texture_float_linear")||!1===a&&I.type===Op&&!1===e.has("OES_texture_half_float_linear"))return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(L,Be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function Yt(L,I){let oe=!1;void 0===L.__webglInit&&(L.__webglInit=!0,I.addEventListener("dispose",H));const Be=I.source;let $e=g.get(Be);void 0===$e&&($e={},g.set(Be,$e));const ct=function $(L){const I=[];return I.push(L.wrapS),I.push(L.wrapT),I.push(L.magFilter),I.push(L.minFilter),I.push(L.anisotropy),I.push(L.internalFormat),I.push(L.format),I.push(L.type),I.push(L.generateMipmaps),I.push(L.premultiplyAlpha),I.push(L.flipY),I.push(L.unpackAlignment),I.push(L.encoding),I.join()}(I);if(ct!==L.__cacheKey){void 0===$e[ct]&&($e[ct]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,oe=!0),$e[ct].usedTimes++;const rn=$e[L.__cacheKey];void 0!==rn&&($e[L.__cacheKey].usedTimes--,0===rn.usedTimes&&z(I)),L.__cacheKey=ct,L.__webglTexture=$e[ct].texture}return oe}function Ht(L,I,oe){let Be=3553;I.isDataArrayTexture&&(Be=35866),I.isData3DTexture&&(Be=32879);const $e=Yt(L,I),ct=I.source;if(t.activeTexture(33984+oe),t.bindTexture(Be,L.__webglTexture),ct.version!==ct.__currentVersion||!0===$e){n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const rn=function x(L){return!a&&(L.wrapS!==zr||L.wrapT!==zr||L.minFilter!==$i&&L.minFilter!==Ei)}(I)&&!1===b(I.image);let ae=y(I.image,rn,!1,u);ae=ai(I,ae);const At=b(ae)||a,_t=s.convert(I.format,I.encoding);let rt,gt=s.convert(I.type),U=w(I.internalFormat,_t,gt,I.encoding,I.isVideoTexture);de(Be,I,At);const Ze=I.mipmaps,$t=a&&!0!==I.isVideoTexture,yt=void 0===ct.__currentVersion||!0===$e,sn=T(I,ae,At);if(I.isDepthTexture)U=6402,a?U=I.type===xl?36012:I.type===Vc?33190:I.type===jd?35056:33189:I.type===xl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===Hc&&6402===U&&1012!==I.type&&I.type!==Vc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Vc,gt=s.convert(I.type)),I.format===$d&&6402===U&&(U=34041,I.type!==jd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=jd,gt=s.convert(I.type))),yt&&($t?t.texStorage2D(3553,1,U,ae.width,ae.height):t.texImage2D(3553,0,U,ae.width,ae.height,0,_t,gt,null));else if(I.isDataTexture)if(Ze.length>0&&At){$t&&yt&&t.texStorage2D(3553,sn,U,Ze[0].width,Ze[0].height);for(let We=0,on=Ze.length;We<on;We++)rt=Ze[We],$t?t.texSubImage2D(3553,We,0,0,rt.width,rt.height,_t,gt,rt.data):t.texImage2D(3553,We,U,rt.width,rt.height,0,_t,gt,rt.data);I.generateMipmaps=!1}else $t?(yt&&t.texStorage2D(3553,sn,U,ae.width,ae.height),t.texSubImage2D(3553,0,0,0,ae.width,ae.height,_t,gt,ae.data)):t.texImage2D(3553,0,U,ae.width,ae.height,0,_t,gt,ae.data);else if(I.isCompressedTexture){$t&&yt&&t.texStorage2D(3553,sn,U,Ze[0].width,Ze[0].height);for(let We=0,on=Ze.length;We<on;We++)rt=Ze[We],I.format!==ho?null!==_t?$t?t.compressedTexSubImage2D(3553,We,0,0,rt.width,rt.height,_t,rt.data):t.compressedTexImage2D(3553,We,U,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$t?t.texSubImage2D(3553,We,0,0,rt.width,rt.height,_t,gt,rt.data):t.texImage2D(3553,We,U,rt.width,rt.height,0,_t,gt,rt.data)}else if(I.isDataArrayTexture)$t?(yt&&t.texStorage3D(35866,sn,U,ae.width,ae.height,ae.depth),t.texSubImage3D(35866,0,0,0,0,ae.width,ae.height,ae.depth,_t,gt,ae.data)):t.texImage3D(35866,0,U,ae.width,ae.height,ae.depth,0,_t,gt,ae.data);else if(I.isData3DTexture)$t?(yt&&t.texStorage3D(32879,sn,U,ae.width,ae.height,ae.depth),t.texSubImage3D(32879,0,0,0,0,ae.width,ae.height,ae.depth,_t,gt,ae.data)):t.texImage3D(32879,0,U,ae.width,ae.height,ae.depth,0,_t,gt,ae.data);else if(I.isFramebufferTexture){if(yt)if($t)t.texStorage2D(3553,sn,U,ae.width,ae.height);else{let We=ae.width,on=ae.height;for(let Zn=0;Zn<sn;Zn++)t.texImage2D(3553,Zn,U,We,on,0,_t,gt,null),We>>=1,on>>=1}}else if(Ze.length>0&&At){$t&&yt&&t.texStorage2D(3553,sn,U,Ze[0].width,Ze[0].height);for(let We=0,on=Ze.length;We<on;We++)rt=Ze[We],$t?t.texSubImage2D(3553,We,0,0,_t,gt,rt):t.texImage2D(3553,We,U,_t,gt,rt);I.generateMipmaps=!1}else $t?(yt&&t.texStorage2D(3553,sn,U,ae.width,ae.height),t.texSubImage2D(3553,0,0,0,_t,gt,ae)):t.texImage2D(3553,0,U,_t,gt,ae);C(I,At)&&A(Be),ct.__currentVersion=ct.version,I.onUpdate&&I.onUpdate(I)}L.__version=I.version}function qe(L,I,oe,Be,$e){const ct=s.convert(oe.format,oe.encoding),rn=s.convert(oe.type),ae=w(oe.internalFormat,ct,rn,oe.encoding);i.get(I).__hasExternalTextures||(32879===$e||35866===$e?t.texImage3D($e,0,ae,I.width,I.height,I.depth,0,ct,rn,null):t.texImage2D($e,0,ae,I.width,I.height,0,ct,rn,null)),t.bindFramebuffer(36160,L),Bt(I)?h.framebufferTexture2DMultisampleEXT(36160,Be,$e,i.get(oe).__webglTexture,0,jt(I)):n.framebufferTexture2D(36160,Be,$e,i.get(oe).__webglTexture,0),t.bindFramebuffer(36160,null)}function hn(L,I,oe){if(n.bindRenderbuffer(36161,L),I.depthBuffer&&!I.stencilBuffer){let Be=33189;if(oe||Bt(I)){const $e=I.depthTexture;$e&&$e.isDepthTexture&&($e.type===xl?Be=36012:$e.type===Vc&&(Be=33190));const ct=jt(I);Bt(I)?h.renderbufferStorageMultisampleEXT(36161,ct,Be,I.width,I.height):n.renderbufferStorageMultisample(36161,ct,Be,I.width,I.height)}else n.renderbufferStorage(36161,Be,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,L)}else if(I.depthBuffer&&I.stencilBuffer){const Be=jt(I);oe&&!1===Bt(I)?n.renderbufferStorageMultisample(36161,Be,35056,I.width,I.height):Bt(I)?h.renderbufferStorageMultisampleEXT(36161,Be,35056,I.width,I.height):n.renderbufferStorage(36161,34041,I.width,I.height),n.framebufferRenderbuffer(36160,33306,36161,L)}else{const Be=!0===I.isWebGLMultipleRenderTargets?I.texture:[I.texture];for(let $e=0;$e<Be.length;$e++){const ct=Be[$e],rn=s.convert(ct.format,ct.encoding),ae=s.convert(ct.type),At=w(ct.internalFormat,rn,ae,ct.encoding),_t=jt(I);oe&&!1===Bt(I)?n.renderbufferStorageMultisample(36161,_t,At,I.width,I.height):Bt(I)?h.renderbufferStorageMultisampleEXT(36161,_t,At,I.width,I.height):n.renderbufferStorage(36161,At,I.width,I.height)}}n.bindRenderbuffer(36161,null)}function ye(L){const I=i.get(L),oe=!0===L.isWebGLCubeRenderTarget;if(L.depthTexture&&!I.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");!function Me(L,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,L),!I.depthTexture||!I.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),ee(I.depthTexture,0);const Be=i.get(I.depthTexture).__webglTexture,$e=jt(I);if(I.depthTexture.format===Hc)Bt(I)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Be,0,$e):n.framebufferTexture2D(36160,36096,3553,Be,0);else{if(I.depthTexture.format!==$d)throw new Error("Unknown depthTexture format");Bt(I)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Be,0,$e):n.framebufferTexture2D(36160,33306,3553,Be,0)}}(I.__webglFramebuffer,L)}else if(oe){I.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)t.bindFramebuffer(36160,I.__webglFramebuffer[Be]),I.__webglDepthbuffer[Be]=n.createRenderbuffer(),hn(I.__webglDepthbuffer[Be],L,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),hn(I.__webglDepthbuffer,L,!1);t.bindFramebuffer(36160,null)}function jt(L){return Math.min(d,L.samples)}function Bt(L){const I=i.get(L);return a&&L.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==I.__useRenderToTexture}function ai(L,I){const oe=L.encoding,Be=L.format,$e=L.type;return!0===L.isCompressedTexture||!0===L.isVideoTexture||1035===L.format||oe!==zc&&(oe===Kn?!1===a?!0===e.has("EXT_sRGB")&&Be===ho?(L.format=1035,L.minFilter=Ei,L.generateMipmaps=!1):I=Q2.sRGBToLinear(I):(Be!==ho||$e!==Bc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",oe)),I}this.allocateTextureUnit=function q(){const L=V;return L>=l&&console.warn("THREE.WebGLTextures: Trying to use "+L+" texture units while this GPU supports only "+l),V+=1,L},this.resetTextureUnits=function j(){V=0},this.setTexture2D=ee,this.setTexture2DArray=function Re(L,I){const oe=i.get(L);L.version>0&&oe.__version!==L.version?Ht(oe,L,I):(t.activeTexture(33984+I),t.bindTexture(35866,oe.__webglTexture))},this.setTexture3D=function ge(L,I){const oe=i.get(L);L.version>0&&oe.__version!==L.version?Ht(oe,L,I):(t.activeTexture(33984+I),t.bindTexture(32879,oe.__webglTexture))},this.setTextureCube=function Ve(L,I){const oe=i.get(L);L.version>0&&oe.__version!==L.version?function Tt(L,I,oe){if(6!==I.image.length)return;const Be=Yt(L,I),$e=I.source;if(t.activeTexture(33984+oe),t.bindTexture(34067,L.__webglTexture),$e.version!==$e.__currentVersion||!0===Be){n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const ct=I.isCompressedTexture||I.image[0].isCompressedTexture,rn=I.image[0]&&I.image[0].isDataTexture,ae=[];for(let We=0;We<6;We++)ae[We]=ct||rn?rn?I.image[We].image:I.image[We]:y(I.image[We],!1,!0,c),ae[We]=ai(I,ae[We]);const At=ae[0],_t=b(At)||a,gt=s.convert(I.format,I.encoding),U=s.convert(I.type),rt=w(I.internalFormat,gt,U,I.encoding),Ze=a&&!0!==I.isVideoTexture,$t=void 0===$e.__currentVersion||!0===Be;let sn,yt=T(I,At,_t);if(de(34067,I,_t),ct){Ze&&$t&&t.texStorage2D(34067,yt,rt,At.width,At.height);for(let We=0;We<6;We++){sn=ae[We].mipmaps;for(let on=0;on<sn.length;on++){const Zn=sn[on];I.format!==ho?null!==gt?Ze?t.compressedTexSubImage2D(34069+We,on,0,0,Zn.width,Zn.height,gt,Zn.data):t.compressedTexImage2D(34069+We,on,rt,Zn.width,Zn.height,0,Zn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?t.texSubImage2D(34069+We,on,0,0,Zn.width,Zn.height,gt,U,Zn.data):t.texImage2D(34069+We,on,rt,Zn.width,Zn.height,0,gt,U,Zn.data)}}}else{sn=I.mipmaps,Ze&&$t&&(sn.length>0&&yt++,t.texStorage2D(34067,yt,rt,ae[0].width,ae[0].height));for(let We=0;We<6;We++)if(rn){Ze?t.texSubImage2D(34069+We,0,0,0,ae[We].width,ae[We].height,gt,U,ae[We].data):t.texImage2D(34069+We,0,rt,ae[We].width,ae[We].height,0,gt,U,ae[We].data);for(let on=0;on<sn.length;on++){const Qn=sn[on].image[We].image;Ze?t.texSubImage2D(34069+We,on+1,0,0,Qn.width,Qn.height,gt,U,Qn.data):t.texImage2D(34069+We,on+1,rt,Qn.width,Qn.height,0,gt,U,Qn.data)}}else{Ze?t.texSubImage2D(34069+We,0,0,0,gt,U,ae[We]):t.texImage2D(34069+We,0,rt,gt,U,ae[We]);for(let on=0;on<sn.length;on++){const Zn=sn[on];Ze?t.texSubImage2D(34069+We,on+1,0,0,gt,U,Zn.image[We]):t.texImage2D(34069+We,on+1,rt,gt,U,Zn.image[We])}}}C(I,_t)&&A(34067),$e.__currentVersion=$e.version,I.onUpdate&&I.onUpdate(I)}L.__version=I.version}(oe,L,I):(t.activeTexture(33984+I),t.bindTexture(34067,oe.__webglTexture))},this.rebindTextures=function Xe(L,I,oe){const Be=i.get(L);void 0!==I&&qe(Be.__webglFramebuffer,L,L.texture,36064,3553),void 0!==oe&&ye(L)},this.setupRenderTarget=function Ct(L){const I=L.texture,oe=i.get(L),Be=i.get(I);L.addEventListener("dispose",J),!0!==L.isWebGLMultipleRenderTargets&&(void 0===Be.__webglTexture&&(Be.__webglTexture=n.createTexture()),Be.__version=I.version,o.memory.textures++);const $e=!0===L.isWebGLCubeRenderTarget,ct=!0===L.isWebGLMultipleRenderTargets,rn=b(L)||a;if($e){oe.__webglFramebuffer=[];for(let ae=0;ae<6;ae++)oe.__webglFramebuffer[ae]=n.createFramebuffer()}else{if(oe.__webglFramebuffer=n.createFramebuffer(),ct)if(r.drawBuffers){const ae=L.texture;for(let At=0,_t=ae.length;At<_t;At++){const gt=i.get(ae[At]);void 0===gt.__webglTexture&&(gt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&L.samples>0&&!1===Bt(L)){const ae=ct?I:[I];oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer);for(let At=0;At<ae.length;At++){const _t=ae[At];oe.__webglColorRenderbuffer[At]=n.createRenderbuffer(),n.bindRenderbuffer(36161,oe.__webglColorRenderbuffer[At]);const gt=s.convert(_t.format,_t.encoding),U=s.convert(_t.type),rt=w(_t.internalFormat,gt,U,_t.encoding),Ze=jt(L);n.renderbufferStorageMultisample(36161,Ze,rt,L.width,L.height),n.framebufferRenderbuffer(36160,36064+At,36161,oe.__webglColorRenderbuffer[At])}n.bindRenderbuffer(36161,null),L.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),hn(oe.__webglDepthRenderbuffer,L,!0)),t.bindFramebuffer(36160,null)}}if($e){t.bindTexture(34067,Be.__webglTexture),de(34067,I,rn);for(let ae=0;ae<6;ae++)qe(oe.__webglFramebuffer[ae],L,I,36064,34069+ae);C(I,rn)&&A(34067),t.unbindTexture()}else if(ct){const ae=L.texture;for(let At=0,_t=ae.length;At<_t;At++){const gt=ae[At],U=i.get(gt);t.bindTexture(3553,U.__webglTexture),de(3553,gt,rn),qe(oe.__webglFramebuffer,L,gt,36064+At,3553),C(gt,rn)&&A(3553)}t.unbindTexture()}else{let ae=3553;(L.isWebGL3DRenderTarget||L.isWebGLArrayRenderTarget)&&(a?ae=L.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ae,Be.__webglTexture),de(ae,I,rn),qe(oe.__webglFramebuffer,L,I,36064,ae),C(I,rn)&&A(ae),t.unbindTexture()}L.depthBuffer&&ye(L)},this.updateRenderTargetMipmap=function lt(L){const I=b(L)||a,oe=!0===L.isWebGLMultipleRenderTargets?L.texture:[L.texture];for(let Be=0,$e=oe.length;Be<$e;Be++){const ct=oe[Be];if(C(ct,I)){const rn=L.isWebGLCubeRenderTarget?34067:3553,ae=i.get(ct).__webglTexture;t.bindTexture(rn,ae),A(rn),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function pn(L){if(a&&L.samples>0&&!1===Bt(L)){const I=L.isWebGLMultipleRenderTargets?L.texture:[L.texture],oe=L.width,Be=L.height;let $e=16384;const ct=[],rn=L.stencilBuffer?33306:36096,ae=i.get(L),At=!0===L.isWebGLMultipleRenderTargets;if(At)for(let _t=0;_t<I.length;_t++)t.bindFramebuffer(36160,ae.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+_t,36161,null),t.bindFramebuffer(36160,ae.__webglFramebuffer),n.framebufferTexture2D(36009,36064+_t,3553,null,0);t.bindFramebuffer(36008,ae.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ae.__webglFramebuffer);for(let _t=0;_t<I.length;_t++){ct.push(36064+_t),L.depthBuffer&&ct.push(rn);const gt=void 0!==ae.__ignoreDepthValues&&ae.__ignoreDepthValues;if(!1===gt&&(L.depthBuffer&&($e|=256),L.stencilBuffer&&($e|=1024)),At&&n.framebufferRenderbuffer(36008,36064,36161,ae.__webglColorRenderbuffer[_t]),!0===gt&&(n.invalidateFramebuffer(36008,[rn]),n.invalidateFramebuffer(36009,[rn])),At){const U=i.get(I[_t]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,U,0)}n.blitFramebuffer(0,0,oe,Be,0,0,oe,Be,$e,9728),f&&n.invalidateFramebuffer(36008,ct)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),At)for(let _t=0;_t<I.length;_t++){t.bindFramebuffer(36160,ae.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+_t,36161,ae.__webglColorRenderbuffer[_t]);const gt=i.get(I[_t]).__webglTexture;t.bindFramebuffer(36160,ae.__webglFramebuffer),n.framebufferTexture2D(36009,36064+_t,3553,gt,0)}t.bindFramebuffer(36009,ae.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=qe,this.useMultisampledRTT=Bt}function tae(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Bc)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===Vc)return 5125;if(s===xl)return 5126;if(s===Op)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===ho)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Hc)return 6402;if(s===$d)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Kn){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Kn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Kn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===jd?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class nae extends dr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class za extends ur{constructor(){super(),this.isGroup=!0,this.type="Group"}}const iae={type:"move"};class mE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new za,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new za,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new za,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i);if(void 0===c.joints[m.jointName]){const v=new za;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[m.jointName]=v,c.add(v)}const _=c.joints[m.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(iae)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class rae extends mo{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Hc)!==Hc&&u!==$d)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Hc&&(i=Vc),void 0===i&&u===$d&&(i=jd),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:$i,this.minFilter=void 0!==l?l:$i,this.flipY=!1,this.generateMipmaps=!1}}class sae extends Yd{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const _=[],v=[],y=new dr;y.layers.enable(1),y.viewport=new Yn;const b=new dr;b.layers.enable(2),b.viewport=new Yn;const x=[y,b],C=new nae;C.layers.enable(1),C.layers.enable(2);let A=null,w=null;function T($){const ee=v.indexOf($.inputSource);if(-1===ee)return;const Re=_[ee];void 0!==Re&&Re.dispatchEvent({type:$.type,data:$.inputSource})}function B(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",B),r.removeEventListener("inputsourceschange",H);for(let $=0;$<_.length;$++){const ee=v[$];null!==ee&&(v[$]=null,_[$].disconnect(ee))}A=null,w=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,q.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function H($){for(let ee=0;ee<$.removed.length;ee++){const Re=$.removed[ee],ge=v.indexOf(Re);ge>=0&&(v[ge]=null,_[ge].dispatchEvent({type:"disconnected",data:Re}))}for(let ee=0;ee<$.added.length;ee++){const Re=$.added[ee];let ge=v.indexOf(Re);if(-1===ge){for(let Ge=0;Ge<_.length;Ge++){if(Ge>=v.length){v.push(Re),ge=Ge;break}if(null===v[Ge]){v[Ge]=Re,ge=Ge;break}}if(-1===ge)break}const Ve=_[ge];Ve&&Ve.dispatchEvent({type:"connected",data:Re})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let ee=_[$];return void 0===ee&&(ee=new mE,_[$]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function($){let ee=_[$];return void 0===ee&&(ee=new mE,_[$]=ee),ee.getGripSpace()},this.getHand=function($){let ee=_[$];return void 0===ee&&(ee=new mE,_[$]=ee),ee.getHandSpace()},this.setFramebufferScaleFactor=function($){s=$,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function($){l=$},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var $=Pi(function*(ee){if(r=ee,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",B),r.addEventListener("inputsourceschange",H),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),g=new $c(h.framebufferWidth,h.framebufferHeight,{format:ho,type:Bc,encoding:e.outputEncoding});else{let Re=null,ge=null,Ve=null;p.depth&&(Ve=p.stencil?35056:33190,Re=p.stencil?$d:Hc,ge=p.stencil?jd:Vc);const Ge={colorFormat:32856,depthFormat:Ve,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(Ge),r.updateRenderState({layers:[d]}),g=new $c(d.textureWidth,d.textureHeight,{format:ho,type:Bc,depthTexture:new rae(d.textureWidth,d.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,Re),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=yield r.requestReferenceSpace(a),q.setContext(r),q.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ee){return $.apply(this,arguments)}}();const J=new k,ie=new k;function te($,ee){null===ee?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(ee.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(null===r)return;C.near=b.near=y.near=$.near,C.far=b.far=y.far=$.far,(A!==C.near||w!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),A=C.near,w=C.far);const ee=$.parent,Re=C.cameras;te(C,ee);for(let Ve=0;Ve<Re.length;Ve++)te(Re[Ve],ee);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),$.position.copy(C.position),$.quaternion.copy(C.quaternion),$.scale.copy(C.scale),$.matrix.copy(C.matrix),$.matrixWorld.copy(C.matrixWorld);const ge=$.children;for(let Ve=0,Ge=ge.length;Ve<Ge;Ve++)ge[Ve].updateMatrixWorld(!0);2===Re.length?function z($,ee,Re){J.setFromMatrixPosition(ee.matrixWorld),ie.setFromMatrixPosition(Re.matrixWorld);const ge=J.distanceTo(ie),Ve=ee.projectionMatrix.elements,Ge=Re.projectionMatrix.elements,Mt=Ve[14]/(Ve[10]-1),de=Ve[14]/(Ve[10]+1),Yt=(Ve[9]+1)/Ve[5],Ht=(Ve[9]-1)/Ve[5],Tt=(Ve[8]-1)/Ve[0],qe=(Ge[8]+1)/Ge[0],hn=Mt*Tt,Me=Mt*qe,ye=ge/(-Tt+qe),Xe=ye*-Tt;ee.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(Xe),$.translateZ(ye),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();const Ct=Mt+ye,lt=de+ye;$.projectionMatrix.makePerspective(hn-Xe,Me+(ge-Xe),Yt*de/lt*Ct,Ht*de/lt*Ct,Ct,lt)}(C,y,b):C.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function($){null!==d&&(d.fixedFoveation=$),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=$)};let V=null;const q=new p3;q.setAnimationLoop(function j($,ee){if(c=ee.getViewerPose(l||o),f=ee,null!==c){const Re=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let ge=!1;Re.length!==C.cameras.length&&(C.cameras.length=0,ge=!0);for(let Ve=0;Ve<Re.length;Ve++){const Ge=Re[Ve];let Mt=null;if(null!==h)Mt=h.getViewport(Ge);else{const Yt=u.getViewSubImage(d,Ge);Mt=Yt.viewport,0===Ve&&(e.setRenderTargetTextures(g,Yt.colorTexture,d.ignoreDepthValues?void 0:Yt.depthStencilTexture),e.setRenderTarget(g))}let de=x[Ve];void 0===de&&(de=new dr,de.layers.enable(Ve),de.viewport=new Yn,x[Ve]=de),de.matrix.fromArray(Ge.transform.matrix),de.projectionMatrix.fromArray(Ge.projectionMatrix),de.viewport.set(Mt.x,Mt.y,Mt.width,Mt.height),0===Ve&&C.matrix.copy(de.matrix),!0===ge&&C.cameras.push(de)}}for(let Re=0;Re<_.length;Re++){const ge=v[Re],Ve=_[Re];null!==ge&&void 0!==Ve&&Ve.update(ge,ee,l||o)}V&&V($,ee),f=null}),this.setAnimationLoop=function($){V=$},this.dispose=function(){}}}function oae(n,e){function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=!0!==n.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}let v,y;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?v=g.map:g.specularMap?v=g.specularMap:g.displacementMap?v=g.displacementMap:g.normalMap?v=g.normalMap:g.bumpMap?v=g.bumpMap:g.roughnessMap?v=g.roughnessMap:g.metalnessMap?v=g.metalnessMap:g.alphaMap?v=g.alphaMap:g.emissiveMap?v=g.emissiveMap:g.clearcoatMap?v=g.clearcoatMap:g.clearcoatNormalMap?v=g.clearcoatNormalMap:g.clearcoatRoughnessMap?v=g.clearcoatRoughnessMap:g.iridescenceMap?v=g.iridescenceMap:g.iridescenceThicknessMap?v=g.iridescenceThicknessMap:g.specularIntensityMap?v=g.specularIntensityMap:g.specularColorMap?v=g.specularColorMap:g.transmissionMap?v=g.transmissionMap:g.thicknessMap?v=g.thicknessMap:g.sheenColorMap?v=g.sheenColorMap:g.sheenRoughnessMap&&(v=g.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix)),g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function t(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function i(m,g,_,v,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(r(m,g),function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(r(m,g),function d(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,y)):g.isMeshMatcapMaterial?(r(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,_,v){let y;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=.5*v,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}(m,g,_,v):g.isSpriteMaterial?function l(m,g){let _;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function W3(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function aae(){const n=Bp("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=zc,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,_=0,v=0,y=null,b=-1,x=null;const C=new Yn,A=new Yn;let w=null,T=e.width,B=e.height,H=1,J=null,ie=null;const z=new Yn(0,0,T,B),te=new Yn(0,0,T,B);let V=!1;const j=new lE;let q=!1,$=!1,ee=null;const Re=new dn,ge=new Ce,Ve=new k,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Mt(){return null===y?H:1}let Ht,Tt,qe,hn,Me,ye,Xe,Ct,lt,pn,jt,Bt,_i,ai,L,I,oe,Be,$e,ct,rn,ae,At,de=t;function Yt(O,Z){for(let le=0;le<O.length;le++){const be=e.getContext(O[le],Z);if(null!==be)return be}return null}try{const O={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r142"),e.addEventListener("webglcontextlost",U,!1),e.addEventListener("webglcontextrestored",rt,!1),e.addEventListener("webglcontextcreationerror",Ze,!1),null===de){const Z=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&Z.shift(),de=Yt(Z,O),null===de)throw Yt(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}function _t(){Ht=new bse(de),Tt=new pse(de,Ht,n),Ht.init(Tt),ae=new tae(de,Ht,Tt),qe=new Joe(de,Ht,Tt),hn=new Cse,Me=new zoe,ye=new eae(de,Ht,qe,Me,Tt,ae,hn),Xe=new gse(m),Ct=new yse(m),lt=new fie(de,Tt),At=new hse(de,Ht,lt,Tt),pn=new wse(de,lt,hn,At),jt=new Dse(de,pn,lt,hn),$e=new Ese(de,Tt,ye),I=new mse(Me),Bt=new Hoe(m,Xe,Ct,Ht,Tt,At,I),_i=new oae(m,Me),ai=new Goe,L=new Koe(Ht,Tt),Be=new dse(m,Xe,qe,jt,u,o),oe=new Qoe(m,jt,Tt),ct=new fse(de,Ht,hn,Tt),rn=new xse(de,Ht,hn,Tt),hn.programs=Bt.programs,m.capabilities=Tt,m.extensions=Ht,m.properties=Me,m.renderLists=ai,m.shadowMap=oe,m.state=qe,m.info=hn}_t();const gt=new sae(m,de);function U(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function rt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const O=hn.autoReset,Z=oe.enabled,le=oe.autoUpdate,ne=oe.needsUpdate,be=oe.type;_t(),hn.autoReset=O,oe.enabled=Z,oe.autoUpdate=le,oe.needsUpdate=ne,oe.type=be}function Ze(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function $t(O){const Z=O.target;Z.removeEventListener("dispose",$t),function yt(O){(function sn(O){const Z=Me.get(O).programs;void 0!==Z&&(Z.forEach(function(le){Bt.releaseProgram(le)}),O.isShaderMaterial&&Bt.releaseShaderCache(O))})(O),Me.remove(O)}(Z)}this.xr=gt,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const O=Ht.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Ht.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(O){void 0!==O&&(H=O,this.setSize(T,B,!1))},this.getSize=function(O){return O.set(T,B)},this.setSize=function(O,Z,le){gt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=O,B=Z,e.width=Math.floor(O*H),e.height=Math.floor(Z*H),!1!==le&&(e.style.width=O+"px",e.style.height=Z+"px"),this.setViewport(0,0,O,Z))},this.getDrawingBufferSize=function(O){return O.set(T*H,B*H).floor()},this.setDrawingBufferSize=function(O,Z,le){T=O,B=Z,H=le,e.width=Math.floor(O*le),e.height=Math.floor(Z*le),this.setViewport(0,0,O,Z)},this.getCurrentViewport=function(O){return O.copy(C)},this.getViewport=function(O){return O.copy(z)},this.setViewport=function(O,Z,le,ne){O.isVector4?z.set(O.x,O.y,O.z,O.w):z.set(O,Z,le,ne),qe.viewport(C.copy(z).multiplyScalar(H).floor())},this.getScissor=function(O){return O.copy(te)},this.setScissor=function(O,Z,le,ne){O.isVector4?te.set(O.x,O.y,O.z,O.w):te.set(O,Z,le,ne),qe.scissor(A.copy(te).multiplyScalar(H).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(O){qe.setScissorTest(V=O)},this.setOpaqueSort=function(O){J=O},this.setTransparentSort=function(O){ie=O},this.getClearColor=function(O){return O.copy(Be.getClearColor())},this.setClearColor=function(){Be.setClearColor.apply(Be,arguments)},this.getClearAlpha=function(){return Be.getClearAlpha()},this.setClearAlpha=function(){Be.setClearAlpha.apply(Be,arguments)},this.clear=function(O=!0,Z=!0,le=!0){let ne=0;O&&(ne|=16384),Z&&(ne|=256),le&&(ne|=1024),de.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",U,!1),e.removeEventListener("webglcontextrestored",rt,!1),e.removeEventListener("webglcontextcreationerror",Ze,!1),ai.dispose(),L.dispose(),Me.dispose(),Xe.dispose(),Ct.dispose(),jt.dispose(),At.dispose(),Bt.dispose(),gt.dispose(),gt.removeEventListener("sessionstart",Zn),gt.removeEventListener("sessionend",Qn),ee&&(ee.dispose(),ee=null),$r.stop()},this.renderBufferDirect=function(O,Z,le,ne,be,Zt){null===Z&&(Z=Ge);const mn=be.isMesh&&be.matrixWorld.determinant()<0,wn=function zhe(O,Z,le,ne,be){!0!==Z.isScene&&(Z=Ge),ye.resetTextureUnits();const Zt=Z.fog,wn=null===y?m.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:zc,vn=(ne.isMeshStandardMaterial?Ct:Xe).get(ne.envMap||(ne.isMeshStandardMaterial?Z.environment:null)),Jn=!0===ne.vertexColors&&!!le.attributes.color&&4===le.attributes.color.itemSize,Ln=!!ne.normalMap&&!!le.attributes.tangent,Bn=!!le.morphAttributes.position,Ti=!!le.morphAttributes.normal,mu=!!le.morphAttributes.color,Ah=ne.toneMapped?m.toneMapping:0,Rh=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Yo=void 0!==Rh?Rh.length:0,$n=Me.get(ne),Ih=h.state.lights;!0!==q||!0!==$&&O===x||I.setState(ne,O,O===x&&ne.id===b);let Ki=!1;ne.version===$n.__version?($n.needsLights&&$n.lightsStateVersion!==Ih.state.version||$n.outputEncoding!==wn||be.isInstancedMesh&&!1===$n.instancing||!be.isInstancedMesh&&!0===$n.instancing||be.isSkinnedMesh&&!1===$n.skinning||!be.isSkinnedMesh&&!0===$n.skinning||$n.envMap!==vn||!0===ne.fog&&$n.fog!==Zt||void 0!==$n.numClippingPlanes&&($n.numClippingPlanes!==I.numPlanes||$n.numIntersection!==I.numIntersection)||$n.vertexAlphas!==Jn||$n.vertexTangents!==Ln||$n.morphTargets!==Bn||$n.morphNormals!==Ti||$n.morphColors!==mu||$n.toneMapping!==Ah||!0===Tt.isWebGL2&&$n.morphTargetsCount!==Yo)&&(Ki=!0):(Ki=!0,$n.__version=ne.version);let Zo=$n.currentProgram;!0===Ki&&(Zo=cD(ne,Z,be));let zl=!1,Cm=!1,uD=!1;const qr=Zo.getUniforms(),Mm=$n.uniforms;if(qe.useProgram(Zo.program)&&(zl=!0,Cm=!0,uD=!0),ne.id!==b&&(b=ne.id,Cm=!0),zl||x!==O){if(qr.setValue(de,"projectionMatrix",O.projectionMatrix),Tt.logarithmicDepthBuffer&&qr.setValue(de,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),x!==O&&(x=O,Cm=!0,uD=!0),ne.isShaderMaterial||ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshStandardMaterial||ne.envMap){const Qo=qr.map.cameraPosition;void 0!==Qo&&Qo.setValue(de,Ve.setFromMatrixPosition(O.matrixWorld))}(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&qr.setValue(de,"isOrthographic",!0===O.isOrthographicCamera),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial||ne.isShadowMaterial||be.isSkinnedMesh)&&qr.setValue(de,"viewMatrix",O.matrixWorldInverse)}if(be.isSkinnedMesh){qr.setOptional(de,be,"bindMatrix"),qr.setOptional(de,be,"bindMatrixInverse");const Qo=be.skeleton;Qo&&(Tt.floatVertexTextures?(null===Qo.boneTexture&&Qo.computeBoneTexture(),qr.setValue(de,"boneTexture",Qo.boneTexture,ye),qr.setValue(de,"boneTextureSize",Qo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const dD=le.morphAttributes;return(void 0!==dD.position||void 0!==dD.normal||void 0!==dD.color&&!0===Tt.isWebGL2)&&$e.update(be,le,ne,Zo),(Cm||$n.receiveShadow!==be.receiveShadow)&&($n.receiveShadow=be.receiveShadow,qr.setValue(de,"receiveShadow",be.receiveShadow)),Cm&&(qr.setValue(de,"toneMappingExposure",m.toneMappingExposure),$n.needsLights&&function Uhe(O,Z){O.ambientLightColor.needsUpdate=Z,O.lightProbe.needsUpdate=Z,O.directionalLights.needsUpdate=Z,O.directionalLightShadows.needsUpdate=Z,O.pointLights.needsUpdate=Z,O.pointLightShadows.needsUpdate=Z,O.spotLights.needsUpdate=Z,O.spotLightShadows.needsUpdate=Z,O.rectAreaLights.needsUpdate=Z,O.hemisphereLights.needsUpdate=Z}(Mm,uD),Zt&&!0===ne.fog&&_i.refreshFogUniforms(Mm,Zt),_i.refreshMaterialUniforms(Mm,ne,H,B,ee),by.upload(de,$n.uniformsList,Mm,ye)),ne.isShaderMaterial&&!0===ne.uniformsNeedUpdate&&(by.upload(de,$n.uniformsList,Mm,ye),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&qr.setValue(de,"center",be.center),qr.setValue(de,"modelViewMatrix",be.modelViewMatrix),qr.setValue(de,"normalMatrix",be.normalMatrix),qr.setValue(de,"modelMatrix",be.matrixWorld),Zo}(O,Z,le,ne,be);qe.setMaterial(ne,mn);let vn=le.index;const Jn=le.attributes.position;if(null===vn){if(void 0===Jn||0===Jn.count)return}else if(0===vn.count)return;let Ln=1;!0===ne.wireframe&&(vn=pn.getWireframeAttribute(le),Ln=2),At.setup(be,ne,wn,le,vn);let Bn,Ti=ct;null!==vn&&(Bn=lt.get(vn),Ti=rn,Ti.setIndex(Bn));const mu=null!==vn?vn.count:Jn.count,Ah=le.drawRange.start*Ln,Rh=le.drawRange.count*Ln,Yo=null!==Zt?Zt.start*Ln:0,$n=null!==Zt?Zt.count*Ln:1/0,Ih=Math.max(Ah,Yo),Ki=Math.min(mu,Ah+Rh,Yo+$n)-1,Zo=Math.max(0,Ki-Ih+1);if(0!==Zo){if(be.isMesh)!0===ne.wireframe?(qe.setLineWidth(ne.wireframeLinewidth*Mt()),Ti.setMode(1)):Ti.setMode(4);else if(be.isLine){let zl=ne.linewidth;void 0===zl&&(zl=1),qe.setLineWidth(zl*Mt()),Ti.setMode(be.isLineSegments?1:be.isLineLoop?2:3)}else be.isPoints?Ti.setMode(0):be.isSprite&&Ti.setMode(4);if(be.isInstancedMesh)Ti.renderInstances(Ih,Zo,be.count);else if(le.isInstancedBufferGeometry){const zl=Math.min(le.instanceCount,le._maxInstanceCount);Ti.renderInstances(Ih,Zo,zl)}else Ti.render(Ih,Zo)}},this.compile=function(O,Z){h=L.get(O),h.init(),p.push(h),O.traverseVisible(function(le){le.isLight&&le.layers.test(Z.layers)&&(h.pushLight(le),le.castShadow&&h.pushShadow(le))}),h.setupLights(m.physicallyCorrectLights),O.traverse(function(le){const ne=le.material;if(ne)if(Array.isArray(ne))for(let be=0;be<ne.length;be++)cD(ne[be],O,le);else cD(ne,O,le)}),p.pop(),h=null};let We=null;function Zn(){$r.stop()}function Qn(){$r.start()}const $r=new p3;function Ko(O,Z,le,ne){if(!1===O.visible)return;if(O.layers.test(Z.layers))if(O.isGroup)le=O.renderOrder;else if(O.isLOD)!0===O.autoUpdate&&O.update(Z);else if(O.isLight)h.pushLight(O),O.castShadow&&h.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||j.intersectsSprite(O)){ne&&Ve.setFromMatrixPosition(O.matrixWorld).applyMatrix4(Re);const mn=jt.update(O),wn=O.material;wn.visible&&d.push(O,mn,wn,le,Ve.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(O.isSkinnedMesh&&O.skeleton.frame!==hn.render.frame&&(O.skeleton.update(),O.skeleton.frame=hn.render.frame),!O.frustumCulled||j.intersectsObject(O))){ne&&Ve.setFromMatrixPosition(O.matrixWorld).applyMatrix4(Re);const mn=jt.update(O),wn=O.material;if(Array.isArray(wn)){const vn=mn.groups;for(let Jn=0,Ln=vn.length;Jn<Ln;Jn++){const Bn=vn[Jn],Ti=wn[Bn.materialIndex];Ti&&Ti.visible&&d.push(O,mn,Ti,le,Ve.z,Bn)}}else wn.visible&&d.push(O,mn,wn,le,Ve.z,null)}const Zt=O.children;for(let mn=0,wn=Zt.length;mn<wn;mn++)Ko(Zt[mn],Z,le,ne)}function fH(O,Z,le,ne){const be=O.opaque,Zt=O.transmissive,mn=O.transparent;h.setupLightsView(le),Zt.length>0&&function Vhe(O,Z,le){const ne=Tt.isWebGL2;null===ee&&(ee=new $c(1,1,{generateMipmaps:!0,type:Ht.has("EXT_color_buffer_half_float")?Op:Bc,minFilter:wl,samples:ne&&!0===s?4:0})),m.getDrawingBufferSize(ge),ne?ee.setSize(ge.x,ge.y):ee.setSize(Kv(ge.x),Kv(ge.y));const be=m.getRenderTarget();m.setRenderTarget(ee),m.clear();const Zt=m.toneMapping;m.toneMapping=0,fb(O,Z,le),m.toneMapping=Zt,ye.updateMultisampleRenderTarget(ee),ye.updateRenderTargetMipmap(ee),m.setRenderTarget(be)}(be,Z,le),ne&&qe.viewport(C.copy(ne)),be.length>0&&fb(be,Z,le),Zt.length>0&&fb(Zt,Z,le),mn.length>0&&fb(mn,Z,le),qe.buffers.depth.setTest(!0),qe.buffers.depth.setMask(!0),qe.buffers.color.setMask(!0),qe.setPolygonOffset(!1)}function fb(O,Z,le){const ne=!0===Z.isScene?Z.overrideMaterial:null;for(let be=0,Zt=O.length;be<Zt;be++){const mn=O[be],wn=mn.object,vn=mn.geometry,Jn=null===ne?mn.material:ne,Ln=mn.group;wn.layers.test(le.layers)&&Hhe(wn,Z,le,vn,Jn,Ln)}}function Hhe(O,Z,le,ne,be,Zt){O.onBeforeRender(m,Z,le,ne,be,Zt),O.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),be.onBeforeRender(m,Z,le,ne,O,Zt),!0===be.transparent&&2===be.side?(be.side=1,be.needsUpdate=!0,m.renderBufferDirect(le,Z,ne,be,O,Zt),be.side=0,be.needsUpdate=!0,m.renderBufferDirect(le,Z,ne,be,O,Zt),be.side=2):m.renderBufferDirect(le,Z,ne,be,O,Zt),O.onAfterRender(m,Z,le,ne,be,Zt)}function cD(O,Z,le){!0!==Z.isScene&&(Z=Ge);const ne=Me.get(O),be=h.state.lights,mn=be.state.version,wn=Bt.getParameters(O,be.state,h.state.shadowsArray,Z,le),vn=Bt.getProgramCacheKey(wn);let Jn=ne.programs;ne.environment=O.isMeshStandardMaterial?Z.environment:null,ne.fog=Z.fog,ne.envMap=(O.isMeshStandardMaterial?Ct:Xe).get(O.envMap||ne.environment),void 0===Jn&&(O.addEventListener("dispose",$t),Jn=new Map,ne.programs=Jn);let Ln=Jn.get(vn);if(void 0!==Ln){if(ne.currentProgram===Ln&&ne.lightsStateVersion===mn)return pH(O,wn),Ln}else wn.uniforms=Bt.getUniforms(O),O.onBuild(le,wn,m),O.onBeforeCompile(wn,m),Ln=Bt.acquireProgram(wn,vn),Jn.set(vn,Ln),ne.uniforms=wn.uniforms;const Bn=ne.uniforms;(!O.isShaderMaterial&&!O.isRawShaderMaterial||!0===O.clipping)&&(Bn.clippingPlanes=I.uniform),pH(O,wn),ne.needsLights=function Ghe(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&!0===O.lights}(O),ne.lightsStateVersion=mn,ne.needsLights&&(Bn.ambientLightColor.value=be.state.ambient,Bn.lightProbe.value=be.state.probe,Bn.directionalLights.value=be.state.directional,Bn.directionalLightShadows.value=be.state.directionalShadow,Bn.spotLights.value=be.state.spot,Bn.spotLightShadows.value=be.state.spotShadow,Bn.rectAreaLights.value=be.state.rectArea,Bn.ltc_1.value=be.state.rectAreaLTC1,Bn.ltc_2.value=be.state.rectAreaLTC2,Bn.pointLights.value=be.state.point,Bn.pointLightShadows.value=be.state.pointShadow,Bn.hemisphereLights.value=be.state.hemi,Bn.directionalShadowMap.value=be.state.directionalShadowMap,Bn.directionalShadowMatrix.value=be.state.directionalShadowMatrix,Bn.spotShadowMap.value=be.state.spotShadowMap,Bn.spotShadowMatrix.value=be.state.spotShadowMatrix,Bn.pointShadowMap.value=be.state.pointShadowMap,Bn.pointShadowMatrix.value=be.state.pointShadowMatrix);const Ti=Ln.getUniforms(),mu=by.seqWithValue(Ti.seq,Bn);return ne.currentProgram=Ln,ne.uniformsList=mu,Ln}function pH(O,Z){const le=Me.get(O);le.outputEncoding=Z.outputEncoding,le.instancing=Z.instancing,le.skinning=Z.skinning,le.morphTargets=Z.morphTargets,le.morphNormals=Z.morphNormals,le.morphColors=Z.morphColors,le.morphTargetsCount=Z.morphTargetsCount,le.numClippingPlanes=Z.numClippingPlanes,le.numIntersection=Z.numClipIntersection,le.vertexAlphas=Z.vertexAlphas,le.vertexTangents=Z.vertexTangents,le.toneMapping=Z.toneMapping}$r.setAnimationLoop(function on(O){We&&We(O)}),typeof self<"u"&&$r.setContext(self),this.setAnimationLoop=function(O){We=O,gt.setAnimationLoop(O),null===O?$r.stop():$r.start()},gt.addEventListener("sessionstart",Zn),gt.addEventListener("sessionend",Qn),this.render=function(O,Z){if(void 0===Z||!0===Z.isCamera){if(!0!==g){if(!0===O.autoUpdate&&O.updateMatrixWorld(),null===Z.parent&&Z.updateMatrixWorld(),!0===gt.enabled&&!0===gt.isPresenting&&(!0===gt.cameraAutoUpdate&&gt.updateCamera(Z),Z=gt.getCamera()),!0===O.isScene&&O.onBeforeRender(m,O,Z,y),h=L.get(O,p.length),h.init(),p.push(h),Re.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),j.setFromProjectionMatrix(Re),$=this.localClippingEnabled,q=I.init(this.clippingPlanes,$,Z),d=ai.get(O,f.length),d.init(),f.push(d),Ko(O,Z,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(J,ie),!0===q&&I.beginShadows(),oe.render(h.state.shadowsArray,O,Z),!0===q&&I.endShadows(),!0===this.info.autoReset&&this.info.reset(),Be.render(d,O),h.setupLights(m.physicallyCorrectLights),Z.isArrayCamera){const ne=Z.cameras;for(let be=0,Zt=ne.length;be<Zt;be++){const mn=ne[be];fH(d,O,mn,mn.viewport)}}else fH(d,O,Z);null!==y&&(ye.updateMultisampleRenderTarget(y),ye.updateRenderTargetMipmap(y)),!0===O.isScene&&O.onAfterRender(m,O,Z),At.resetDefaultState(),b=-1,x=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(O,Z,le){Me.get(O.texture).__webglTexture=Z,Me.get(O.depthTexture).__webglTexture=le;const ne=Me.get(O);ne.__hasExternalTextures=!0,ne.__hasExternalTextures&&(ne.__autoAllocateDepthBuffer=void 0===le,ne.__autoAllocateDepthBuffer||!0===Ht.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,Z){const le=Me.get(O);le.__webglFramebuffer=Z,le.__useDefaultFramebuffer=void 0===Z},this.setRenderTarget=function(O,Z=0,le=0){y=O,_=Z,v=le;let ne=!0;if(O){const vn=Me.get(O);void 0!==vn.__useDefaultFramebuffer?(qe.bindFramebuffer(36160,null),ne=!1):void 0===vn.__webglFramebuffer?ye.setupRenderTarget(O):vn.__hasExternalTextures&&ye.rebindTextures(O,Me.get(O.texture).__webglTexture,Me.get(O.depthTexture).__webglTexture)}let be=null,Zt=!1,mn=!1;if(O){const vn=O.texture;(vn.isData3DTexture||vn.isDataArrayTexture)&&(mn=!0);const Jn=Me.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(be=Jn[Z],Zt=!0):be=Tt.isWebGL2&&O.samples>0&&!1===ye.useMultisampledRTT(O)?Me.get(O).__webglMultisampledFramebuffer:Jn,C.copy(O.viewport),A.copy(O.scissor),w=O.scissorTest}else C.copy(z).multiplyScalar(H).floor(),A.copy(te).multiplyScalar(H).floor(),w=V;if(qe.bindFramebuffer(36160,be)&&Tt.drawBuffers&&ne&&qe.drawBuffers(O,be),qe.viewport(C),qe.scissor(A),qe.setScissorTest(w),Zt){const vn=Me.get(O.texture);de.framebufferTexture2D(36160,36064,34069+Z,vn.__webglTexture,le)}else if(mn){const vn=Me.get(O.texture);de.framebufferTextureLayer(36160,36064,vn.__webglTexture,le||0,Z||0)}b=-1},this.readRenderTargetPixels=function(O,Z,le,ne,be,Zt,mn){if(!O||!O.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wn=Me.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&void 0!==mn&&(wn=wn[mn]),wn){qe.bindFramebuffer(36160,wn);try{const vn=O.texture,Jn=vn.format,Ln=vn.type;if(Jn!==ho&&ae.convert(Jn)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Bn=Ln===Op&&(Ht.has("EXT_color_buffer_half_float")||Tt.isWebGL2&&Ht.has("EXT_color_buffer_float"));if(!(Ln===Bc||ae.convert(Ln)===de.getParameter(35738)||Ln===xl&&(Tt.isWebGL2||Ht.has("OES_texture_float")||Ht.has("WEBGL_color_buffer_float"))||Bn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Z>=0&&Z<=O.width-ne&&le>=0&&le<=O.height-be&&de.readPixels(Z,le,ne,be,ae.convert(Jn),ae.convert(Ln),Zt)}finally{const vn=null!==y?Me.get(y).__webglFramebuffer:null;qe.bindFramebuffer(36160,vn)}}},this.copyFramebufferToTexture=function(O,Z,le=0){const ne=Math.pow(2,-le),be=Math.floor(Z.image.width*ne),Zt=Math.floor(Z.image.height*ne);ye.setTexture2D(Z,0),de.copyTexSubImage2D(3553,le,0,0,O.x,O.y,be,Zt),qe.unbindTexture()},this.copyTextureToTexture=function(O,Z,le,ne=0){const be=Z.image.width,Zt=Z.image.height,mn=ae.convert(le.format),wn=ae.convert(le.type);ye.setTexture2D(le,0),de.pixelStorei(37440,le.flipY),de.pixelStorei(37441,le.premultiplyAlpha),de.pixelStorei(3317,le.unpackAlignment),Z.isDataTexture?de.texSubImage2D(3553,ne,O.x,O.y,be,Zt,mn,wn,Z.image.data):Z.isCompressedTexture?de.compressedTexSubImage2D(3553,ne,O.x,O.y,Z.mipmaps[0].width,Z.mipmaps[0].height,mn,Z.mipmaps[0].data):de.texSubImage2D(3553,ne,O.x,O.y,mn,wn,Z.image),0===ne&&le.generateMipmaps&&de.generateMipmap(3553),qe.unbindTexture()},this.copyTextureToTexture3D=function(O,Z,le,ne,be=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Zt=O.max.x-O.min.x+1,mn=O.max.y-O.min.y+1,wn=O.max.z-O.min.z+1,vn=ae.convert(ne.format),Jn=ae.convert(ne.type);let Ln;if(ne.isData3DTexture)ye.setTexture3D(ne,0),Ln=32879;else{if(!ne.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ye.setTexture2DArray(ne,0),Ln=35866}de.pixelStorei(37440,ne.flipY),de.pixelStorei(37441,ne.premultiplyAlpha),de.pixelStorei(3317,ne.unpackAlignment);const Bn=de.getParameter(3314),Ti=de.getParameter(32878),mu=de.getParameter(3316),Ah=de.getParameter(3315),Rh=de.getParameter(32877),Yo=le.isCompressedTexture?le.mipmaps[0]:le.image;de.pixelStorei(3314,Yo.width),de.pixelStorei(32878,Yo.height),de.pixelStorei(3316,O.min.x),de.pixelStorei(3315,O.min.y),de.pixelStorei(32877,O.min.z),le.isDataTexture||le.isData3DTexture?de.texSubImage3D(Ln,be,Z.x,Z.y,Z.z,Zt,mn,wn,vn,Jn,Yo.data):le.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(Ln,be,Z.x,Z.y,Z.z,Zt,mn,wn,vn,Yo.data)):de.texSubImage3D(Ln,be,Z.x,Z.y,Z.z,Zt,mn,wn,vn,Jn,Yo),de.pixelStorei(3314,Bn),de.pixelStorei(32878,Ti),de.pixelStorei(3316,mu),de.pixelStorei(3315,Ah),de.pixelStorei(32877,Rh),0===be&&ne.generateMipmaps&&de.generateMipmap(Ln),qe.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?ye.setTextureCube(O,0):O.isData3DTexture?ye.setTexture3D(O,0):O.isDataArrayTexture?ye.setTexture2DArray(O,0):ye.setTexture2D(O,0),qe.unbindTexture()},this.resetState=function(){_=0,v=0,y=null,qe.reset(),At.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class lae extends W3{}).prototype.isWebGL1Renderer=!0;class j3 extends ur{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class vE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ws()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ws()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ws()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const jr=new k;class nu{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.applyMatrix4(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.applyNormalMatrix(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)jr.fromBufferAttribute(this,t),jr.transformDirection(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Xi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Z3=new k,Q3=new Yn,J3=new Yn,dae=new k,eB=new dn;class tB extends Ur{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new dn,this.bindMatrixInverse=new dn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Q3.fromBufferAttribute(r.attributes.skinIndex,e),J3.fromBufferAttribute(r.attributes.skinWeight,e),Z3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=J3.getComponent(s);if(0!==o){const a=Q3.getComponent(s);eB.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(dae.copy(Z3).applyMatrix4(eB),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class bE extends ur{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xp extends mo{constructor(e=null,t=1,i=1,r,s,o,a,l,c=$i,u=$i,d,h){super(null,o,a,l,c,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const nB=new dn,hae=new dn;class Sy{constructor(e=[],t=[]){this.uuid=ws(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)nB.multiplyMatrices(e[s]?e[s].matrixWorld:hae,t[s]),nB.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Sy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=K2(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Xp(t,e,e,ho,xl);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new bE),this.bones.push(o),this.boneInverses.push((new dn).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class is extends yo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const sB=new k,oB=new k,aB=new dn,wE=new ry,Dy=new Zc;class iu extends ur{constructor(e=new bn,t=new is){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)sB.fromBufferAttribute(t,r-1),oB.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=sB.distanceTo(oB);e.setAttribute("lineDistance",new xt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Dy.copy(i.boundingSphere),Dy.applyMatrix4(r),Dy.radius+=s,!1===e.ray.intersectsSphere(Dy))return;aB.copy(r).invert(),wE.copy(e.ray).applyMatrix4(aB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new k,u=new k,d=new k,h=new k,f=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;y<b;y+=f){const x=p.getX(y),C=p.getX(y+1);if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,C),wE.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count)-1;y<b;y+=f){if(c.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),wE.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(h);C<e.near||C>e.far||t.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const lB=new k,cB=new k;class xE extends iu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)lB.fromBufferAttribute(t,r),cB.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+lB.distanceTo(cB);e.setAttribute("lineDistance",new xt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class uB extends iu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class CE extends yo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dB=new dn,ME=new ry,Ty=new Zc,Ay=new k;class hB extends ur{constructor(e=new bn,t=new CE){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ty.copy(i.boundingSphere),Ty.applyMatrix4(r),Ty.radius+=s,!1===e.ray.intersectsSphere(Ty))return;dB.copy(r).invert(),ME.copy(e.ray).applyMatrix4(dB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const g=c.getX(p);Ay.fromBufferAttribute(d,g),fB(Ay,g,l,r,e,t,this)}else for(let p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);p<m;p++)Ay.fromBufferAttribute(d,p),fB(Ay,p,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function fB(n,e,t,i,r,s,o){const a=ME.distanceSqToPoint(n);if(a<t){const l=new k;ME.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class sm extends yo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Pl extends sm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new et(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}const bi={arraySlice:function(n,e,t){return bi.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=i)){d.push(c.times[f]);for(let m=0;m<u;++m)h.push(c.values[f*u+m])}}0!==d.length&&(c.times=bi.convertArray(d,c.times.constructor),c.values=bi.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(s<=a.times[0])m=bi.arraySlice(a.values,u,d-u);else if(s>=a.times[p]){const _=p*d+u;m=bi.arraySlice(a.values,_,_+d-u)}else{const _=a.createInterpolant(),v=u,y=d-u;_.evaluate(s),m=bi.arraySlice(_.resultBuffer,v,y)}"quaternion"===l&&(new ns).fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let _=0;_<g;++_){const v=_*f+h;if("quaternion"===l)ns.multiplyQuaternionsFlat(c.values,v,m,0,c.values,v);else{const y=f-2*h;for(let b=0;b<y;++b)c.values[v+b]-=m[b]}}}return n.blendMode=2501,n}};class om{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ile extends om{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),m=p*p,g=m*p,_=-h*g+2*h*m-h*p,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let x=0;x!==a;++x)s[x]=_*o[u+x]+v*o[c+x]+y*o[l+x]+b*o[d+x];return s}}class DB extends om{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class rle extends om{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $o{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bi.convertArray(t,this.TimeBufferType),this.values=bi.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:bi.convertArray(e.times,Array),values:bi.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new rle(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ile(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Lp:t=this.InterpolantFactoryMethodDiscrete;break;case qd:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lp;case this.InterpolantFactoryMethodLinear:return qd;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=bi.arraySlice(i,s,o),this.values=bi.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&bi.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=bi.arraySlice(this.times),t=bi.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[h+p]||m!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=bi.arraySlice(e,0,o),this.values=bi.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=bi.arraySlice(this.times,0),t=bi.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$o.prototype.TimeBufferType=Float32Array,$o.prototype.ValueBufferType=Float32Array,$o.prototype.DefaultInterpolation=qd;class Ch extends $o{}Ch.prototype.ValueTypeName="bool",Ch.prototype.ValueBufferType=Array,Ch.prototype.DefaultInterpolation=Lp,Ch.prototype.InterpolantFactoryMethodLinear=void 0,Ch.prototype.InterpolantFactoryMethodSmooth=void 0;class TB extends $o{}TB.prototype.ValueTypeName="color";class am extends $o{}am.prototype.ValueTypeName="number";class sle extends om{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ns.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ru extends $o{InterpolantFactoryMethodLinear(e){return new sle(this.times,this.values,this.getValueSize(),e)}}ru.prototype.ValueTypeName="quaternion",ru.prototype.DefaultInterpolation=qd,ru.prototype.InterpolantFactoryMethodSmooth=void 0;class Mh extends $o{}Mh.prototype.ValueTypeName="string",Mh.prototype.ValueBufferType=Array,Mh.prototype.DefaultInterpolation=Lp,Mh.prototype.InterpolantFactoryMethodLinear=void 0,Mh.prototype.InterpolantFactoryMethodSmooth=void 0;class lm extends $o{}lm.prototype.ValueTypeName="vector";class cm{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ws(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(ale(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push($o.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=bi.getKeyframeOrder(l);l=bi.sortedArray(l,1,u),c=bi.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new am(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,m){if(0!==f.length){const g=[],_=[];bi.flattenJSON(f,g,_,p),0!==g.length&&m.push(new d(h,g,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],_=[];for(let v=0;v!==h[p].morphTargets.length;++v){const y=h[p];g.push(y.time),_.push(y.morphTarget===m?1:0)}r.push(new am(".morphTargetInfluence["+m+"]",g,_))}l=f.length*o}else{const f=".bones["+t[d].name+"]";i(lm,f+".position",h,"pos",r),i(ru,f+".quaternion",h,"rot",r),i(lm,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ale(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function ole(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return am;case"vector":case"vector2":case"vector3":case"vector4":return lm;case"color":return TB;case"quaternion":return ru;case"bool":case"boolean":return Ch;case"string":return Mh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];bi.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Sh={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const lle=new class AB{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class um{constructor(e){this.manager=void 0!==e?e:lle,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ga={};class qo extends um{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Sh.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Ga[e])return void Ga[e].push({onLoad:t,onProgress:i,onError:r});Ga[e]=[],Ga[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=Ga[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(_){!function v(){d.read().then(({done:y,value:b})=>{if(y)_.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let C=0,A=u.length;C<A;C++){const w=u[C];w.onProgress&&w.onProgress(x)}_.enqueue(b),v()}})}()}});return new Response(g)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Sh.add(e,c);const u=Ga[e];delete Ga[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Ga[e];if(void 0===u)throw this.manager.itemError(e),c;delete Ga[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yy extends um{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Sh.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Bp("img");function l(){u(),Sh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class cle extends um{constructor(e){super(e)}load(e,t,i,r){const s=new mo,o=new Yy(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class dm extends ur{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const RB=new dn,IB=new k,kB=new k;class LE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.map=null,this.mapPass=null,this.matrix=new dn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new lE,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new Yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;IB.setFromMatrixPosition(e.matrixWorld),t.position.copy(IB),kB.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(kB),t.updateMatrixWorld(),RB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RB),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class dle extends LE{constructor(){super(new dr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Fp*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class FE extends dm{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ur.DefaultUp),this.updateMatrix(),this.target=new ur,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new dle}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const PB=new dn,hm=new k,NE=new k;class hle extends LE{constructor(){super(new dr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new Yn(2,1,1,1),new Yn(0,1,1,1),new Yn(3,1,1,1),new Yn(1,1,1,1),new Yn(3,0,1,1),new Yn(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),hm.setFromMatrixPosition(e.matrixWorld),i.position.copy(hm),NE.copy(i.position),NE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(NE),i.updateMatrixWorld(),r.makeTranslation(-hm.x,-hm.y,-hm.z),PB.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PB)}}class BE extends dm{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new hle}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class fle extends LE{constructor(){super(new Gp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class OB extends dm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ur.DefaultUp),this.updateMatrix(),this.target=new ur,this.shadow=new fle}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class LB extends dm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class FB extends dm{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Wa{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class yle extends um{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Sh.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Sh.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}const HE="\\[\\]\\.:\\/",Mle=new RegExp("["+HE+"]","g"),zE="[^"+HE+"]",Sle="[^"+HE.replace("\\.","")+"]",Rle=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",zE)+/(WCOD+)?/.source.replace("WCOD",Sle)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zE)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zE)+"$"),Ile=["material","materials","bones"];class kle{constructor(e,t,i){const r=i||fi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let fi=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Mle,"")}static parseTrackName(t){const i=Rle.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Ile.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=kle,n})();fi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},fi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},fi.prototype.GetterByBindingType=[fi.prototype._getValue_direct,fi.prototype._getValue_array,fi.prototype._getValue_arrayElement,fi.prototype._getValue_toArray],fi.prototype.SetterByBindingTypeAndVersioning=[[fi.prototype._setValue_direct,fi.prototype._setValue_direct_setNeedsUpdate,fi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fi.prototype._setValue_array,fi.prototype._setValue_array_setNeedsUpdate,fi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fi.prototype._setValue_arrayElement,fi.prototype._setValue_arrayElement_setNeedsUpdate,fi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fi.prototype._setValue_fromArray,fi.prototype._setValue_fromArray_setNeedsUpdate,fi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];function zle(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):c<-14?(i[l]=1024>>-c-14,i[256|l]=1024>>-c-14|32768,r[l]=-c-1,r[256|l]=-c-1):c<=15?(i[l]=c+15<<10,i[256|l]=c+15<<10|32768,r[l]=13,r[256|l]=13):c<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;0==(8388608&c);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");const jle=new class Wle{constructor(){}parse(e){return(0,kte.parse)(e,{delimiter:"\t",header:!0,skipEmptyLines:!0}).data.map(i=>({type:i["Instrument Type"],channel:parseInt(i.Channel),location:{x:this.feetToMeters(i["X Location"]),y:this.feetToMeters(i["Y Location"]),z:this.feetToMeters(i["Z Location"])},rotation:{x:Go.degToRad(parseFloat(i["X Rotation"])),y:Go.degToRad(parseFloat(i["Y Rotation"])),z:Go.degToRad(parseFloat(i["Z Rotation"])),pan:Go.degToRad(parseFloat(i.Pan)),tilt:Go.degToRad(parseFloat(i.Tilt))},address:i["DMX Address"],has_color:parseInt(i["DMX Footprint"])>1,has_moving:"Moving Light"===i["Device Type"],angle:Go.degToRad(parseFloat(i["Field Angle"])),intensity:this.getLightTypeIntensity(i["Instrument Type"])}))}getLightTypeIntensity(e){return e.includes("Colorforce II")?50:.3}feetToMeters(e){let t=e.split("'"),i=parseFloat(t[0]);if(t.length>1){let r=parseFloat(t[1]);i<0&&(r=-r),i+=r/12}return.3048*i}};var Xo=(()=>{return(n=Xo||(Xo={}))[n.both=0]="both",n[n.programmer=1]="programmer",n[n.executor=2]="executor",Xo;var n})();const jn=new class $le{constructor(){this.programmer=new Ia,this.executor=new Ia,this.lightProperties=new Map,this.groups=[],this.selectedLights=[],this.addGroup("S4",[1,2,3,4,5,6,7,8,9,10,11,12]),this.addGroup("Left Booms",[81,82,83,84,85,86]),this.addGroup("Right Booms",[91,92,93,94,95,96]),this.addGroup("D40 Top",[33,34,35,36,37,38,39,40,41,42]),this.addGroup("Esprite",[21,22,23,24,25,26]),this.addGroup("CF",[101,102,103,104,105,106])}updateExecutor(e){this.executor=0===e.length?new Ia:e.reduce((t,i)=>Ia.combine(t,i))}updateProgrammer(e){this.programmer=e}getProgrammerValues(){return this.programmer}getProgrammedChannels(){return this.programmer.usedChannels()}loadLights(){var e=this;return Pi(function*(){let i=yield(yield fetch("/assets/rigs/ds/data.txt")).text(),r=yield jle.parse(i);return r.forEach(s=>{e.lightProperties.set(s.channel,s)}),r})()}getLightProperties(e){return this.lightProperties.get(e)}clearSelection(){this.selectedLights=[]}selectLight(e){this.selectedLights.includes(e)||this.selectedLights.push(e)}deselectLight(e){this.selectedLights=this.selectedLights.filter(t=>t!==e)}selectLights(e){e.forEach(t=>this.selectLight(t))}deselectLights(e){e.forEach(t=>this.deselectLight(t))}selectGroup(e){this.selectLights(e.channels)}deselectGroup(e){e.channels.forEach(t=>this.deselectLight(t))}getSelectedLights(){return this.selectedLights}setSelectedLights(e){this.selectedLights=e}getAllLights(){return Array.from(this.lightProperties.keys())}setLightValue(e,t){let i=this.getLightProperties(e),r=this.programmer.get(e);r||(r={brightness:kt.UNSET,color:kt.UNSET,pan:kt.UNSET,tilt:kt.UNSET}),t.brightness!==kt.MULTIPLE_VALUES&&(r.brightness=t.brightness),t.color!==kt.MULTIPLE_VALUES&&i?.has_color&&(r.color=t.color),t.pan!==kt.MULTIPLE_VALUES&&i?.has_moving&&(r.pan=t.pan),t.tilt!==kt.MULTIPLE_VALUES&&i?.has_moving&&(r.tilt=t.tilt),r.brightness===kt.UNSET&&r.color===kt.UNSET&&r.pan===kt.UNSET&&r.tilt===kt.UNSET&&this.programmer.delete(e),this.programmer.set(e,r)}getLightValue(e,t=!1,i=Xo.both){let r=this.programmer.get(e),s=this.executor.get(e),o=new ts;if(i===Xo.programmer?r&&(o=new ts(r)):i===Xo.executor?s&&(o=new ts(s)):r&&s?o=ts.combine(s,r):r?o=new ts(r):s&&(o=new ts(s)),t)return o;let a=this.getLightProperties(e);return o.brightness===kt.UNSET&&(o.brightness=0),a?.has_color&&o.color===kt.UNSET&&(o.color=16777215),a?.has_moving&&o.pan===kt.UNSET&&(o.pan=0),a?.has_moving&&o.tilt===kt.UNSET&&(o.tilt=0),o}getLightValues(e,t=!1,i=Xo.both){let r=new ts;for(let s=0;s<e.length;s++){let o=this.getLightValue(e[s],t,i);o&&(r.brightness===kt.UNSET?r.brightness=o.brightness:r.brightness!==o.brightness&&(r.brightness=kt.MULTIPLE_VALUES),r.color===kt.UNSET?r.color=o.color:r.color!==o.color&&(r.color=kt.MULTIPLE_VALUES),r.pan===kt.UNSET?r.pan=o.pan:r.pan!==o.pan&&(r.pan=kt.MULTIPLE_VALUES),r.tilt===kt.UNSET?r.tilt=o.tilt:r.tilt!==o.tilt&&(r.tilt=kt.MULTIPLE_VALUES))}return r}getSelectedValue(){return this.getLightValues(this.selectedLights,!0,Xo.programmer)}getGroups(){return this.groups}addGroup(e,t){this.groups.push({id:String(Math.floor(1e6*Math.random())),name:e,channels:t})}deleteGroup(e){for(let t=0;t<this.groups.length;t++)if(this.groups[t].id===e.id){this.groups.splice(t,1);break}}groupIsSelected(e){for(let t=0;t<e.channels.length;t++)if(!this.selectedLights.includes(e.channels[t]))return!1;return!0}setGroupValue(e,t){e.channels.forEach(i=>{this.setLightValue(i,t)})}setValue(e){this.selectedLights.forEach(t=>{this.setLightValue(t,e)})}},oi=new((()=>{class n{constructor(){this.selectedCueIndex=-1,this.selectedCueId=null,this.fadeEmitter=new wt,this.cues=[],this.show=null}getCueIndex(t){return this.cues.findIndex(i=>i.id===t)}updateCurrentCue(){null!==this.selectedCueId&&(this.cues[this.selectedCueIndex].lightValues=jn.getProgrammerValues())}addCue(t,i,r=0){let s={id:Math.floor(1e8*Math.random()),time:t,fade:r,title:i,lightValues:new Ia},o=!1,a=0;for(;a<this.cues.length;a++)if(this.cues[a].time>s.time){this.cues.splice(a,0,s),o=!0;break}return o?a<=this.selectedCueIndex&&this.selectedCueIndex++:this.cues.push(s),this.selectCue(s.id),s}updateCue(t,i,r,s=0){let o=this.getCueIndex(t);return-1===o?null:(this.cues[o].time=i,this.cues[o].title=r,this.cues[o].fade=s,this.cues[o])}getSelectedCueId(){return this.selectedCueId}selectCue(t){this.updateCurrentCue(),t!==this.selectedCueId&&(this.selectedCueId=t,this.selectedCueIndex=null===t?-1:this.getCueIndex(t),-1!==this.selectedCueIndex?(jn.updateExecutor(this.cues.slice(0,this.selectedCueIndex).map(i=>i.lightValues)),jn.updateProgrammer(this.cues[this.selectedCueIndex].lightValues)):(jn.updateExecutor([]),jn.updateProgrammer(new Ia)))}getSelectedCue(){return-1===this.selectedCueIndex?null:this.cues[this.selectedCueIndex]}getCue(t){let i=this.getCueIndex(t);return-1===i?null:this.cues[i]}getNextCue(t){let i=this.getCueIndex(t.id);return-1===i||i===this.cues.length-1?null:this.cues[i+1]}deleteCue(t){let i=0;for(;i<this.cues.length&&this.cues[i].id!==t;i++);return i===this.cues.length?null:(i<this.selectedCueIndex&&this.selectedCueIndex--,i===this.selectedCueIndex&&(this.selectedCueId=null,this.selectedCueIndex=-1),this.cues.splice(i,1)[0])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})());class Ll{constructor(){this.rerender=!1,this.purgeHistory=!1}}class jE extends Ll{constructor(e,t,i=!0){super(),this.attribute=e,this.value=t,this.rerender=i,this.oldValue=void 0,this.newValue=void 0}do(){(void 0===this.oldValue||void 0===this.newValue)&&(this.oldValue=jn.getSelectedValue(),this.newValue=new ts(this.oldValue),this.newValue[this.attribute]=this.value),jn.setValue(this.newValue)}undo(){if(void 0===this.oldValue)throw"Undo called before action was performed!";jn.setValue(this.oldValue)}}class $E extends Ll{constructor(e,t=!1){super(),this.channels=e,this.deselect=t,this.oldGroup=void 0,this.newGroup=void 0}do(){void 0===this.oldGroup&&(this.oldGroup=jn.getSelectedLights()),void 0===this.newGroup?(this.deselect?jn.deselectLights(this.channels):jn.selectLights(this.channels),this.newGroup=jn.getSelectedLights()):jn.setSelectedLights(this.newGroup)}undo(){if(void 0===this.oldGroup)throw"Undo called before action was performed!";jn.clearSelection(),jn.setSelectedLights(this.oldGroup)}}class Ws extends Ll{constructor(e,t=!1,i){super(),this.cueId=e,this.fade=t,this.getT=i,this.oldSelectedCueId=void 0,this.fadeEmitter=void 0,this.timer=void 0,this.fadeTriggerPeriodMilliseconds=100,this.rerender=!this.fade}do(){void 0===this.oldSelectedCueId&&(this.oldSelectedCueId=oi.getSelectedCueId()),oi.selectCue(this.cueId),this.fade&&(this.fadeEmitter=new wt,this.timer=setInterval(()=>{if(void 0===this.getT)throw"Fade action requires a getT function";let e=this.getT();this.fadeEmitter?.emit(e),(e>=1||e<0)&&this.finishFade()},this.fadeTriggerPeriodMilliseconds))}undo(){if(void 0===this.oldSelectedCueId)throw"Undo called before action was performed!";this.finishFade(),oi.selectCue(this.oldSelectedCueId)}finishFade(){clearInterval(this.timer),this.fadeEmitter?.complete(),this.fadeEmitter=void 0,this.timer=void 0,this.fade=!1,this.getT=void 0}}class fm extends Ll{constructor(e,t,i=0){super(),this.time=e,this.title=t,this.fade=i,this.newCueId=void 0}do(){this.newCueId=oi.addCue(this.time,this.title,this.fade).id}undo(){if(void 0===this.newCueId)throw"Undo called before action was performed!";oi.deleteCue(this.newCueId)}}class pm extends Ll{constructor(e){super(),this.cueId=e,this.oldCue=void 0}do(){this.oldCue=oi.deleteCue(this.cueId)}undo(){if(void 0===this.oldCue)throw"Undo called before action was performed!";null!==this.oldCue&&(this.cueId=oi.addCue(this.oldCue.time,this.oldCue.title,this.oldCue.fade).id)}}class mm extends Ll{constructor(e,t,i,r){super(),this.cueId=e,this.time=t,this.title=i,this.fade=r,this.oldTime=void 0,this.oldTitle=void 0,this.oldFade=void 0}do(){if(void 0===this.oldTime||void 0===this.oldTitle){let e=oi.getCue(this.cueId);if(null===e)throw"Cue not found!";this.oldTime=e.time,this.oldTitle=e.title,this.oldFade=e.fade}void 0===this.time&&(this.time=this.oldTime),void 0===this.title&&(this.title=this.oldTitle),void 0===this.fade&&(this.fade=this.oldFade),oi.updateCue(this.cueId,this.time,this.title,this.fade)}undo(){if(void 0===this.oldTime||void 0===this.oldTitle)throw"Undo called before action was performed!";oi.updateCue(this.cueId,this.oldTime,this.oldTitle,this.oldFade)}}class uu extends Ll{constructor(e){super(),this.cues=e,this.purgeHistory=!0,this.rerender=!0}do(){oi.cues=this.cues,oi.selectCue(null)}undo(){throw"Can't undo load cues action!"}}class rV extends Ll{constructor(e){super(),this.song=e,this.purgeHistory=!0,this.rerender=!1}do(){}undo(){throw"Can't undo load audio action!"}}let Eh=(()=>{class n{constructor(){this.undoHistory=[],this.redoHistory=[],this.eventEmitter=new wt,this.renderEmitter=new wt}canUndo(){return this.undoHistory.length>0}canRedo(){return this.redoHistory.length>0}performAction(t){t.do(),t.purgeHistory?(this.undoHistory=[],this.redoHistory=[]):this.undoHistory.push(t),this.eventEmitter.emit(t),t.rerender&&this.renderEmitter.emit()}undo(){let t=this.undoHistory.pop();void 0!==t&&(t.undo(),this.redoHistory.push(t),this.eventEmitter.emit(t),t.rerender&&this.renderEmitter.emit())}redo(){let t=this.redoHistory.pop();void 0!==t&&this.performAction(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dh=new class Xle{constructor(){this.cueListHeight=localStorage.getItem("preferences.cueListHeight")||"150px",this.cueWindowWidth=localStorage.getItem("preferences.cueWindowWidth")||"300px"}save(){localStorage.setItem("preferences.cueListHeight",this.cueListHeight),localStorage.setItem("preferences.cueWindowWidth",this.cueWindowWidth)}};class Kle{}class Fl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Yle{encodeKey(e){return sV(e)}encodeValue(e){return sV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Qle=/%(\d[a-f0-9])/gi,Jle={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sV(n){return encodeURIComponent(n).replace(Qle,(e,t)=>Jle[t]??e)}function rb(n){return`${n}`}class Nl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Yle,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Zle(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(rb):[rb(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Nl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(rb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(rb(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ece{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function oV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function aV(n){return typeof Blob<"u"&&n instanceof Blob}function lV(n){return typeof FormData<"u"&&n instanceof FormData}class gm{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tce(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Fl),this.context||(this.context=new ece),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Nl,this.urlWithParams=t}serializeBody(){return null===this.body?null:oV(this.body)||aV(this.body)||lV(this.body)||function nce(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lV(this.body)?null:aV(this.body)?this.body.type||null:oV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new gm(t,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var hr=(()=>((hr=hr||{})[hr.Sent=0]="Sent",hr[hr.UploadProgress=1]="UploadProgress",hr[hr.ResponseHeader=2]="ResponseHeader",hr[hr.DownloadProgress=3]="DownloadProgress",hr[hr.Response=4]="Response",hr[hr.User=5]="User",hr))();class qE extends class ice{constructor(e,t=200,i="OK"){this.headers=e.headers||new Fl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=hr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new qE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function XE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let uV=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof gm)s=t;else{let l,c;l=r.headers instanceof Fl?r.headers:new Fl(r.headers),r.params&&(c=r.params instanceof Nl?r.params:new Nl({fromObject:r.params})),s=new gm(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=pt(s).pipe(hl(l=>this.handler.handle(l)));if(t instanceof gm||"events"===r.observe)return o;const a=o.pipe(On(l=>l instanceof qE));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Oe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Oe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Oe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Oe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Nl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,XE(r,i))}post(t,i,r={}){return this.request("POST",t,XE(r,i))}put(t,i,r={}){return this.request("PUT",t,XE(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Y(Kle))},n.\u0275prov=Je({token:n,factory:n.\u0275fac}),n})();const sce=["*"];let sb;function _m(n){return function oce(){if(void 0===sb&&(sb=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(sb=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return sb}()?.createHTML(n)||n}function dV(n){return Error(`Unable to find icon with the name "${n}"`)}function hV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function fV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class du{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let ob=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new du(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(zn.HTML,r);if(!o)throw fV(r);const a=_m(o);return this._addSvgIconConfig(t,i,new du("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new du(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(zn.HTML,i);if(!s)throw fV(i);const o=_m(s);return this._addSvgIconSetConfig(t,new du("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(zn.RESOURCE_URL,t);if(!i)throw hV(t);const r=this._cachedIconsByUrl.get(i);return r?pt(ab(r)):this._loadSvgIconFromConfig(new du(t,null)).pipe(mi(s=>this._cachedIconsByUrl.set(i,s)),Oe(s=>ab(s)))}getNamedSvgIcon(t,i=""){const r=pV(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):pc(dV(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?pt(ab(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Oe(i=>ab(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?pt(r):Jk(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(va(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(zn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),pt(null)})))).pipe(Oe(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw dV(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(mi(i=>t.svgText=i),Oe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?pt(null):this._fetchIcon(t).pipe(mi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(_m("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(_m("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function ace(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(zn.RESOURCE_URL,i);if(!o)throw hV(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Oe(c=>_m(c)),R_(()=>this._inProgressUrlFetches.delete(o)),vu());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(pV(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return cce(s)?new du(s.url,null,s.options):new du(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Y(uV,8),Y(bx),Y(Kt,8),Y(oa))},n.\u0275prov=Je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ab(n){return n.cloneNode(!0)}function pV(n,e){return n+":"+e}function cce(n){return!(!n.url||!n.options)}const uce=Dd(class{constructor(n){this._elementRef=n}}),dce=new Ie("MAT_ICON_DEFAULT_OPTIONS"),hce=new Ie("mat-icon-location",{providedIn:"root",factory:function fce(){const n=Is(Kt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),mV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],pce=mV.map(n=>`[${n}]`).join(", "),mce=/^url\(['"]?#(.*?)['"]?\)$/;let KE=(()=>{class n extends uce{constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ve.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Gn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(pce),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)mV.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(mce):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ti(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(ob),Za("aria-hidden"),R(hce),R(oa),R(dce,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(pi("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),In("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[nt],ngContentSelectors:sce,decls:1,vars:0,template:function(t,i){1&t&&(lr(),Nn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),gce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[Wn,Wn]}),n})();const _ce=["*",[["mat-toolbar-row"]]],vce=["*","mat-toolbar-row"],yce=Dd(class{constructor(n){this._elementRef=n}});let bce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),wce=(()=>{class n extends yce{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Gi),R(Kt))},n.\u0275cmp=Wt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&Pn(r,bce,5),2&t){let s;dt(s=ht())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&In("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[nt],ngContentSelectors:vce,decls:2,vars:0,template:function(t,i){1&t&&(lr(_ce),Nn(0),Nn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),xce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[Wn,Wn]}),n})();const gV=["*"],Cce=["content"];function Mce(n,e){if(1&n){const t=ar();se(0,"div",2),st("click",function(){return ui(t),di(un()._onBackdropClicked())}),fe()}2&n&&In("mat-drawer-shown",un()._isShowingBackdrop())}function Sce(n,e){1&n&&(se(0,"mat-drawer-content"),Nn(1,2),fe())}const Ece=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Dce=["mat-drawer","mat-drawer-content","*"],Tce={transformDrawer:Lf("transform",[Lo("open, open-instant",ki({transform:"none",visibility:"visible"})),Lo("void",ki({"box-shadow":"none",visibility:"hidden"})),Fo("void => open-instant",Oo("0ms")),Fo("void <=> open, open-instant => void",Oo("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Ace=new Ie("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Rce(){return!1}}),_V=new Ie("MAT_DRAWER_CONTAINER");let lb=(()=>{class n extends rM{constructor(t,i,r,s,o){super(r,s,o),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(R(Hi),R(An(()=>yV)),R(Et),R(iM),R(St))},n.\u0275cmp=Wt({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&nl("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[Lt([{provide:rM,useExisting:n}]),nt],ngContentSelectors:gV,decls:1,vars:0,template:function(t,i){1&t&&(lr(),Nn(0))},encapsulation:2,changeDetection:0}),n})(),vV=(()=>{class n{constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new he,this._animationEnd=new he,this._animationState="void",this.openedChange=new wt(!0),this._openedStream=this.openedChange.pipe(On(u=>u),Oe(()=>{})),this.openedStart=this._animationStarted.pipe(On(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),D_(void 0)),this._closedStream=this.openedChange.pipe(On(u=>!u),Oe(()=>{})),this.closedStart=this._animationStarted.pipe(On(u=>u.fromState!==u.toState&&"void"===u.toState),D_(void 0)),this._destroyed=new he,this.onPositionChanged=new wt,this._modeChanged=new he,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Jr(this._elementRef.nativeElement,"keydown").pipe(On(u=>27===u.keyCode&&!this.disableClose&&!fl(u)),Cn(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(QC((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Gn(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Gn(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Gn(t))}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(ti(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Z_),R(pl),R(Gi),R(St),R(np),R(Kt,8),R(_V,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&kn(Cce,5),2&t){let r;dt(r=ht())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&gg("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&t&&(pi("align",null),vg("@transform",i._animationState),In("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:gV,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(lr(),se(0,"div",0,1),Nn(2),fe())},dependencies:[rM],encapsulation:2,data:{animation:[Tce.transformDrawer]},changeDetection:0}),n})(),yV=(()=>{class n{constructor(t,i,r,s,o,a=!1,l){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new sc,this.backdropClick=new wt,this._destroyed=new he,this._doCheckSubject=new he,this._contentMargins={left:null,right:null},this._contentMarginChanges=new he,t&&t.change.pipe(Cn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(Cn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Gn(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:Gn(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(es(this._allDrawers),Cn(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(es(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(tp(10),Cn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(On(i=>i.fromState!==i.toState),Cn(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Cn(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Cn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ti(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Cn(gr(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(R(vs,8),R(Et),R(St),R(Hi),R(xc),R(Ace),R(wr,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(Pn(r,lb,5),Pn(r,vV,5)),2&t){let s;dt(s=ht())&&(i._content=s.first),dt(s=ht())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(1&t&&kn(lb,5),2&t){let r;dt(r=ht())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&In("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Lt([{provide:_V,useExisting:n}])],ngContentSelectors:Dce,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(lr(Ece),Nt(0,Mce,1,2,"div",0),Nn(1),Nn(2,1),Nt(3,Sce,2,0,"mat-drawer-content",1)),2&t&&(Le("ngIf",i.hasBackdrop),Ue(3),Le("ngIf",!i._content))},dependencies:[ma,lb],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),Ice=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co,Wn,sp,sp,Wn]}),n})(),kce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[Wn,Wn]}),n})();const bV=["*"],Pce=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Oce=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Vce=lp(Td(class{})),Hce=Td(class{}),xV=new Ie("MatList"),zce=new Ie("MatNavList");let Uce=(()=>{class n extends Vce{constructor(t){super(),this._elementRef=t,this._stateChanges=new he,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(R(Et))},n.\u0275cmp=Wt({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[Lt([{provide:xV,useExisting:n}]),nt,Ri],ngContentSelectors:bV,decls:1,vars:0,template:function(t,i){1&t&&(lr(),Nn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),CV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),YE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),Gce=(()=>{class n extends Hce{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new he,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Cn(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Gn(t)}ngAfterContentInit(){!function rN(n,e,t="mat"){n.changes.pipe(es(n)).subscribe(({length:i})=>{cp(e,`${t}-2-line`,!1),cp(e,`${t}-3-line`,!1),cp(e,`${t}-multi-line`,!1),2===i||3===i?cp(e,`${t}-${i}-line`,!0):i>3&&cp(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(zce,8),R(xV,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(Pn(r,CV,5),Pn(r,YE,5),Pn(r,pM,5)),2&t){let s;dt(s=ht())&&(i._avatar=s.first),dt(s=ht())&&(i._icon=s.first),dt(s=ht())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&In("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[nt],ngContentSelectors:Oce,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(lr(Pce),se(0,"span",0),nn(1,"span",1),Nn(2),se(3,"span",2),Nn(4,1),fe(),Nn(5,2),fe()),2&t&&(Ue(1),Le("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[Ad],encapsulation:2,changeDetection:0}),n})(),Kce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[sN,gM,Wn,cN,co,sN,Wn,cN,kce]}),n})();const hu=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function SV(n,e,t,i){const r=e.querySelectorAll(n);if(r.length){const s=t.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let Qce=0;function EV(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Qce++}`)}function DV(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function TV(n,e,t,i){const r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return e.top&&(r.top+=i),e.bottom&&(r.bottom+=i),e.left&&(r.left+=t),e.right&&(r.right+=t),r.height=r.bottom-r.top,r.width=r.right-r.left,r}const AV=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function RV(n,e){return n.left&&n.top?e.topLeft:n.right&&n.top?e.topRight:n.left&&n.bottom?e.bottomLeft:n.right&&n.bottom?e.bottomRight:n.left||n.right?e.leftOrRight:n.top||n.bottom?e.topOrBottom:""}function cb({edges:n,initialRectangle:e,newRectangle:t}){const i={};return Object.keys(n).forEach(r=>{i[r]=(t[r]||0)-(e[r]||0)}),i}const IV="resize-active";let kV=(()=>{class n{constructor(t,i,r,s){this.platformId=t,this.renderer=i,this.elm=r,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=AV,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new wt,this.resizing=new wt,this.resizeEnd=new wt,this.mouseup=new he,this.mousedown=new he,this.mousemove=new he,this.destroy$=new he,this.pointerEventListeners=Th.getInstance(i,s)}ngOnInit(){const t=gr(this.pointerEventListeners.pointerDown,this.mousedown),i=gr(this.pointerEventListeners.pointerMove,this.mousemove).pipe(mi(({event:c})=>{if(s)try{c.preventDefault()}catch{}}),vu()),r=gr(this.pointerEventListeners.pointerUp,this.mouseup);let s;const o=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>Object.assign(Object.assign({},AV),this.resizeCursors);t.pipe(Fi(c=>{function u(f){return{clientX:f.clientX-c.clientX,clientY:f.clientY-c.clientY}}const d=()=>{const f={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?f.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(f.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?f.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(f.y=+this.resizeSnapGrid.bottom)),f};function h(f,p){return{x:Math.ceil(f.clientX/p.x),y:Math.ceil(f.clientY/p.y)}}return gr(i.pipe(ti(1)).pipe(Oe(f=>[,f])),i.pipe(function Yce(){return vt((n,e)=>{let t,i=!1;n.subscribe(ft(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}())).pipe(Oe(([f,p])=>[f&&u(f),u(p)])).pipe(On(([f,p])=>{if(!f)return!0;const m=d(),g=h(f,m),_=h(p,m);return g.x!==_.x||g.y!==_.y})).pipe(Oe(([,f])=>{const p=d();return{clientX:Math.round(f.clientX/p.x)*p.x,clientY:Math.round(f.clientY/p.y)*p.y}})).pipe(Cn(gr(r,t)))})).pipe(On(()=>!!s)).pipe(Oe(({clientX:c,clientY:u})=>TV(s.startingRect,s.edges,c,u))).pipe(On(c=>this.allowNegativeResizes||!!(c.height&&c.width&&c.height>0&&c.width>0))).pipe(On(c=>!this.validateResize||this.validateResize({rectangle:c,edges:cb({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c})})),Cn(this.destroy$)).subscribe(c=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${c.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${c.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${c.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${c.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:cb({edges:s.edges,initialRectangle:s.startingRect,newRectangle:c}),rectangle:c})}),s.currentRect=c}),t.pipe(Oe(({edges:c})=>c||{}),On(c=>Object.keys(c).length>0),Cn(this.destroy$)).subscribe(c=>{s&&o();const u=function Jce(n,e){let t=0,i=0;const r=n.nativeElement.style,o=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(o&&o.includes("translate")&&(t=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=o.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===e)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-t,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-t};{const a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-t,right:a.right-t,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:c,startingRect:u,currentRect:u};const d=a(),h=RV(s.edges,d);this.renderer.setStyle(document.body,"cursor",h),this.setElementClass(this.elm,IV,!0),this.enableGhostResize&&(s.clonedNode=function Zce(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return e.removeAttribute("id"),t.forEach(r=>{r.removeAttribute("id")}),"canvas"===i?DV(n,e):("input"===i||"select"===i||"textarea"===i)&&EV(n,e),SV("canvas",n,e,DV),SV("input, textarea, select",n,e,EV),e}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",RV(s.edges,d)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:cb({edges:c,initialRectangle:u,newRectangle:u}),rectangle:TV(u,{},0,0)})})}),r.pipe(Cn(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,IV),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:cb({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),o(),s=null)})}ngOnDestroy(){jg(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(t,i,r){r?this.renderer.addClass(t.nativeElement,i):this.renderer.removeClass(t.nativeElement,i)}}return n.\u0275fac=function(t){return new(t||n)(R(cd),R(eo),R(Et),R(St))},n.\u0275dir=Ae({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class Th{constructor(e,t){this.pointerDown=new D(i=>{let r,s;return t.runOutsideAngular(()=>{r=e.listen("document","mousedown",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),hu&&(s=e.listen("document","touchstart",o=>{i.next({clientX:o.touches[0].clientX,clientY:o.touches[0].clientY,event:o})}))}),()=>{r(),hu&&s()}}).pipe(vu()),this.pointerMove=new D(i=>{let r,s;return t.runOutsideAngular(()=>{r=e.listen("document","mousemove",o=>{i.next({clientX:o.clientX,clientY:o.clientY,event:o})}),hu&&(s=e.listen("document","touchmove",o=>{i.next({clientX:o.targetTouches[0].clientX,clientY:o.targetTouches[0].clientY,event:o})}))}),()=>{r(),hu&&s()}}).pipe(vu()),this.pointerUp=new D(i=>{let r,s,o;return t.runOutsideAngular(()=>{r=e.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),hu&&(s=e.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),o=e.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),hu&&(s(),o())}}).pipe(vu())}static getInstance(e,t){return Th.instance||(Th.instance=new Th(e,t)),Th.instance}}let nue=(()=>{class n{constructor(t,i,r,s){this.renderer=t,this.element=i,this.zone=r,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new he}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(t=>{this.onMousedown(t,t.clientX,t.clientY)}),this.listenOnTheHost("mouseup").subscribe(t=>{this.onMouseup(t.clientX,t.clientY)}),hu&&(this.listenOnTheHost("touchstart").subscribe(t=>{this.onMousedown(t,t.touches[0].clientX,t.touches[0].clientY)}),gr(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(t=>{this.onMouseup(t.changedTouches[0].clientX,t.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(t,i,r){t.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(t,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:t,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(t,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:t})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(t=>{this.eventListeners[t](),delete this.eventListeners[t]})}listenOnTheHost(t){return Jr(this.element.nativeElement,t).pipe(Cn(this.destroy$))}}return n.\u0275fac=function(t){return new(t||n)(R(eo),R(Et),R(St),R(kV,8))},n.\u0275dir=Ae({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),iue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({}),n})();class PV extends um{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new lue(t)}),this.register(function(t){return new mue(t)}),this.register(function(t){return new gue(t)}),this.register(function(t){return new uue(t)}),this.register(function(t){return new due(t)}),this.register(function(t){return new hue(t)}),this.register(function(t){return new fue(t)}),this.register(function(t){return new aue(t)}),this.register(function(t){return new pue(t)}),this.register(function(t){return new cue(t)}),this.register(function(t){return new sue(t)}),this.register(function(t){return new _ue(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Wa.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new qo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(Wa.decodeText(new Uint8Array(e,0,4))===OV){try{o[Sn.KHR_BINARY_GLTF]=new vue(e)}catch(d){return void(r&&r(d))}s=o[Sn.KHR_BINARY_GLTF].content}else s=Wa.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Iue(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case Sn.KHR_MATERIALS_UNLIT:o[d]=new oue;break;case Sn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new wue;break;case Sn.KHR_DRACO_MESH_COMPRESSION:o[d]=new yue(l,this.dracoLoader);break;case Sn.KHR_TEXTURE_TRANSFORM:o[d]=new bue;break;case Sn.KHR_MESH_QUANTIZATION:o[d]=new xue;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function rue(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Sn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class sue{constructor(e){this.parser=e,this.name=Sn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new et(16777215);void 0!==l.color&&u.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new OB(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new BE(u),c.distance=d;break;case"spot":c=new FE(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class oue{constructor(){this.name=Sn.KHR_MATERIALS_UNLIT}getMaterialType(){return Us}extendParams(e,t,i){const r=[];e.color=new et(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Kn))}return Promise.all(r)}}class aue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class lue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ce(a,a)}return Promise.all(s)}}class cue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class uue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new et(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Kn)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class due{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class hue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new et(a[0],a[1],a[2]),Promise.all(s)}}class fue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class pue{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Pl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new et(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Kn)),Promise.all(s)}}class mue{constructor(e){this.parser=e,this.name=Sn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class gue{constructor(e){this.parser=e,this.name=Sn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class _ue{constructor(e){this.name=Sn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,h=new ArrayBuffer(u*d),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),u,d,f,r.mode,r.filter),h})}return null}}const OV="glTF";class vue{constructor(e){this.name=Sn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Wa.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==OV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(e,12+s,o);this.content=Wa.decodeText(l)}else if(5130562===a){const l=12+s;this.body=e.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class yue{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Sn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=QE[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=QE[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];c[d]=ym[h.componentType],l[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];void 0!==m&&(p.normalized=m)}d(h)},a,c)})})}}class bue{constructor(){this.name=Sn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ZE extends sm{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new et).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class wue{constructor(){this.name=Sn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return ZE}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new et(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Kn)),e.emissive=new et(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new et(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,Kn))}return Promise.all(s)}createMaterial(e){const t=new ZE(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class xue{constructor(){this.name=Sn.KHR_MESH_QUANTIZATION}}class FV extends om{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*c,m=p-c,g=-2*f+3*h,_=f-h,v=1-g,y=_-h+d;for(let b=0;b!==a;b++)s[b]=v*o[m+b+a]+y*(o[m+b+l]*u)+g*o[p+b+a]+_*(o[p+b]*u);return s}}const Cue=new ns;class Mue extends FV{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Cue.fromArray(s).normalize().toArray(s),s}}const ym={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NV={9728:$i,9729:Ei,9984:1004,9985:1007,9986:1005,9987:wl},BV={33071:zr,33648:1002,10497:Nc},VV={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},QE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Sue={CUBICSPLINE:void 0,LINEAR:qd,STEP:Lp};function bm(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function fu(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Tue(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Aue(n){const e=n.extensions&&n.extensions[Sn.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+HV(e.attributes):n.indices+":"+HV(n.attributes)+":"+n.mode,t}function HV(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function eD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Iue{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new rue,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new cle(this.options.manager):new yle(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};bm(s,a,r),fu(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Sn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Wa.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=VV[r.type],c=ym[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(f&&f!==u*l){const _=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let y=t.cache.get(v);y||(m=new c(a,_*f,r.count*f/u),y=new vE(m,f/u),t.cache.add(v,y)),g=new nu(y,l,h%f/u,p)}else m=null===a?new c(r.count*l):new c(a,h,r.count*l),g=new Xi(m,l,p);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,x=new(0,ym[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*VV.SCALAR),C=new c(o[2],b,r.sparse.count*l);null!==a&&(g=new Xi(g.array.slice(),g.itemSize,g.normalized));for(let A=0,w=x.length;A<w;A++){const T=x[A];if(g.setX(T,C[A*l]),l>=2&&g.setY(T,C[A*l+1]),l>=3&&g.setZ(T,C[A*l+2]),l>=4&&g.setW(T,C[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=NV[h.magFilter]||Ei,u.minFilter=NV[h.minFilter]||wl,u.wrapS=BV[h.wrapS]||Nc,u.wrapT=BV[h.wrapT]||Nc,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(m){const g=new mo(m);g.needsUpdate=!0,h(g)}),t.load(Wa.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function Rue(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[Sn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Sn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Sn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new CE,yo.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new is,yo.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return sm}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Sn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[Sn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else if(l[Sn.KHR_MATERIALS_UNLIT]){const d=r[Sn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new et(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Kn)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Us&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ce(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==s.occlusionTexture&&o!==Us&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Us&&(a.emissive=(new et).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Us&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Kn)),Promise.all(c).then(function(){let d;return d=o===ZE?r[Sn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(d.name=s.name),fu(d,s),t.associations.set(d,{materials:e}),s.extensions&&bm(r,d,s),d})}createUniqueName(e){const t=fi.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Sn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return UV(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Aue(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[Sn.KHR_DRACO_MESH_COMPRESSION]?s(c):UV(new bn,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new sm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[l].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=o[f];let _;const v=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===s.isSkinnedMesh?new tB(m,v):new Ur(m,v),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=GV(_.geometry,1):6===g.mode&&(_.geometry=GV(_.geometry,2));else if(1===g.mode)_=new xE(m,v);else if(3===g.mode)_=new iu(m,v);else if(2===g.mode)_=new uB(m,v);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new hB(m,v)}Object.keys(_.geometry.morphAttributes).length>0&&Tue(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),fu(_,s),g.extensions&&bm(r,_,g),t.assignFinalMaterial(_),d.push(_)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return d[0];const h=new za;t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new dr(Go.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new Gp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),fu(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const d=i.channels[c],h=i.samplers[d.sampler],f=d.target,m=void 0!==i.parameters?i.parameters[h.input]:h.input,g=void 0!==i.parameters?i.parameters[h.output]:h.output;r.push(this.getDependency("node",void 0!==f.node?f.node:f.id)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let _=0,v=u.length;_<v;_++){const y=u[_],b=d[_],x=h[_],C=f[_],A=p[_];if(void 0===y)continue;let w;switch(y.updateMatrix(),y.matrixAutoUpdate=!0,Bl[A.path]){case Bl.weights:w=am;break;case Bl.rotation:w=ru;break;default:w=lm}const T=y.name?y.name:y.uuid,B=void 0!==C.interpolation?Sue[C.interpolation]:qd,H=[];Bl[A.path]===Bl.weights?y.traverse(function(ie){ie.morphTargetInfluences&&H.push(ie.name?ie.name:ie.uuid)}):H.push(T);let J=x.array;if(x.normalized){const ie=eD(J.constructor),z=new Float32Array(J.length);for(let te=0,V=J.length;te<V;te++)z[te]=J[te]*ie;J=z}for(let ie=0,z=H.length;ie<z;ie++){const te=new w(H[ie]+"."+Bl[A.path],b.array,J,B);"CUBICSPLINE"===C.interpolation&&(te.createInterpolant=function(j){return new(this instanceof ru?Mue:FV)(this.times,this.values,this.getValueSize()/3,j)},te.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(te)}}return new cm(i.name?i.name:"animation_"+e,void 0,m)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new bE:a.length>1?new za:1===a.length?a[0]:new ur,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),fu(l,s),s.extensions&&bm(i,l,s),void 0!==s.matrix){const c=new dn;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new za;r.name&&(o.name=s.createUniqueName(r.name)),fu(o,r),r.extensions&&bm(i,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(zV(a[c],o,t,s));return Promise.all(l).then(function(){return s.associations=(u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof yo||h instanceof mo)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);null!=f&&d.set(h,f)}),d})(o),o})}}function zV(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=a.length;d<h;d++){const f=a[d];if(f){c.push(f);const p=new dn;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*d),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new Sy(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(zV(a[l],s,t,i))}return Promise.all(o)})}function UV(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=QE[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return fu(n,e),function kue(n,e,t){const i=e.attributes,r=new qc;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new k(l[0],l[1],l[2]),new k(c[0],c[1],c[2])),a.normalized){const u=eD(ym[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new k,l=new k;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=eD(ym[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Zc;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Due(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],h=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function GV(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const Pue=["renderCanvas"];let Lue=(()=>{class n{constructor(t){this.actions=t,this.rig=void 0,this.isRendering=!1,this.renderQueued=!1,this.lightDatabase=new Map,this.scene=new j3,this.camera=new Gp(-10,10,5,-5,0,200);const i=new LB(4210752,.2),r=new BE(16777215,.1,0);r.position.set(0,0,0),this.scene.add(i),this.scene.add(r),this.camera.up.set(0,0,1),this.camera.position.set(0,-30,7),this.camera.lookAt(0,15,3);let s=0;this.actions.eventEmitter.subscribe(o=>{o instanceof jE?jn.getSelectedLights().forEach(a=>{this.updateLight(a,jn.getLightValue(a))}):o instanceof uu?(jn.getAllLights().forEach(a=>{this.updateLight(a,jn.getLightValue(a))}),this.render()):o instanceof Ws&&(s+=1,o.fade?(l=>{o.fadeEmitter.subscribe(c=>{l===s&&(jn.getProgrammedChannels().forEach(u=>{let d=jn.getLightValue(u,!1,Xo.executor),h=jn.getLightValue(u,!1,Xo.both);this.updateLight(u,ts.interpolate(d,h,c))}),this.render())})})(s):jn.getAllLights().forEach(a=>{this.updateLight(a,jn.getLightValue(a))}))}),this.actions.renderEmitter.subscribe(()=>{this.render()})}ngOnInit(){this.loadModels(),this.loadRig("/assets/rigs/ds"),this.loadLights()}loadModels(){var t=this;return Pi(function*(){const i=new PV;let r=yield Promise.all([i.loadAsync("/assets/dancer2.glb")]);r[0].scene.position.set(0,11,.75),r[0].scene.rotateX(Go.degToRad(90)),r.forEach(s=>{t.scene.add(s.scene)}),t.render()})()}loadRig(t){var i=this;return Pi(function*(){let s=yield(new PV).loadAsync(t+"/model.glb");s.scene.scale.set(.001,.001,.001),s.scene.up.set(0,0,-1),void 0!==i.rig&&i.scene.remove(i.rig),i.scene.add(s.scene),i.rig=s.scene,i.render()})()}loadLights(){var t=this;return Pi(function*(){(yield jn.loadLights()).forEach(r=>{const s=new za;s.position.set(r.location.x,r.location.y,r.location.z+.2),s.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z);const o=r.has_color?16711680:16759166,a=new k(0,0,-10);if(a.applyAxisAngle(new k(1,0,0),r.rotation.tilt),a.applyAxisAngle(new k(0,0,1),r.rotation.pan),r.type.includes("Colorforce II")){s.position.setY(r.location.y-.5);const l=new FB(o,0,1,.1);l.position.set(0,0,0),l.lookAt(a),s.add(l),t.lightDatabase.set(r.channel,l)}else{const l=new FE(o,0,0,r.angle,.2);l.position.set(0,0,0),l.target.position.set(a.x,a.y,a.z),s.add(l),s.add(l.target),t.lightDatabase.set(r.channel,l)}t.scene.add(s)}),t.render()})()}ngAfterViewInit(){let t=new W3({canvas:this.canvas.nativeElement,antialias:!0});t.setSize(800,400),this.renderer=t,this.render()}updateLight(t,i){let r=this.lightDatabase.get(t),s=jn.getLightProperties(t);if(r&&s&&(r.intensity=s.intensity*i.brightness,s.has_color&&(r.color=new et(i.color)),s.has_moving)){const o=new k(0,0,-10);o.applyAxisAngle(new k(1,0,0),Go.degToRad(i.tilt)),o.applyAxisAngle(new k(0,0,1),Go.degToRad(i.pan)),r.target.position.set(o.x,o.y,o.z)}}render(){this.isRendering?this.renderQueued=!0:(this.isRendering=!0,console.log("RENDER"),this.renderer.render(this.scene,this.camera),this.isRendering=!1,this.renderQueued&&(this.renderQueued=!1,this.render()))}}return n.\u0275fac=function(t){return new(t||n)(R(Eh))},n.\u0275cmp=Wt({type:n,selectors:[["scene-render"]],viewQuery:function(t,i){if(1&t&&kn(Pue,5),2&t){let r;dt(r=ht())&&(i.canvas=r.first)}},decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["renderCanvas",""]],template:function(t,i){1&t&&nn(0,"canvas",0,1)},styles:["canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}"]}),n})();var Fue=rs(454),Nue=rs.n(Fue);class WV{constructor(e,t,i){this.wavesurfer=i,this.wrapper=i.drawer.wrapper,this.util=i.util,this.style=this.util.style,this.regionsUtil=t,this.vertical=i.drawer.params.vertical,this.id=e.id??i.util.getId(),this.start=Number(e.start)||0,this.end=null==e.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(e.end),this.resize=void 0===e.resize||Boolean(e.resize),this.drag=void 0===e.drag||Boolean(e.drag),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(e.loop),this.color=e.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=e.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=e.data||{},this.attributes=e.attributes||{},this.showTooltip=e.showTooltip??!0,this.maxLength=e.maxLength,this.minLength=e.minLength,this._onRedraw=()=>this.updateRender(),this.scroll=!1!==e.scroll&&i.params.scrollParent,this.scrollSpeed=e.scrollSpeed||1,this.scrollThreshold=e.scrollThreshold||10,this.preventContextMenu=void 0!==e.preventContextMenu&&Boolean(e.preventContextMenu);let r=null==e.channelIdx?-1:parseInt(e.channelIdx);if(this.channelIdx=r,this.regionHeight="100%",this.marginTop="0px",-1!==r){let s=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;s>=0&&r<s&&(this.regionHeight=Math.floor(1/s*100)+"%",this.marginTop=this.wavesurfer.getHeight()*r+"px")}this.formatTimeCallback=e.formatTimeCallback,this.edgeScrollWidth=e.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}update(e,t){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.handleStyle&&(this.handleStyle=e.handleStyle),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize),this.updateHandlesResize(this.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,t)}remove(){this.element&&(this.wrapper.removeChild(this.element.domElement),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}play(e){this.wavesurfer.play(e||this.start,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}playLoop(e){this.loop=!0,this.play(e)}setLoop(e){this.loop=e}render(){this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id);for(const e in this.attributes)this.element.setAttribute("data-region-"+e,this.attributes[e]);if(this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";const e={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},t="none"!==this.handleStyle.left?Object.assign({left:"0px"},e,this.handleStyle.left):null,i="none"!==this.handleStyle.right?Object.assign({right:"0px"},e,this.handleStyle.right):null;t&&this.style(this.handleLeftEl,t),i&&this.style(this.handleRightEl,i)}this.updateRender(),this.bindEvents()}formatTime(e,t){return this.formatTimeCallback?this.formatTimeCallback(e,t):(e==t?[e]:[e,t]).map(i=>[Math.floor(i%3600/60),("00"+Math.floor(i%60)).slice(-2)].join(":")).join("-")}getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}updateRender(){const e=this.wavesurfer.getDuration(),t=this.getWidth();let i=this.start,r=this.end;if(i<0&&(i=0,r-=i),r>e&&(r=e,i=e-(r-i)),null!=this.minLength&&(r=Math.max(i+this.minLength,r)),null!=this.maxLength&&(r=Math.min(i+this.maxLength,r)),null!=this.element){const s=Math.round(i/e*t),o=Math.round(r/e*t)-s;this.style(this.element,{left:s+"px",width:o+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"});for(const a in this.attributes)this.element.setAttribute("data-region-"+a,this.attributes[a]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}bindInOut(){this.firedIn=!1,this.firedOut=!1;const e=t=>{let i=Math.round(10*this.start)/10,r=Math.round(10*this.end)/10;t=Math.round(10*t)/10,!this.firedOut&&this.firedIn&&(i>t||r<=t)&&(this.firedOut=!0,this.firedIn=!1,this.fireEvent("out"),this.wavesurfer.fireEvent("region-out",this)),!this.firedIn&&i<=t&&r>t&&(this.firedIn=!0,this.firedOut=!1,this.fireEvent("in"),this.wavesurfer.fireEvent("region-in",this))};this.wavesurfer.backend.on("audioprocess",e),this.on("remove",()=>{this.wavesurfer.backend.un("audioprocess",e)}),this.on("out",()=>{if(this.loop){const t=this.wavesurfer.getCurrentTime();t>=this.start&&t<=this.end&&this.wavesurfer.play(this.start)}})}bindEvents(){const e=this.preventContextMenu;this.element.addEventListener("mouseenter",t=>{this.fireEvent("mouseenter",t),this.wavesurfer.fireEvent("region-mouseenter",this,t)}),this.element.addEventListener("mouseleave",t=>{this.fireEvent("mouseleave",t),this.wavesurfer.fireEvent("region-mouseleave",this,t)}),this.element.addEventListener("click",t=>{t.preventDefault(),this.fireEvent("click",t),this.wavesurfer.fireEvent("region-click",this,t)}),this.element.addEventListener("dblclick",t=>{t.stopPropagation(),t.preventDefault(),this.fireEvent("dblclick",t),this.wavesurfer.fireEvent("region-dblclick",this,t)}),this.element.addEventListener("contextmenu",t=>{e&&t.preventDefault(),this.fireEvent("contextmenu",t),this.wavesurfer.fireEvent("region-contextmenu",this,t)}),(this.drag||this.resize)&&this.bindDragEvents()}bindDragEvents(){const e=this.wavesurfer.drawer.container,t=this.scrollSpeed;let r,s,o,a,l,u,d,h,f,c=!1;const p=v=>{let y=this.util.withOrientation(v,this.vertical);const b=this.wavesurfer.getDuration();if(!u||!o&&!l)return;const x=y.clientX;let C=0,A=0,w=0,T=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(v)*b);if(o)-1===u?(A=h*this.wavesurfer.params.minPxPerSec,C=x-d.left):(A=f*this.wavesurfer.params.minPxPerSec,C=d.right-x);else{let ie=this.minLength;ie||(ie=0),"start"===l?(T>this.end-ie&&(T=this.end-ie,w=t*u),T<0&&(T=0)):"end"===l&&(T<this.start+ie&&(T=this.start+ie,w=t*u),T>b&&(T=b))}const B=this.wrapper.scrollLeft;if(-1===u){if(0===Math.round(B)||Math.round(B-A+C)<=0)return}else if(Math.round(B)===a||Math.round(B+A-C)>=a)return;let H=B-w+t*u;if(-1===u){const ie=Math.max(0+A-C,H);this.wrapper.scrollLeft=H=ie}else{const ie=Math.min(a-A+C,H);this.wrapper.scrollLeft=H=ie}const J=T-r;r=T,o?this.onDrag(J):this.onResize(J,l),window.requestAnimationFrame(()=>{p(v)})},m=v=>{const y=this.wavesurfer.getDuration();v.touches&&v.touches.length>1||(s=v.targetTouches?v.targetTouches[0].identifier:null,(this.drag||this.resize)&&v.stopPropagation(),r=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(v,!0)*y),h=r-this.start,f=this.end-r,a=this.wrapper.scrollWidth-this.wrapper.clientWidth,d=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.isResizing=!1,this.isDragging=!1,"handle"===v.target.tagName.toLowerCase()?(this.isResizing=!0,l=v.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(this.isDragging=!0,o=!0,l=!1))},g=v=>{v.touches&&v.touches.length>1||((o||l)&&(this.isDragging=!1,this.isResizing=!1,o=!1,u=null,l=!1),c&&(c=!1,this.util.preventClick(),this.fireEvent("update-end",v),this.wavesurfer.fireEvent("region-update-end",this,v)))},_=v=>{const y=this.wavesurfer.getDuration();let b=this.util.withOrientation(v,this.vertical);if(v.touches&&v.touches.length>1||v.targetTouches&&v.targetTouches[0].identifier!=s||!o&&!l)return;let C=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(v)*y);if(o){const w=this.wavesurfer.getDuration();C>w-f&&(C=w-f),C-h<0&&(C=h)}if(l){let w=this.minLength;w||(w=0),"start"===l?(C>this.end-w&&(C=this.end-w),C<0&&(C=0)):"end"===l&&(C<this.start+w&&(C=this.start+w),C>y&&(C=y))}let A=C-r;if(r=C,this.drag&&o&&(c=c||!!A,this.onDrag(A)),this.resize&&l&&(c=c||!!A,this.onResize(A,l)),this.scroll&&e.clientWidth<this.wrapper.scrollWidth){let w=b.clientX;u=w<d.left+this.edgeScrollWidth?-1:w>d.right-this.edgeScrollWidth?1:null,u&&p(v)}};this.element.addEventListener("mousedown",m),this.element.addEventListener("touchstart",m),document.body.addEventListener("mousemove",_),document.body.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("mouseup",g),document.body.addEventListener("touchend",g),this.on("remove",()=>{document.removeEventListener("mouseup",g),document.body.removeEventListener("touchend",g),document.body.removeEventListener("mousemove",_),document.body.removeEventListener("touchmove",_)}),this.wavesurfer.on("destroy",()=>{document.removeEventListener("mouseup",g),document.body.removeEventListener("touchend",g)})}onDrag(e){const t=this.wavesurfer.getDuration();this.end+e>t&&(e=t-this.end),this.start+e<0&&(e=-1*this.start);const i={direction:this._getDragDirection(e),action:"drag"};this.update({start:this.start+e,end:this.end+e},i)}_getDragDirection(e){return e<0?"left":e>0?"right":null}onResize(e,t){const i=this.wavesurfer.getDuration(),r={action:"resize",direction:"start"===t?"left":"right"};"start"===t?(e>0&&this.end-(this.start+e)<this.minLength&&(e=this.end-this.minLength-this.start),e<0&&this.end-(this.start+e)>this.maxLength&&(e=this.end-this.start-this.maxLength),e<0&&this.start+e<0&&(e=-1*this.start),this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)},r)):(e<0&&this.end+e-this.start<this.minLength&&(e=this.start+this.minLength-this.end),e>0&&this.end+e-this.start>this.maxLength&&(e=this.maxLength-(this.end-this.start)),e>0&&this.end+e>i&&(e=i-this.end),this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)},r))}updateHandlesResize(e){let t;t=e?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:t}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:t})}}class nD{static create(e){return{name:"regions",deferInit:!(!e||!e.deferInit)&&e.deferInit,params:e,staticProps:{addRegion(t){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(t)},clearRegions(){this.regions&&this.regions.clear()},enableDragSelection(t){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(t)},disableDragSelection(){this.regions.disableDragSelection()}},instance:nD}}constructor(e,t){this.params=e,this.wavesurfer=t,this.util={...t.util,getRegionSnapToGridValue:s=>this.getRegionSnapToGridValue(s,e)},this.maxRegions=e.maxRegions,this.regionsMinLength=e.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(s=>{WV.prototype[s]=this.util.Observer.prototype[s]}),this.wavesurfer.Region=WV,this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.orientation=this.wavesurfer.drawer.orientation,this.defaultEdgeScrollWidth=.05*this.wrapper.clientWidth,this.params.regions&&this.params.regions.forEach(s=>{this.add(s)})},this.list={},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.vertical=this.wavesurfer.drawer.params.vertical,this.params.dragSelection&&this.enableDragSelection(this.params),Object.keys(this.list).forEach(s=>{this.list[s].updateRender()})}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}add(e){if(this.wouldExceedMaxRegions())return null;!(e={edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,...e}).formatTimeCallback&&this.params.formatTimeCallback&&(e={...e,formatTimeCallback:this.params.formatTimeCallback}),!e.minLength&&this.regionsMinLength&&(e={...e,minLength:this.regionsMinLength});const t=new this.wavesurfer.Region(e,this.util,this.wavesurfer);return this.list[t.id]=t,t.on("remove",()=>{delete this.list[t.id]}),t}clear(){Object.keys(this.list).forEach(e=>{this.list[e].remove()})}enableDragSelection(e){this.disableDragSelection();const t=e.slop||2,i=this.wavesurfer.drawer.container,r=!1!==e.scroll&&this.wavesurfer.params.scrollParent,s=e.scrollSpeed||1,o=e.scrollThreshold||10;let a,c,u,d,h,p,m,l=this.wavesurfer.getDuration(),f=0;const g=b=>{if(!d||!p)return;let x=this.wrapper.scrollLeft+s*p;this.wrapper.scrollLeft=x=Math.min(c,Math.max(0,x));const C=this.wavesurfer.drawer.handleEvent(b);d.update({start:Math.min(C*l,u*l),end:Math.max(C*l,u*l)}),x<c&&x>0&&window.requestAnimationFrame(()=>{g(b)})},_=b=>{if(!(b.touches&&b.touches.length>1)){if(l=this.wavesurfer.getDuration(),h=b.targetTouches?b.targetTouches[0].identifier:null,c=this.wrapper.scrollWidth-this.wrapper.clientWidth,m=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.wavesurfer.params.splitChannels){const w=Math.floor(((b.touches?b.touches[0].clientY:b.clientY)-m.top)/(this.wrapper.clientHeight/(null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:1)));e.channelIdx=w;const T=this.wavesurfer.params.splitChannelsOptions.channelColors[w];T&&T.dragColor&&(e.color=T.dragColor)}a=!0,u=this.wavesurfer.drawer.handleEvent(b,!0),d=null,p=null}};this.wrapper.addEventListener("mousedown",_),this.wrapper.addEventListener("touchstart",_),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchstart",_),this.wrapper.removeEventListener("mousedown",_)});const v=b=>{b.touches&&b.touches.length>1||(a=!1,f=0,p=null,d&&(this.util.preventClick(),d.fireEvent("update-end",b),this.wavesurfer.fireEvent("region-update-end",d,b)),d=null)};this.wrapper.addEventListener("mouseleave",v),this.wrapper.addEventListener("mouseup",v),this.wrapper.addEventListener("touchend",v),document.body.addEventListener("mouseup",v),document.body.addEventListener("touchend",v),this.on("disable-drag-selection",()=>{document.body.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v),this.wrapper.removeEventListener("touchend",v),this.wrapper.removeEventListener("mouseup",v),this.wrapper.removeEventListener("mouseleave",v)});const y=b=>{if(!a||++f<=t||b.touches&&b.touches.length>1||b.targetTouches&&b.targetTouches[0].identifier!=h||!d&&(d=this.add(e||{}),!d))return;const x=this.wavesurfer.drawer.handleEvent(b),C=this.wavesurfer.regions.util.getRegionSnapToGridValue(u*l),A=this.wavesurfer.regions.util.getRegionSnapToGridValue(x*l);d.update({start:Math.min(A,C),end:Math.max(A,C)});let w=this.util.withOrientation(b,this.vertical);if(r&&i.clientWidth<this.wrapper.scrollWidth){const T=w.clientX-m.left;p=T<=o?-1:T>=m.right-o?1:null,p&&g(b)}};this.wrapper.addEventListener("mousemove",y),this.wrapper.addEventListener("touchmove",y),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchmove",y),this.wrapper.removeEventListener("mousemove",y)}),this.wavesurfer.on("region-created",b=>{this.regionsMinLength&&(b.minLength=this.regionsMinLength)})}disableDragSelection(){this.fireEvent("disable-drag-selection")}getCurrentRegion(){const e=this.wavesurfer.getCurrentTime();let t=null;return Object.keys(this.list).forEach(i=>{const r=this.list[i];r.start<=e&&r.end>=e&&(!t||r.end-r.start<t.end-t.start)&&(t=r)}),t}getRegionSnapToGridValue(e,t){if(t.snapToGridInterval){const i=t.snapToGridOffset||0;return Math.round((e-i)/t.snapToGridInterval)*t.snapToGridInterval+i}return e}}const Bue=["container"],Vue=["popup"];function Hue(n,e){1&n&&nn(0,"mat-icon",15)}function zue(n,e){1&n&&nn(0,"mat-icon",16)}let Uue=(()=>{class n{constructor(t,i){this.actions=t,this.ngZone=i,this.wavesurfer=null,this.baseZoom=1,this.zoomFactor=1,this.currentTime="0:00",this.currentDuration="0:00"}ngAfterViewInit(){this.wavesurfer=Nue().create({container:this.waveform.nativeElement,scrollParent:!0,waveColor:"#B71C1C",autoCenterImmediately:!0,plugins:[nD.create({dragSelection:!1})]}),this.addListeners()}addListeners(){window.addEventListener("resize",()=>{this.resize()}),document.addEventListener("keydown",this.keyDownEvent.bind(this)),this.wavesurfer?.on("ready",()=>{this.resize(),this.currentDuration=this.formatTime(this.wavesurfer?.getDuration()||0)}),this.wavesurfer?.on("play",()=>{let t=0;for(;t<oi.cues.length&&!(oi.cues[t].time>=this.wavesurfer.getCurrentTime());t++);this.actions.performAction(new Ws(0===t?null:oi.cues[t-1].id))}),this.wavesurfer?.on("audioprocess",()=>{this.currentTime!==this.formatTime(this.wavesurfer?.getCurrentTime()||0)&&this.ngZone.run(()=>{this.currentTime=this.formatTime(this.wavesurfer?.getCurrentTime()||0)})}),this.wavesurfer?.on("seek",()=>{this.ngZone.run(()=>{this.currentTime=this.formatTime(this.wavesurfer?.getCurrentTime()||0)})}),this.actions.eventEmitter.subscribe(t=>{t instanceof Ws||t instanceof mm||t instanceof fm||t instanceof pm||t instanceof uu?this.renderRegions():t instanceof rV&&(this.wavesurfer?.loadBlob(t.song),this.zoomFactor=1)})}ngOnDestroy(){this.wavesurfer?.destroy(),document.removeEventListener("keydown",this.keyDownEvent.bind(this))}keyDownEvent(t){t.repeat||(" "===t.key&&("BODY"===document.activeElement?.tagName||"BUTTON"===document.activeElement?.tagName)&&(t.preventDefault(),this.wavesurfer?.playPause()),t.ctrlKey&&("k"===t.key||"m"===t.key)&&(t.preventDefault(),this.actions.performAction(new fm(this.wavesurfer?.getCurrentTime()||0,"New Cue",0))))}createCue(){this.actions.performAction(new fm(this.wavesurfer?.getCurrentTime()||0,"New Cue",0)),this.wavesurfer?.pause()}deleteCue(){const t=oi.getSelectedCueId();null!==t&&this.actions.performAction(new pm(t)),this.wavesurfer?.pause()}formatTime(t,i=!1){let r=Math.floor(t/60),s=Math.floor(t%60),o=Math.floor(100*(s-Math.floor(s)));return i?`${r}:${s<10?"0":""}${s}.${o}`:`${r}:${s<10?"0":""}${s}`}isPlaying(){return this.wavesurfer?.isPlaying()||!1}updateZoom(){this.wavesurfer?.zoom(this.zoomFactor*this.baseZoom),this.renderRegions()}renderRegions(){console.log("renderregions"),this.wavesurfer?.regions.clear();let t=Math.max(3/(this.zoomFactor*this.baseZoom),.1);oi.cues.forEach(i=>{let r=this.wavesurfer?.regions.add({id:String(i.id),start:i.time,end:i.time+t,color:i.id===oi.getSelectedCueId()?"#64b5f6":"#455a64",loop:!1,drag:!0,resize:!1});void 0!==r&&(r.on("update-end",()=>{void 0!==r&&(this.actions.performAction(new mm(parseInt(r.id),r.start)),this.actions.performAction(new Ws(parseInt(r.id))))}),r.on("click",s=>{void 0!==r&&this.actions.performAction(new Ws(parseInt(r.id)))}),r.on("in",()=>{if(void 0!==r){if(parseInt(r.id)===oi.getSelectedCueId())return;let s=oi.getCue(parseInt(r.id)),o=oi.getNextCue(s);if(null!==o&&Math.round(10*o.time)<=Math.round(10*this.wavesurfer.getCurrentTime()))return;if(null===s)this.actions.performAction(new Ws(null));else{let l=new Ws(s.id,s.fade>0,()=>{let c=this.wavesurfer?.getCurrentTime();if(!c)return 1;let u=(c-s.time)/s.fade;return u<0&&(u=0),u>1&&(u=1),u});this.actions.performAction(l)}}}))})}resize(){setTimeout(()=>{this.baseZoom=this.waveform.nativeElement.clientWidth/(this.wavesurfer?.getDuration()||1),this.updateZoom()},100)}zoomIn(){this.zoomFactor*=2,this.zoomFactor=Math.min(this.zoomFactor,16),this.updateZoom()}zoomOut(){this.zoomFactor*=.5,this.zoomFactor=Math.max(this.zoomFactor,1),this.updateZoom()}}return n.\u0275fac=function(t){return new(t||n)(R(Eh),R(St))},n.\u0275cmp=Wt({type:n,selectors:[["app-timeline"]],viewQuery:function(t,i){if(1&t&&(kn(Bue,5),kn(Vue,5)),2&t){let r;dt(r=ht())&&(i.waveform=r.first),dt(r=ht())&&(i.popup=r.first)}},decls:25,vars:4,consts:[[1,"timeline"],[1,"timeline-buttons"],[1,"timeline-row"],[1,"timeline-time"],["mat-icon-button","","color","primary",3,"click"],["aria-hidden","false","aria-label","pause","fontIcon","pause",4,"ngIf"],["aria-hidden","false","aria-label","play","fontIcon","play_arrow",4,"ngIf"],["aria-hidden","false","aria-label","zoom_in","fontIcon","zoom_in"],["aria-hidden","false","aria-label","zoom_out","fontIcon","zoom_out"],["aria-hidden","false","aria-label","create cue","fontIcon","add"],["aria-hidden","false","aria-label","delete cue","fontIcon","delete"],[1,"timeline-wave"],["container",""],[1,"timeline-popup"],["popup",""],["aria-hidden","false","aria-label","pause","fontIcon","pause"],["aria-hidden","false","aria-label","play","fontIcon","play_arrow"]],template:function(t,i){1&t&&(se(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),Ot(5),fe()()(),se(6,"div",2)(7,"button",4),st("click",function(){return null==i.wavesurfer?null:i.wavesurfer.playPause()}),Nt(8,Hue,1,0,"mat-icon",5),Nt(9,zue,1,0,"mat-icon",6),fe()(),se(10,"div",2)(11,"button",4),st("click",function(){return i.zoomIn()}),nn(12,"mat-icon",7),fe(),se(13,"button",4),st("click",function(){return i.zoomOut()}),nn(14,"mat-icon",8),fe()(),se(15,"div",2)(16,"button",4),st("click",function(){return i.createCue()}),nn(17,"mat-icon",9),fe(),se(18,"button",4),st("click",function(){return i.deleteCue()}),nn(19,"mat-icon",10),fe()()(),nn(20,"div",11,12),se(22,"div",13,14),Ot(24,"POPUP"),fe()()),2&t&&(Ue(5),yw("",i.currentTime," / ",i.currentDuration,""),Ue(3),Le("ngIf",i.isPlaying()),Ue(1),Le("ngIf",!i.isPlaying()))},dependencies:[ma,up,KE],styles:[".timeline[_ngcontent-%COMP%]{display:flex}.timeline-buttons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;flex-direction:column}.timeline-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.timeline-wave[_ngcontent-%COMP%]{flex:1 1 auto}.timeline-popup[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:none}"]}),n})();function Gue(n,e){1&n&&Nn(0)}const jV=["*"];function Wue(n,e){}const jue=function(n){return{animationDuration:n}},$ue=function(n,e){return{value:n,params:e}},que=["tabListContainer"],Xue=["tabList"],Kue=["tabListInner"],Yue=["nextPaginator"],Zue=["previousPaginator"],Que=["tabBodyWrapper"],Jue=["tabHeader"];function ede(n,e){}function tde(n,e){1&n&&Nt(0,ede,0,0,"ng-template",10),2&n&&Le("cdkPortalOutlet",un().$implicit.templateLabel)}function nde(n,e){1&n&&Ot(0),2&n&&td(un().$implicit.textLabel)}function ide(n,e){if(1&n){const t=ar();se(0,"div",6),st("click",function(){const r=ui(t),s=r.$implicit,o=r.index,a=un(),l=io(1);return di(a._handleClick(s,l,o))})("cdkFocusChange",function(r){const o=ui(t).index;return di(un()._tabFocusChanged(r,o))}),se(1,"div",7),Nt(2,tde,1,1,"ng-template",8),Nt(3,nde,1,1,"ng-template",null,9,pI),fe()()}if(2&n){const t=e.$implicit,i=e.index,r=io(4),s=un();In("mat-tab-label-active",s.selectedIndex===i),Le("id",s._getTabLabelId(i))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||s.disableRipple),pi("tabIndex",s._getTabIndex(t,i))("aria-posinset",i+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(i))("aria-selected",s.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),Ue(2),Le("ngIf",t.templateLabel)("ngIfElse",r)}}function rde(n,e){if(1&n){const t=ar();se(0,"mat-tab-body",11),st("_onCentered",function(){return ui(t),di(un()._removeTabBodyWrapperHeight())})("_onCentering",function(r){return ui(t),di(un()._setTabBodyWrapperHeight(r))}),fe()}if(2&n){const t=e.$implicit,i=e.index,r=un();In("mat-tab-body-active",r.selectedIndex===i),Le("id",r._getTabContentId(i))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),pi("tabindex",null!=r.contentTabIndex&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))}}const sde=new Ie("MatInkBarPositioner",{providedIn:"root",factory:function ode(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let $V=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._inkBarPositioner=r,this._animationMode=s}alignToElement(t){this.show(),this._ngZone.run(()=>{this._ngZone.onStable.pipe(ti(1)).subscribe(()=>{const i=this._inkBarPositioner(t),r=this._elementRef.nativeElement;r.style.left=i.left,r.style.width=i.width})})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(St),R(sde),R(wr,8))},n.\u0275dir=Ae({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,i){2&t&&In("_mat-animation-noopable","NoopAnimations"===i._animationMode)}}),n})();const ade=new Ie("MatTabContent"),lde=new Ie("MatTabLabel"),cde=new Ie("MAT_TAB"),ude=lp(class{}),qV=new Ie("MAT_TAB_GROUP");let XV=(()=>{class n extends ude{constructor(t,i){super(),this._viewContainerRef=t,this._closestTabGroup=i,this.textLabel="",this._contentPortal=null,this._stateChanges=new he,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new lM(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(R(Ji),R(qV,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-tab"]],contentQueries:function(t,i,r){if(1&t&&(Pn(r,lde,5),Pn(r,ade,7,Vi)),2&t){let s;dt(s=ht())&&(i.templateLabel=s.first),dt(s=ht())&&(i._explicitContent=s.first)}},viewQuery:function(t,i){if(1&t&&kn(Vi,7),2&t){let r;dt(r=ht())&&(i._implicitContent=r.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[Lt([{provide:cde,useExisting:n}]),nt,Ri],ngContentSelectors:jV,decls:1,vars:0,template:function(t,i){1&t&&(lr(),Nt(0,Gue,1,0,"ng-template"))},encapsulation:2}),n})();const dde={translateTab:Lf("translateTab",[Lo("center, void, left-origin-center, right-origin-center",ki({transform:"none"})),Lo("left",ki({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Lo("right",ki({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Fo("* => left, * => right, left => center, right => center",Oo("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Fo("void => left-origin-center",[ki({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),Oo("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Fo("void => right-origin-center",[ki({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),Oo("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let hde=(()=>{class n extends Ed{constructor(t,i,r,s){super(t,i,s),this._host=r,this._centeringSub=ve.EMPTY,this._leavingSub=ve.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(es(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(R(Ja),R(Ji),R(An(()=>KV)),R(Kt))},n.\u0275dir=Ae({type:n,selectors:[["","matTabBodyHost",""]],features:[nt]}),n})(),fde=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._dir=i,this._dirChangeSubscription=ve.EMPTY,this._translateTabComplete=new he,this._onCentering=new wt,this._beforeCentering=new wt,this._afterLeavingCenter=new wt,this._onCentered=new wt(!0),this.animationDuration="500ms",this.preserveContent=!1,i&&(this._dirChangeSubscription=i.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(QC((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const i=this._getLayoutDirection();return"ltr"==i&&t<=0||"rtl"==i&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(vs,8),R(Hi))},n.\u0275dir=Ae({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),KV=(()=>{class n extends fde{constructor(t,i,r){super(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(vs,8),R(Hi))},n.\u0275cmp=Wt({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,i){if(1&t&&kn(Ed,5),2&t){let r;dt(r=ht())&&(i._portalHost=r.first)}},hostAttrs:[1,"mat-tab-body"],features:[nt],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,i){1&t&&(se(0,"div",0,1),st("@translateTab.start",function(s){return i._onTranslateTabStarted(s)})("@translateTab.done",function(s){return i._translateTabComplete.next(s)}),Nt(2,Wue,0,0,"ng-template",2),fe()),2&t&&Le("@translateTab",eI(3,$ue,i._position,Aw(1,jue,i.animationDuration)))},dependencies:[hde],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[dde.translateTab]}}),n})();const YV=new Ie("MAT_TABS_CONFIG"),pde=lp(class{});let ZV=(()=>{class n extends pde{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(R(Et))},n.\u0275dir=Ae({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,i){2&t&&(pi("aria-disabled",!!i.disabled),In("mat-tab-disabled",i.disabled))},inputs:{disabled:"disabled"},features:[nt]}),n})();const QV=yc({passive:!0});let _de=(()=>{class n{constructor(t,i,r,s,o,a,l){this._elementRef=t,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new he,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new he,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new wt,this.indexFocused=new wt,o.runOutsideAngular(()=>{Jr(t.nativeElement,"mouseleave").pipe(Cn(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=Gn(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Vo(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Jr(this._previousPaginator.nativeElement,"touchstart",QV).pipe(Cn(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Jr(this._nextPaginator.nativeElement,"touchstart",QV).pipe(Cn(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:pt("ltr"),i=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new kF(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(ti(1)).subscribe(r),gr(t,i,this._items.changes,this._itemsResized()).pipe(Cn(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Cn(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?Xs:this._items.changes.pipe(es(this._items),Br(t=>new D(i=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(()=>{i.next()});return t.forEach(s=>{r.observe(s.elementRef.nativeElement)}),()=>{r.disconnect()}}))),ZC(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!fl(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const i=this._items?this._items.toArray()[t]:null;return!!i&&!i.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const i=this._items?this._items.toArray()[t]:null;if(!i)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=i.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=s,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-s,a=l-o);const c=this.scrollDistance,u=this.scrollDistance+r;a<c?this.scrollDistance-=c-a+60:l>u&&(this.scrollDistance+=l-u+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),mC(650,100).pipe(Cn(gr(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(t);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(xc),R(vs,8),R(St),R(Gi),R(wr,8))},n.\u0275dir=Ae({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),vde=(()=>{class n extends _de{constructor(t,i,r,s,o,a,l){super(t,i,r,s,o,a,l),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Gn(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(xc),R(vs,8),R(St),R(Gi),R(wr,8))},n.\u0275dir=Ae({type:n,inputs:{disableRipple:"disableRipple"},features:[nt]}),n})(),yde=(()=>{class n extends vde{constructor(t,i,r,s,o,a,l){super(t,i,r,s,o,a,l)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(xc),R(vs,8),R(St),R(Gi),R(wr,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,i,r){if(1&t&&Pn(r,ZV,4),2&t){let s;dt(s=ht())&&(i._items=s)}},viewQuery:function(t,i){if(1&t&&(kn($V,7),kn(que,7),kn(Xue,7),kn(Kue,7),kn(Yue,5),kn(Zue,5)),2&t){let r;dt(r=ht())&&(i._inkBar=r.first),dt(r=ht())&&(i._tabListContainer=r.first),dt(r=ht())&&(i._tabList=r.first),dt(r=ht())&&(i._tabListInner=r.first),dt(r=ht())&&(i._nextPaginator=r.first),dt(r=ht())&&(i._previousPaginator=r.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,i){2&t&&In("mat-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[nt],ngContentSelectors:jV,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,i){1&t&&(lr(),se(0,"button",0,1),st("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(s){return i._handlePaginatorPress("before",s)})("touchend",function(){return i._stopInterval()}),nn(2,"div",2),fe(),se(3,"div",3,4),st("keydown",function(s){return i._handleKeydown(s)}),se(5,"div",5,6),st("cdkObserveContent",function(){return i._onContentChanges()}),se(7,"div",7,8),Nn(9),fe(),nn(10,"mat-ink-bar"),fe()(),se(11,"button",9,10),st("mousedown",function(s){return i._handlePaginatorPress("after",s)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),nn(13,"div",2),fe()),2&t&&(In("mat-tab-header-pagination-disabled",i._disableScrollBefore),Le("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),Ue(5),In("_mat-animation-noopable","NoopAnimations"===i._animationMode),Ue(6),In("mat-tab-header-pagination-disabled",i._disableScrollAfter),Le("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},dependencies:[Ad,DF,$V],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}.mat-tab-label::before{margin:5px}@media(max-width: 599px){.mat-tab-label{min-width:72px}}"],encapsulation:2}),n})(),bde=0;class wde{}const xde=Dd(Td(class{constructor(n){this._elementRef=n}}),"primary");let Cde=(()=>{class n extends xde{constructor(t,i,r,s){super(t),this._changeDetectorRef=i,this._animationMode=s,this._tabs=new sc,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=ve.EMPTY,this._tabLabelSubscription=ve.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new wt,this.focusChange=new wt,this.animationDone=new wt,this.selectedTabChange=new wt(!0),this._groupId=bde++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=r?.contentTabIndex??null,this.preserveContent=!!r?.preserveContent}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Gn(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Vo(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=Vo(t,null)}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=Gn(t)}get preserveContent(){return this._preserveContent}set preserveContent(t){this._preserveContent=Gn(t)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const i=this._elementRef.nativeElement;i.classList.remove(`mat-background-${this.backgroundColor}`),t&&i.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const i=this._tabs.toArray();let r;for(let s=0;s<i.length;s++)if(i[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=i[s];break}!r&&i[t]&&Promise.resolve().then(()=>{i[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(es(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const i=new wde;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=gr(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){t.disabled||(this.selectedIndex=i.focusIndex=r)}_getTabIndex(t,i){return t.disabled?null:i===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,i){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=i)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(YV,8),R(wr,8))},n.\u0275dir=Ae({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[nt]}),n})(),Mde=(()=>{class n extends Cde{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(Hi),R(YV,8),R(wr,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,i,r){if(1&t&&Pn(r,XV,5),2&t){let s;dt(s=ht())&&(i._allTabs=s)}},viewQuery:function(t,i){if(1&t&&(kn(Que,5),kn(Jue,5)),2&t){let r;dt(r=ht())&&(i._tabBodyWrapper=r.first),dt(r=ht())&&(i._tabHeader=r.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,i){2&t&&In("mat-tab-group-dynamic-height",i.dynamicHeight)("mat-tab-group-inverted-header","below"===i.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[Lt([{provide:qV,useExisting:n}]),nt],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"]],template:function(t,i){1&t&&(se(0,"mat-tab-header",0,1),st("indexFocused",function(s){return i._focusChanged(s)})("selectFocusedIndex",function(s){return i.selectedIndex=s}),Nt(2,ide,5,15,"div",2),fe(),se(3,"div",3,4),Nt(5,rde,1,11,"mat-tab-body",5),fe()),2&t&&(Le("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),Ue(2),Le("ngForOf",i._tabs),Ue(1),In("_mat-animation-noopable","NoopAnimations"===i._animationMode),Ue(2),Le("ngForOf",i._tabs))},dependencies:[Ef,Gg,ma,Ed,Ad,sQ,ZV,KV,yde],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],encapsulation:2}),n})(),Sde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co,Wn,op,gM,JC,tM,Wn]}),n})();const Ede=["sliderWrapper"],js=yc({passive:!1}),Ide={provide:Qr,useExisting:An(()=>eH),multi:!0};class kde{}const Pde=KQ(Dd(lp(class{constructor(n){this._elementRef=n}}),"accent"));let eH=(()=>{class n extends Pde{constructor(t,i,r,s,o,a,l,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new wt,this.input=new wt,this.valueChange=new wt,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=ve.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!wm(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=wm(u)?function Ode(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const d=nH(u,this._touchId);if(d){const h=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(d),this._valueOnSlideStart=h,u.cancelable&&u.preventDefault(),h!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const d=nH(u,this._touchId);if(d){u.cancelable&&u.preventDefault();const h=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(d),h!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!wm(u)||"number"!=typeof this._touchId||iD(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,js),u.addEventListener("touchstart",this._pointerDown,js)})}get invert(){return this._invert}set invert(t){this._invert=Gn(t)}get max(){return this._max}set max(t){this._max=Vo(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Vo(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Vo(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Gn(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Vo(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=Vo(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Gn(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,js),t.removeEventListener("touchstart",this._pointerDown,js),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||fl(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=wm(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,js),i.addEventListener(o,this._pointerUp,js),r&&i.addEventListener("touchcancel",this._pointerUp,js);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,js),t.removeEventListener("mouseup",this._pointerUp,js),t.removeEventListener("touchmove",this._pointerMove,js),t.removeEventListener("touchend",this._pointerUp,js),t.removeEventListener("touchcancel",this._pointerUp,js);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=tH(t)?t:0}_createChangeEvent(t=this.value){let i=new kde;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return tH(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(R(Et),R(pl),R(Hi),R(vs,8),Za("tabindex"),R(St),R(Kt),R(wr,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&kn(Ede,5),2&t){let r;dt(r=ht())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&st("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(nd("tabIndex",i.tabIndex),pi("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),In("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Lt([Ide]),nt],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(se(0,"div",0,1)(2,"div",2),nn(3,"div",3)(4,"div",4),fe(),se(5,"div",5),nn(6,"div",6),fe(),se(7,"div",7),nn(8,"div",8)(9,"div",9),se(10,"div",10)(11,"span",11),Ot(12),fe()()()()),2&t&&(Ue(3),Le("ngStyle",i._getTrackBackgroundStyles()),Ue(1),Le("ngStyle",i._getTrackFillStyles()),Ue(1),Le("ngStyle",i._getTicksContainerStyles()),Ue(1),Le("ngStyle",i._getTicksStyles()),Ue(1),Le("ngStyle",i._getThumbContainerStyles()),Ue(5),td(i.displayValue))},dependencies:[Df],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function tH(n){return!isNaN(n)&&isFinite(n)}function wm(n){return"t"===n.type[0]}function nH(n,e){let t;return t=wm(n)?"number"==typeof e?iD(n.touches,e)||iD(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function iD(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let Lde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co,Wn,Wn]}),n})();function fr(n,e){(function Fde(n){return"string"==typeof n&&-1!==n.indexOf(".")&&1===parseFloat(n)})(n)&&(n="100%");var t=function Nde(n){return"string"==typeof n&&-1!==n.indexOf("%")}(n);return n=360===e?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:n=360===e?(n<0?n%e+e:n%e)/parseFloat(String(e)):n%e/parseFloat(String(e))}function ub(n){return Math.min(1,Math.max(0,n))}function iH(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function db(n){return n<=1?"".concat(100*Number(n),"%"):n}function pu(n){return 1===n.length?"0"+n:String(n)}function rH(n,e,t){n=fr(n,255),e=fr(e,255),t=fr(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=0,a=(i+r)/2;if(i===r)o=0,s=0;else{var l=i-r;switch(o=a>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4}s/=6}return{h:s,s:o,l:a}}function rD(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*t*(e-n):t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function sH(n,e,t){n=fr(n,255),e=fr(e,255),t=fr(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=i,a=i-r,l=0===i?0:a/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4}s/=6}return{h:s,s:l,v:o}}function oH(n,e,t,i){var r=[pu(Math.round(n).toString(16)),pu(Math.round(e).toString(16)),pu(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function aH(n){return Math.round(255*parseFloat(n)).toString(16)}function lH(n){return Ss(n)/255}function Ss(n){return parseInt(n,16)}var sD={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Vl="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),oD="[\\s|\\(]+(".concat(Vl,")[,|\\s]+(").concat(Vl,")[,|\\s]+(").concat(Vl,")\\s*\\)?"),aD="[\\s|\\(]+(".concat(Vl,")[,|\\s]+(").concat(Vl,")[,|\\s]+(").concat(Vl,")[,|\\s]+(").concat(Vl,")\\s*\\)?"),bo={CSS_UNIT:new RegExp(Vl),rgb:new RegExp("rgb"+oD),rgba:new RegExp("rgba"+aD),hsl:new RegExp("hsl"+oD),hsla:new RegExp("hsla"+aD),hsv:new RegExp("hsv"+oD),hsva:new RegExp("hsva"+aD),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function $a(n){return Boolean(bo.CSS_UNIT.exec(String(n)))}var hb=function(){function n(e,t){var i;if(void 0===e&&(e=""),void 0===t&&(t={}),e instanceof n)return e;"number"==typeof e&&(e=function Ude(n){return{r:n>>16,g:(65280&n)>>8,b:255&n}}(e)),this.originalInput=e;var r=function Gde(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,o=!1,a=!1;return"string"==typeof n&&(n=function $de(n){if(0===(n=n.trim().toLowerCase()).length)return!1;var e=!1;if(sD[n])n=sD[n],e=!0;else if("transparent"===n)return{r:0,g:0,b:0,a:0,format:"name"};var t=bo.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=bo.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=bo.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=bo.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=bo.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=bo.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=bo.hex8.exec(n))?{r:Ss(t[1]),g:Ss(t[2]),b:Ss(t[3]),a:lH(t[4]),format:e?"name":"hex8"}:(t=bo.hex6.exec(n))?{r:Ss(t[1]),g:Ss(t[2]),b:Ss(t[3]),format:e?"name":"hex"}:(t=bo.hex4.exec(n))?{r:Ss(t[1]+t[1]),g:Ss(t[2]+t[2]),b:Ss(t[3]+t[3]),a:lH(t[4]+t[4]),format:e?"name":"hex8"}:!!(t=bo.hex3.exec(n))&&{r:Ss(t[1]+t[1]),g:Ss(t[2]+t[2]),b:Ss(t[3]+t[3]),format:e?"name":"hex"}}(n)),"object"==typeof n&&($a(n.r)&&$a(n.g)&&$a(n.b)?(e=function Bde(n,e,t){return{r:255*fr(n,255),g:255*fr(e,255),b:255*fr(t,255)}}(n.r,n.g,n.b),o=!0,a="%"===String(n.r).substr(-1)?"prgb":"rgb"):$a(n.h)&&$a(n.s)&&$a(n.v)?(i=db(n.s),r=db(n.v),e=function Hde(n,e,t){n=6*fr(n,360),e=fr(e,100),t=fr(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=i%6;return{r:255*[t,o,s,s,a,t][l],g:255*[a,t,t,o,s,s][l],b:255*[s,s,a,t,t,o][l]}}(n.h,i,r),o=!0,a="hsv"):$a(n.h)&&$a(n.s)&&$a(n.l)&&(i=db(n.s),s=db(n.l),e=function Vde(n,e,t){var i,r,s;if(n=fr(n,360),e=fr(e,100),t=fr(t,100),0===e)r=t,s=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=rD(a,o,n+1/3),r=rD(a,o,n),s=rD(a,o,n-1/3)}return{r:255*i,g:255*r,b:255*s}}(n.h,i,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=iH(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(i=t.format)&&void 0!==i?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),s=e.r/255,o=e.g/255,a=e.b/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=iH(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.toHsv=function(){var e=sH(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=sH(this.r,this.g,this.b),t=Math.round(360*e.h),i=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=rH(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=rH(this.r,this.g,this.b),t=Math.round(360*e.h),i=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return void 0===e&&(e=!1),oH(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return void 0===e&&(e=!1),function zde(n,e,t,i,r){var s=[pu(Math.round(n).toString(16)),pu(Math.round(e).toString(16)),pu(Math.round(t).toString(16)),pu(aH(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(100*fr(t,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(100*fr(t,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+oH(this.r,this.g,this.b,!1),t=0,i=Object.entries(sD);t<i.length;t++){var r=i[t];if(e===r[1])return r[0]}return!1},n.prototype.toString=function(e){var t=Boolean(e);e=e??this.format;var i=!1;return!t&&this.a<1&&this.a>=0&&(e.startsWith("hex")||"name"===e)?"name"===e&&0===this.a?this.toName():this.toRgbString():("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){void 0===e&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=ub(t.l),new n(t)},n.prototype.brighten=function(e){void 0===e&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),new n(t)},n.prototype.darken=function(e){void 0===e&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=ub(t.l),new n(t)},n.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){void 0===e&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=ub(t.s),new n(t)},n.prototype.saturate=function(e){void 0===e&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=ub(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){void 0===t&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100;return new n({r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a})},n.prototype.analogous=function(e,t){void 0===e&&(e=6),void 0===t&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new n({h:i,s:r,v:s})),s=(s+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb();return new n({r:i.r+(t.r-i.r)*t.a,g:i.g+(t.g-i.g)*t.a,b:i.b+(t.b-i.b)*t.a})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,o=1;o<e;o++)r.push(new n({h:(i+o*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function qde(n,e){if(1&n){const t=ar();se(0,"span",3),st("mousedown",function(r){return ui(t),di(un().handleMousedown(r))}),Ot(1),fe()}if(2&n){const t=un();Le("id",t.uniqueId)("ngStyle",t.labelStyle),Ue(1),Io(" ",t.label," ")}}const Xde=["*"];function Kde(n,e){1&n&&nn(0,"color-checkboard",2)}const lD={};let Qde=(()=>{class n{constructor(){this.white="transparent",this.size=8,this.grey="rgba(0,0,0,.08)"}ngOnInit(){const t=function Zde(n,e,t){const i=`${n}-${e}-${t}`;if(lD[i])return lD[i];const r=function Yde(n,e,t){if(typeof document>"u")return null;const i=document.createElement("canvas");i.width=2*t,i.height=2*t;const r=i.getContext("2d");return r?(r.fillStyle=n,r.fillRect(0,0,i.width,i.height),r.fillStyle=e,r.fillRect(0,0,t,t),r.translate(t,t),r.fillRect(0,0,t,t),i.toDataURL()):null}(n,e,t);return r?(lD[i]=r,r):null}(this.white,this.grey,this.size);this.gridStyles={borderRadius:this.borderRadius,boxShadow:this.boxShadow,background:`url(${t}) center left`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["color-checkboard"]],inputs:{white:"white",size:"size",grey:"grey",boxShadow:"boxShadow",borderRadius:"borderRadius"},decls:1,vars:1,consts:[[1,"grid",3,"ngStyle"]],template:function(t,i){1&t&&nn(0,"div",0),2&t&&Le("ngStyle",i.gridStyles)},dependencies:[Df],styles:[".grid[_ngcontent-%COMP%]{top:0px;right:0px;bottom:0px;left:0px;position:absolute}"],changeDetection:0}),n})(),Jde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co]}),n})();function cH(n){let t=0,i=0;return["r","g","b","a","h","s","l","v"].forEach(r=>{!n[r]||(t+=1,isNaN(n[r])||(i+=1),("s"===r||"l"===r)&&/^\d+%$/.test(n[r])&&(i+=1))}),t===i&&n}function xm(n,e,t){const i=new hb(n.hex?n.hex:n);t&&i.setAlpha(1);const r=i.toHsl(),s=i.toHsv(),o=i.toRgb(),a=i.toHex();return 0===r.s&&(r.h=e||0,s.h=e||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":i.toHexString(),rgb:o,hsv:s,oldHue:n.h||e||r.h,source:n.source}}var Hl=(()=>{return(n=Hl||(Hl={})).HEX="hex",n.HSL="hsl",n.HSV="hsv",n.RGB="rgb",Hl;var n})();let uH=(()=>{class n{constructor(){this.mode=Hl.HEX,this.color={h:250,s:.5,l:.2,a:1},this.colorChange=new wt,this.onChange=new wt,this.onChangeComplete=new wt,this.onSwatchHover=new wt,this._onChangeCompleteSubscription=new ve,this._onSwatchHoverSubscription=new ve}ngOnInit(){this.changes=this.onChange.pipe(tp(100),mi(t=>{switch(this.onChangeComplete.emit(t),this.mode){case Hl.HEX:this.colorChange.emit(t.color.hex);break;case Hl.HSL:this.colorChange.emit(t.color.hsl);break;case Hl.HSV:this.colorChange.emit(t.color.hsv);break;case Hl.RGB:this.colorChange.emit(t.color.rgb);break;default:const i=`The mode '${this.mode}' is not supported`;if(function j8(){return QI=!0,ZI}())throw new Error(i);console.warn(i)}})).subscribe(),this.setState(xm(this.color,0)),this.currentColor=this.hex}ngOnChanges(){this.setState(xm(this.color,this.oldHue))}ngOnDestroy(){this.changes?.unsubscribe(),this._onChangeCompleteSubscription.unsubscribe(),this._onSwatchHoverSubscription.unsubscribe()}setState(t){this.oldHue=t.oldHue,this.hsl=t.hsl,this.hsv=t.hsv,this.rgb=t.rgb,this.hex=t.hex,this.source=t.source,this.afterValidChange()}handleChange(t,i){if(cH(t)){const s=xm(t,t.h||this.oldHue,this.disableAlpha);this.setState(s),this.onChange.emit({color:s,$event:i}),this.afterValidChange()}}afterValidChange(){}handleSwatchHover(t,i){if(cH(t)){const s=xm(t,t.h||this.oldHue);this.setState(s),this.onSwatchHover.emit({color:s,$event:i})}}registerOnChange(t){this._onChangeCompleteSubscription.add(this.onChangeComplete.pipe(mi(i=>t(i.color.hex))).subscribe())}registerOnTouched(t){this._onSwatchHoverSubscription.add(this.onSwatchHover.pipe(mi(()=>t())).subscribe())}setDisabledState(t){}writeValue(t){this.color=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["color-wrap"]],inputs:{className:"className",mode:"mode",color:"color"},outputs:{colorChange:"colorChange",onChange:"onChange",onChangeComplete:"onChangeComplete",onSwatchHover:"onSwatchHover"},features:[Lt([{provide:Qr,useExisting:An(()=>n),multi:!0}]),Ri],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),the=0,nhe=(()=>{class n{constructor(){this.placeholder="",this.onChange=new wt,this.focus=!1,this.uniqueId="editableInput-"+ ++the}ngOnInit(){this.wrapStyle=this.style&&this.style.wrap?this.style.wrap:{},this.inputStyle=this.style&&this.style.input?this.style.input:{},this.labelStyle=this.style&&this.style.label?this.style.label:{},this.dragLabel&&(this.labelStyle.cursor="ew-resize")}handleFocus(t){this.focus=!0}handleFocusOut(t){this.focus=!1,this.currentValue=this.blurValue}handleKeydown(t){const i=String(t.target.value),r=i.indexOf("%")>-1,s=Number(i.replace(/%/g,""));if(isNaN(s))return;const o=this.arrowOffset||1;38===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s+o},$event:t}:{data:s+o,$event:t}),this.currentValue=r?`${s+o}%`:s+o),40===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s-o},$event:t}:{data:s-o,$event:t}),this.currentValue=r?s-o+"%":s-o)}handleKeyup(t){40===t.keyCode||38===t.keyCode||`${this.currentValue}`!==t.target.value&&this.onChange.emit(this.label?{data:{[this.label]:t.target.value},$event:t}:{data:t.target.value,$event:t})}ngOnChanges(){this.focus||(this.currentValue=String(this.value).toUpperCase()),this.blurValue=String(this.value).toUpperCase()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.mousemove=Jr(document,"mousemove").subscribe(t=>this.handleDrag(t)),this.mouseup=Jr(document,"mouseup").subscribe(()=>this.unsubscribe())}unsubscribe(){this.mousemove&&this.mousemove.unsubscribe(),this.mouseup&&this.mouseup.unsubscribe()}handleMousedown(t){this.dragLabel&&(t.preventDefault(),this.handleDrag(t),this.subscribe())}handleDrag(t){if(this.dragLabel){const i=Math.round(this.value+t.movementX);i>=0&&i<=this.dragMax&&this.onChange.emit({data:{[this.label]:i},$event:t})}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["color-editable-input"]],inputs:{style:"style",label:"label",value:"value",arrowOffset:"arrowOffset",dragLabel:"dragLabel",dragMax:"dragMax",placeholder:"placeholder"},outputs:{onChange:"onChange"},features:[Ri],decls:3,vars:6,consts:[[1,"wrap",3,"ngStyle"],["spellCheck","false",3,"ngStyle","value","placeholder","keydown","keyup","focus","focusout"],[3,"id","ngStyle","mousedown",4,"ngIf"],[3,"id","ngStyle","mousedown"]],template:function(t,i){1&t&&(se(0,"div",0)(1,"input",1),st("keydown",function(s){return i.handleKeydown(s)})("keyup",function(s){return i.handleKeyup(s)})("focus",function(s){return i.handleFocus(s)})("focusout",function(s){return i.handleFocusOut(s)}),fe(),Nt(2,qde,2,3,"span",2),fe()),2&t&&(Le("ngStyle",i.wrapStyle),Ue(1),Le("ngStyle",i.inputStyle)("value",i.currentValue)("placeholder",i.placeholder),pi("aria-labelledby",i.uniqueId),Ue(1),Le("ngIf",i.label))},dependencies:[ma,Df],styles:["[_nghost-%COMP%]{display:flex}.wrap[_ngcontent-%COMP%]{position:relative}"],changeDetection:0}),n})(),ihe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co]}),n})(),rhe=(()=>{class n{constructor(){this.style={},this.focusStyle={},this.onClick=new wt,this.onHover=new wt,this.divStyles={},this.focusStyles={},this.inFocus=!1}ngOnInit(){this.divStyles={background:this.color,...this.style}}currentStyles(){return this.focusStyles={...this.divStyles,...this.focusStyle},this.focus||this.inFocus?this.focusStyles:this.divStyles}handleFocusOut(){this.inFocus=!1}handleFocus(){this.inFocus=!0}handleHover(t,i){this.onHover.emit({hex:t,$event:i})}handleClick(t,i){this.onClick.emit({hex:t,$event:i})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["color-swatch"]],inputs:{color:"color",style:"style",focusStyle:"focusStyle",focus:"focus"},outputs:{onClick:"onClick",onHover:"onHover"},ngContentSelectors:Xde,decls:3,vars:3,consts:[["tabindex","0",1,"swatch",3,"ngStyle","click","keydown.enter","focus","blur","mouseover"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)",4,"ngIf"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)"]],template:function(t,i){1&t&&(lr(),se(0,"div",0),st("click",function(s){return i.handleClick(i.color,s)})("keydown.enter",function(s){return i.handleClick(i.color,s)})("focus",function(){return i.handleFocus()})("blur",function(){return i.handleFocusOut()})("mouseover",function(s){return i.handleHover(i.color,s)}),Nn(1),Nt(2,Kde,1,0,"color-checkboard",1),fe()),2&t&&(Le("ngStyle",i.currentStyles()),pi("title",i.color),Ue(2),Le("ngIf","transparent"===i.color))},dependencies:[ma,Df,Qde],styles:[".swatch[_ngcontent-%COMP%]{outline:none;height:100%;width:100%;cursor:pointer;position:relative}"],changeDetection:0}),n})(),she=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co,Jde]}),n})();function ohe(n,e){if(1&n){const t=ar();se(0,"div",7)(1,"color-swatch",8),st("onClick",function(r){return ui(t),di(un().handleBlockChange(r))})("onHover",function(r){return ui(t),di(un().onSwatchHover.emit(r))}),fe()()}if(2&n){const t=e.$implicit,i=un();Ue(1),Ls(i.swatchStyle),Le("color",t)("focusStyle",i.focus(t))}}const ahe=function(n){return{input:n}};let lhe=(()=>{class n extends uH{constructor(){super(),this.width=276,this.colors=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],this.triangle="top-left",this.swatchStyle={width:"30px",height:"30px",borderRadius:"4px",fontSize:"0"},this.input={borderRadius:"4px",borderBottomLeftRadius:"0",borderTopLeftRadius:"0",border:"1px solid #e6ecf0",boxSizing:"border-box",display:"inline",fontSize:"14px",height:"30px",padding:"0",paddingLeft:"6px",width:"100%",color:"#657786"},this.disableAlpha=!0}focus(t){return{boxShadow:`0 0 4px ${t}`}}handleBlockChange({hex:t,$event:i}){(function ehe(n){return new hb(n).isValid})(t)&&this.handleChange({hex:t,source:"hex"},i)}handleValueChange({data:t,$event:i}){this.handleBlockChange({hex:t,$event:i})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["color-twitter"]],inputs:{width:"width",colors:"colors",triangle:"triangle"},features:[Lt([{provide:Qr,useExisting:An(()=>n),multi:!0},{provide:uH,useExisting:An(()=>n)}]),nt],decls:10,vars:12,consts:[[1,"triangleShadow"],[1,"triangle"],[1,"twitter-body"],["class","twitter-swatch",4,"ngFor","ngForOf"],[1,"twitter-hash"],[1,"twitter-input"],[3,"value","onChange"],[1,"twitter-swatch"],[3,"color","focusStyle","onClick","onHover"]],template:function(t,i){1&t&&(se(0,"div"),nn(1,"div",0)(2,"div",1),se(3,"div",2),Nt(4,ohe,2,4,"div",3),se(5,"div",4)(6,"div"),Ot(7,"#"),fe()(),se(8,"div",5)(9,"color-editable-input",6),st("onChange",function(s){return i.handleValueChange(s)}),fe()()()()),2&t&&(function lR(n,e,t,i,r){so(hs,Ro,qu(xe(),n,e,t,i,r),!0)}("twitter-picker ",i.triangle,"-triangle ",i.className,""),nl("width",i.width,"px"),Ue(4),Le("ngForOf",i.colors),Ue(5),Ls(Aw(10,ahe,i.input)),Le("value",i.hex.replace("#","")))},dependencies:[Gg,rhe,nhe],styles:[".twitter-picker[_ngcontent-%COMP%]{background:rgb(255,255,255);border:0px solid rgba(0,0,0,.25);box-shadow:#00000040 0 1px 4px;border-radius:4px;position:relative;box-sizing:border-box}.triangleShadow[_ngcontent-%COMP%]{width:0px;height:0px;border-style:solid;border-width:0px 9px 10px;border-color:transparent transparent rgba(0,0,0,.1);position:absolute}.triangle[_ngcontent-%COMP%]{width:0px;height:0px;border-style:solid;border-width:0px 9px 10px;border-color:transparent transparent rgb(255,255,255);position:absolute}.hide-triangle[_ngcontent-%COMP%] > .triangle[_ngcontent-%COMP%]{display:none}.hide-triangle[_ngcontent-%COMP%] > .triangleShadow[_ngcontent-%COMP%]{display:none}.top-left-triangle[_ngcontent-%COMP%] > .triangle[_ngcontent-%COMP%]{top:-10px;left:12px}.top-left-triangle[_ngcontent-%COMP%] > .triangleShadow[_ngcontent-%COMP%]{top:-11px;left:12px}.top-right-triangle[_ngcontent-%COMP%] > .triangle[_ngcontent-%COMP%]{top:-10px;right:12px}.top-right-triangle[_ngcontent-%COMP%] > .triangleShadow[_ngcontent-%COMP%]{top:-11px;right:12px}.twitter-body[_ngcontent-%COMP%]{padding:15px 9px 9px 15px}.twitter-swatch[_ngcontent-%COMP%]{width:30px;height:30px;display:inline-block;margin:0 6px 0 0}.twitter-hash[_ngcontent-%COMP%]{background:rgb(240,240,240);height:30px;width:30px;border-radius:4px 0 0 4px;color:#98a1a4;margin-left:-3px;display:inline-block}.twitter-hash[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;align-items:center;justify-content:center;height:30px;width:30px;display:flex}.twitter-input[_ngcontent-%COMP%]{display:inline-block;margin-top:-6px;font-size:10px;height:27px;padding:0;position:relative;top:6px;vertical-align:top;width:108px;margin-left:-4px}"],changeDetection:0}),n})(),che=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[co,she,ihe]}),n})();function uhe(n,e){if(1&n){const t=ar();se(0,"button",11),st("click",function(){const s=ui(t).$implicit;return di(un().toggleGroupSelect(s))}),Ot(1),fe()}if(2&n){const t=e.$implicit;Le("color",un().groupIsSelected(t)?"primary":void 0),Ue(1),Io(" ",t.name," ")}}let dhe=(()=>{class n{constructor(t){this.actions=t,this.groups=jn.getGroups(),this.brightness=kt.UNSET,this.color=kt.UNSET,this.pan=kt.UNSET,this.tilt=kt.UNSET,this.actions.eventEmitter.subscribe(i=>{if(i instanceof Ws||i instanceof jE||i instanceof $E||i instanceof uu){let r=jn.getSelectedValue();this.brightness=r.brightness,this.color=r.color,this.pan=r.pan,this.tilt=r.tilt}})}valueIsSet(t){return t!==kt.UNSET}groupIsSelected(t){return jn.groupIsSelected(t)}toggleGroupSelect(t){jn.groupIsSelected(t)?this.actions.performAction(new $E(t.channels,!0)):this.actions.performAction(new $E(t.channels))}ngOnInit(){}update(t,i){null!==i&&(this[t]=i,this.actions.performAction(new jE(t,i)))}colorChange(t){this.update("color",t.color.rgb.r<<16|t.color.rgb.g<<8|t.color.rgb.b)}removeAttribute(t){this.update(t,kt.UNSET)}}return n.\u0275fac=function(t){return new(t||n)(R(Eh))},n.\u0275cmp=Wt({type:n,selectors:[["app-lighting-controls"]],decls:37,vars:13,consts:[[1,"row-label"],[1,"row-contents"],["mat-button","",3,"color","click",4,"ngFor","ngForOf"],[1,"row-label",3,"ngClass"],[1,"row-clear"],["mat-icon-button","","color","primary",3,"disabled","click"],["aria-hidden","false","aria-label","clear","fontIcon","close"],["min","0","max","1","step","0.01",3,"ngModel","change","ngModelChange"],["triangle","hide",3,"onChangeComplete"],["max","180","step","0.01",3,"min","ngModel","change","ngModelChange"],["min","-90","max","90","step","0.01",3,"ngModel","change","ngModelChange"],["mat-button","",3,"color","click"]],template:function(t,i){1&t&&(se(0,"section")(1,"div",0),Ot(2,"Groups"),fe(),se(3,"div",1),Nt(4,uhe,2,2,"button",2),fe()(),se(5,"section")(6,"div",3),Ot(7,"Brightness"),fe(),se(8,"div",4)(9,"button",5),st("click",function(){return i.removeAttribute("brightness")}),nn(10,"mat-icon",6),fe()(),se(11,"div",1)(12,"mat-slider",7),st("change",function(s){return i.update("brightness",s.value)})("ngModelChange",function(s){return i.brightness=s}),fe()()(),se(13,"section")(14,"div",3),Ot(15,"Color"),fe(),se(16,"div",4)(17,"button",5),st("click",function(){return i.removeAttribute("color")}),nn(18,"mat-icon",6),fe()(),se(19,"div",1)(20,"color-twitter",8),st("onChangeComplete",function(s){return i.colorChange(s)}),fe()()(),se(21,"section")(22,"div",3),Ot(23,"Pan"),fe(),se(24,"div",4)(25,"button",5),st("click",function(){return i.removeAttribute("pan")}),nn(26,"mat-icon",6),fe()(),se(27,"div",1)(28,"mat-slider",9),st("change",function(s){return i.update("pan",s.value)})("ngModelChange",function(s){return i.pan=s}),fe()()(),se(29,"section")(30,"div",3),Ot(31,"Tilt"),fe(),se(32,"div",4)(33,"button",5),st("click",function(){return i.removeAttribute("tilt")}),nn(34,"mat-icon",6),fe()(),se(35,"div",1)(36,"mat-slider",10),st("change",function(s){return i.update("tilt",s.value)})("ngModelChange",function(s){return i.tilt=s}),fe()()()),2&t&&(Ue(4),Le("ngForOf",i.groups),Ue(2),Le("ngClass",i.valueIsSet(i.brightness)?"set":"unset"),Ue(3),Le("disabled",!i.valueIsSet(i.brightness)),Ue(3),Le("ngModel",i.brightness),Ue(2),Le("ngClass",i.valueIsSet(i.color)?"set":"unset"),Ue(3),Le("disabled",!i.valueIsSet(i.color)),Ue(5),Le("ngClass",i.valueIsSet(i.pan)?"set":"unset"),Ue(3),Le("disabled",!i.valueIsSet(i.pan)),Ue(3),Le("min",-180)("ngModel",i.pan),Ue(2),Le("ngClass",i.valueIsSet(i.tilt)?"set":"unset"),Ue(3),Le("disabled",!i.valueIsSet(i.tilt)),Ue(3),Le("ngModel",i.tilt))},dependencies:[Ef,Gg,Rf,hd,eH,up,KE,lhe],styles:["section[_ngcontent-%COMP%]{display:table;padding:0 10px}.row-label[_ngcontent-%COMP%]{display:table-cell;min-width:75px}.row-clear[_ngcontent-%COMP%]{display:table-cell}.row-contents[_ngcontent-%COMP%]{display:table-cell;padding-left:10px;width:100%}.row-contents[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.row-label.set[_ngcontent-%COMP%]{font-weight:700}"]}),n})();function hhe(n,e){1&n&&(se(0,"div")(1,"p",2),Ot(2,"No cue selected"),fe()())}function fhe(n,e){1&n&&(se(0,"mat-tab-group",3)(1,"mat-tab",4),nn(2,"app-lighting-controls"),fe()())}let phe=(()=>{class n{constructor(t){this.selectedCueId=oi.getSelectedCueId(),t.eventEmitter.subscribe(i=>{(i instanceof Ws||i instanceof fm||i instanceof uu||i instanceof pm||i instanceof uu)&&(this.selectedCueId=oi.getSelectedCueId())})}}return n.\u0275fac=function(t){return new(t||n)(R(Eh))},n.\u0275cmp=Wt({type:n,selectors:[["app-cue-viewer"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-align-tabs","start",4,"ngIf"],[1,"no-selection"],["mat-align-tabs","start"],["label","Lighting"]],template:function(t,i){1&t&&(Nt(0,hhe,3,0,"div",0),Nt(1,fhe,3,0,"mat-tab-group",1)),2&t&&(Le("ngIf",null===i.selectedCueId),Ue(1),Le("ngIf",null!==i.selectedCueId))},dependencies:[ma,Mde,XV,dhe],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.no-selection[_ngcontent-%COMP%]{text-align:center;margin-top:10px}"]}),n})();function mhe(n,e){1&n&&(se(0,"mat-header-cell",13),Ot(1," Title "),fe())}function ghe(n,e){if(1&n){const t=ar();se(0,"mat-cell",13)(1,"input",14),st("ngModelChange",function(r){return di(ui(t).$implicit.title=r)}),fe()()}if(2&n){const t=e.$implicit;Ue(1),Le("ngModel",t.title)}}function _he(n,e){1&n&&(se(0,"mat-header-cell",15),Ot(1," Start "),fe())}function vhe(n,e){if(1&n){const t=ar();se(0,"mat-cell",15)(1,"input",16),st("change",function(r){const o=ui(t).$implicit;return di(un().updateStart(o,r))}),fe()()}if(2&n){const t=e.$implicit,i=un();Ue(1),Le("value",i.formatTime(t.time))}}function yhe(n,e){1&n&&(se(0,"mat-header-cell",17),Ot(1," Fade "),fe())}function bhe(n,e){if(1&n){const t=ar();se(0,"mat-cell",17)(1,"input",16),st("change",function(r){const o=ui(t).$implicit;return di(un().updateFade(o,r))}),fe()()}if(2&n){const t=e.$implicit,i=un();Ue(1),Le("value",i.formatTime(t.fade))}}function whe(n,e){1&n&&nn(0,"mat-header-row")}function xhe(n,e){if(1&n){const t=ar();se(0,"mat-row",18),st("click",function(){const s=ui(t).$implicit;return di(un().rowClick(s))}),fe()}if(2&n){const t=e.$implicit;Le("ngClass",un().cueIsSelected(t)?"selected":"")}}let Che=(()=>{class n{constructor(t){this.actions=t,this.displayedColumns=["title","time","fade"]}getCues(){return oi.cues}ngOnInit(){this.actions.eventEmitter.subscribe(t=>{(t instanceof fm||t instanceof pm||t instanceof uu)&&this.cueTable.renderRows()})}formatTime(t){let i=Math.floor(t/60),r=t-60*i;return r=Math.round(100*r)/100,r%1==0?i+":"+(r<10?"0":"")+r+".00":i+":"+((r<10?"0":"")+r).padEnd(5,"0")}rowClick(t){this.cueIsSelected(t)||this.actions.performAction(new Ws(t.id))}cueIsSelected(t){return t.id===oi.getSelectedCueId()}parseTime(t){let i=0,r=0;if(t.includes(":")){let s=t.split(":");i=parseInt(s[0]),r=parseFloat(s[1])}else r=parseFloat(t);if(!isNaN(i)&&!isNaN(r))return 60*i+r}updateStart(t,i){let r=i.target,o=this.parseTime(r.value);void 0!==o&&t.time!==o?(t.time=o,this.actions.performAction(new mm(t.id,o,t.title,t.fade))):r.value=this.formatTime(t.time)}updateTitle(t,i){let s=i.target.value;t.title!==s&&(t.title=s,this.actions.performAction(new mm(t.id,t.time,s,t.fade)))}updateFade(t,i){let r=i.target,o=this.parseTime(r.value);void 0!==o&&t.fade!==o?(t.fade=o,this.actions.performAction(new mm(t.id,t.time,t.title,o))):r.value=this.formatTime(t.fade)}}return n.\u0275fac=function(t){return new(t||n)(R(Eh))},n.\u0275cmp=Wt({type:n,selectors:[["app-cue-list"]],viewQuery:function(t,i){if(1&t&&kn(Nv,5),2&t){let r;dt(r=ht())&&(i.cueTable=r.first)}},decls:13,vars:3,consts:[[1,"mat-elevation-z4",3,"dataSource"],["cueList",""],["matColumnDef","title"],["class","title-cell",4,"matHeaderCellDef"],["class","title-cell",4,"matCellDef"],["matColumnDef","time"],["class","time-cell",4,"matHeaderCellDef"],["class","time-cell",4,"matCellDef"],["matColumnDef","fade"],["class","fade-cell",4,"matHeaderCellDef"],["class","fade-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[1,"title-cell"],["matInput","",1,"mat-input-element",3,"ngModel","ngModelChange"],[1,"time-cell"],["matInput","",1,"mat-input-element",3,"value","change"],[1,"fade-cell"],[3,"ngClass","click"]],template:function(t,i){1&t&&(se(0,"mat-table",0,1),Ps(2,2),Nt(3,mhe,2,0,"mat-header-cell",3),Nt(4,ghe,2,1,"mat-cell",4),Os(),Ps(5,5),Nt(6,_he,2,0,"mat-header-cell",6),Nt(7,vhe,2,1,"mat-cell",7),Os(),Ps(8,8),Nt(9,yhe,2,0,"mat-header-cell",9),Nt(10,bhe,2,1,"mat-cell",10),Os(),Nt(11,whe,1,0,"mat-header-row",11),Nt(12,xhe,1,1,"mat-row",12),fe()),2&t&&(Le("dataSource",i.getCues()),Ue(11),Le("matHeaderRowDef",i.displayedColumns),Ue(1),Le("matRowDefColumns",i.displayedColumns))},dependencies:[Ef,ud,Rf,hd,bM,Nv,Vv,yS,Hv,Bv,bS,zv,Uv,wS,xS],styles:["mat-table[_ngcontent-%COMP%]{height:100%;overflow-y:auto}mat-row.selected[_ngcontent-%COMP%]{background-color:#eaeaea}.title-cell[_ngcontent-%COMP%]{flex:1 1 calc(100% - 230px)}.time-cell[_ngcontent-%COMP%], .fade-cell[_ngcontent-%COMP%]{flex:1 1 0}"]}),n})();const Mhe=["listResizable"],She=["infoResizable"],Ehe=["sidenav"],Dhe=function(){return{left:!0}},The=function(){return{bottom:!0}};let dH=(()=>{class n{constructor(t,i,r){this.actions=t,this.dialog=i,this.ngZone=r,this.show=null}ngOnInit(){document.addEventListener("keydown",t=>{if(!t.repeat)if("z"===t.key&&t.ctrlKey||"\x1a"===t.key)this.actions.canUndo()&&this.actions.undo();else if("y"===t.key&&t.ctrlKey||"\x19"===t.key)this.actions.canRedo()&&this.actions.redo();else if("s"===t.key&&t.ctrlKey)this.save(),t.preventDefault();else if("o"===t.key&&t.ctrlKey)this.openShow(),t.preventDefault();else if("Delete"===t.key&&"BODY"===document.activeElement?.tagName){t.preventDefault();const i=oi.getSelectedCueId();null!==i&&this.actions.performAction(new pm(i))}else"Escape"===t.key&&this.actions.performAction(new Ws(null))}),this.openShow()}ngAfterViewInit(){this.listResizable.nativeElement.style.height=Dh.cueListHeight,this.infoResizable.nativeElement.style.width=Dh.cueWindowWidth}loadShow(t){this.show=t,this.actions.performAction(new uu(t.cues)),this.actions.performAction(new rV(t.song))}save(){null!==this.show?(this.show.cues=oi.cues,Uo.saveShow(this.show)):this.openSidenavIfNecessary()}newShow(){var t=this;this.dialog.open(nee).afterClosed().subscribe(function(){var r=Pi(function*(s){if(s){const o=yield Uo.newShow(s.name,s.song),a=yield Uo.loadShow(o);null!==a&&t.loadShow(a)}else t.openSidenavIfNecessary()});return function(s){return r.apply(this,arguments)}}())}openShow(){var t=this;this.dialog.open(Ite).afterClosed().subscribe(function(){var r=Pi(function*(s){if(s){let o=yield Uo.loadShow(s);null!==o&&t.loadShow(o)}else t.openSidenavIfNecessary()});return function(s){return r.apply(this,arguments)}}())}openSidenavIfNecessary(){null===this.show&&this.sidenav.open()}importShow(t){var i=this;return Pi(function*(){let r=t.target;if(null===r.files)return void i.openSidenavIfNecessary();let s=r.files[0];const o=JSON.parse(yield s.text()),a=yield Uo.importShow(o),l=yield Uo.loadShow(a);null!==l?i.loadShow(l):i.openSidenavIfNecessary()})()}exportShow(){var t=this;return Pi(function*(){if(null===t.show)return void t.openSidenavIfNecessary();const i=yield Uo.exportShow(t.show.id);let r=new Blob([JSON.stringify(i)],{type:"text/plain;charset=utf-8"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.download=t.show.name+".cuecomposer",o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o)})()}onListResizeEnd(t){t.rectangle.height&&(this.listResizable.nativeElement.style.height=t.rectangle.height+"px",Dh.cueListHeight=t.rectangle.height+"px",Dh.save())}onInfoResizeEnd(t){t.rectangle.width&&(this.infoResizable.nativeElement.style.width=t.rectangle.width+"px",window.dispatchEvent(new Event("resize")),Dh.cueWindowWidth=t.rectangle.width+"px",Dh.save())}}return n.\u0275fac=function(t){return new(t||n)(R(Eh),R(_M),R(St))},n.\u0275cmp=Wt({type:n,selectors:[["app-dance-designer"]],viewQuery:function(t,i){if(1&t&&(kn(Mhe,5),kn(She,5),kn(Ehe,5)),2&t){let r;dt(r=ht())&&(i.listResizable=r.first),dt(r=ht())&&(i.infoResizable=r.first),dt(r=ht())&&(i.sidenav=r.first)}},decls:56,vars:10,consts:[["mat-button","",3,"disabled","click"],["src","/assets/icons/logo256.png",1,"logo"],[1,"toolbar-spacer"],["mat-icon-button","",3,"disabled","click"],[1,"main-container"],["mode","over","position","start",1,"file-drawer",3,"disableClose"],["sidenav",""],[1,"file-menu"],[3,"click"],["mat-list-icon",""],["mat-line",""],["hidden","","type","file","accept",".cuecomposer",3,"change"],["showImport",""],[2,"width","100%","aspect-ratio","2"],["mode","side","opened","","position","end","disableClose",""],["mwlResizable","",1,"info-resizable","resizable-container",3,"enableGhostResize","resizeEnd"],["infoResizable",""],["mwlResizeHandle","",1,"resize-handle-left",3,"resizeEdges"],["mwlResizable","",1,"list-resizable","resizable-container",3,"enableGhostResize","resizeEnd"],["listResizable",""],["mwlResizeHandle","",1,"resize-handle-bottom",3,"resizeEdges"]],template:function(t,i){if(1&t){const r=ar();se(0,"mat-toolbar")(1,"button",0),st("click",function(){return ui(r),di(io(15).toggle())}),Ot(2," File "),fe(),nn(3,"img",1),se(4,"span"),Ot(5," Cue Composer "),fe(),nn(6,"span",2),se(7,"button",3),st("click",function(){return i.actions.undo()}),se(8,"mat-icon"),Ot(9,"undo"),fe()(),se(10,"button",3),st("click",function(){return i.actions.redo()}),se(11,"mat-icon"),Ot(12,"redo"),fe()()(),se(13,"mat-drawer-container",4)(14,"mat-drawer",5,6)(16,"mat-action-list",7)(17,"mat-list-item",8),st("click",function(){return ui(r),io(15).close(),di(i.newShow())}),se(18,"mat-icon",9),Ot(19,"note_add"),fe(),se(20,"div",10),Ot(21,"New"),fe()(),se(22,"mat-list-item",8),st("click",function(){return ui(r),io(15).close(),di(i.save())}),se(23,"mat-icon",9),Ot(24,"save"),fe(),se(25,"div",10),Ot(26,"Save"),fe()(),se(27,"mat-list-item",8),st("click",function(){return ui(r),io(15).close(),di(i.openShow())}),se(28,"mat-icon",9),Ot(29,"folder_open"),fe(),se(30,"div",10),Ot(31,"Open"),fe()(),se(32,"mat-list-item",8),st("click",function(){ui(r);const o=io(15),a=io(38);return o.close(),di(a.click())}),se(33,"mat-icon",9),Ot(34,"cloud_upload"),fe(),se(35,"div",10),Ot(36,"Import"),fe(),se(37,"input",11,12),st("change",function(o){return i.importShow(o)}),fe()(),se(39,"mat-list-item",8),st("click",function(){return ui(r),io(15).close(),di(i.exportShow())}),se(40,"mat-icon",9),Ot(41,"cloud_download"),fe(),se(42,"div",10),Ot(43,"Export"),fe()()()(),se(44,"mat-drawer-content"),nn(45,"scene-render",13)(46,"app-timeline"),fe(),se(47,"mat-drawer",14)(48,"div",15,16),st("resizeEnd",function(o){return i.onInfoResizeEnd(o)}),nn(50,"div",17),se(51,"div",18,19),st("resizeEnd",function(o){return i.onListResizeEnd(o)}),nn(53,"app-cue-list")(54,"div",20),fe(),nn(55,"app-cue-viewer"),fe()()()}2&t&&(Ue(1),Le("disabled",null===i.show),Ue(6),Le("disabled",!i.actions.canUndo()),Ue(3),Le("disabled",!i.actions.canRedo()),Ue(4),Le("disableClose",null===i.show),Ue(34),Le("enableGhostResize",!0),Ue(2),Le("resizeEdges",Tw(8,Dhe)),Ue(1),Le("enableGhostResize",!0),Ue(3),Le("resizeEdges",Tw(9,The)))},dependencies:[up,KE,wce,vV,yV,lb,Uce,Gce,pM,YE,kV,nue,Lue,Uue,phe,Che],styles:[".resizable-container[_ngcontent-%COMP%]{position:relative;margin:auto}.info-resizable[_ngcontent-%COMP%]{background:#fafafa;border-left:solid 1px #121621;height:100%}.list-resizable[_ngcontent-%COMP%]{border-bottom:solid 1px #121621}.main-container[_ngcontent-%COMP%]{height:calc(100vh - 64px)}mat-drawer[_ngcontent-%COMP%]{min-width:200px}.logo[_ngcontent-%COMP%]{height:60%;margin-right:10px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.open-show-overlay[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100%;background:rgba(0,0,0,.7);z-index:1;text-align:center;color:#fff}"]}),n})();const Ahe=[{path:"dance-designer",component:dH,pathMatch:"full"}];let Rhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({imports:[dF.forRoot(Ahe),dF]}),n})(),Ihe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&nn(0,"app-dance-designer")},dependencies:[dH]}),n})();const Lhe={provide:new Ie("mat-tooltip-scroll-strategy"),deps:[Mc],useFactory:function Ohe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let Nhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n}),n.\u0275inj=qt({providers:[Lhe],imports:[tM,co,dM,Wn,Wn,sp]}),n})(),Bhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=en({type:n,bootstrap:[Ihe]}),n.\u0275inj=qt({imports:[$k,Rhe,DX,M9,KX.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),Lde,CJ,gce,xce,Ice,Nhe,Kce,Sde,tee,Cte,_J,iue,che]}),n})();(function $8(){if(QI)throw new Error("Cannot enable prod mode after platform setup.");ZI=!1})(),aq().bootstrapModule(Bhe).catch(n=>console.error(n))},28:function(Ul,Gl){var rs,Jo;rs=function Dt(){"use strict";var Q=typeof self<"u"?self:typeof window<"u"?window:void 0!==Q?Q:{},ve=!Q.document&&!!Q.postMessage,He=ve&&/blob:/i.test((Q.location||{}).protocol),Qe={},Ke=0,ce={parse:function(M,E){var N=(E=E||{}).dynamicTyping||!1;if(X(N)&&(E.dynamicTypingFunction=N,N={}),E.dynamicTyping=N,E.transform=!!X(E.transform)&&E.transform,E.worker&&ce.WORKERS_SUPPORTED){var P=function(){if(!ce.WORKERS_SUPPORTED)return!1;var W,D,F=(W=Q.URL||Q.webkitURL||null,D=Dt.toString(),ce.BLOB_URL||(ce.BLOB_URL=W.createObjectURL(new Blob(["(",D,")();"],{type:"text/javascript"})))),G=new Q.Worker(F);return G.onmessage=Ne,G.id=Ke++,Qe[G.id]=G}();return P.userStep=E.step,P.userChunk=E.chunk,P.userComplete=E.complete,P.userError=E.error,E.step=X(E.step),E.chunk=X(E.chunk),E.complete=X(E.complete),E.error=X(E.error),delete E.worker,void P.postMessage({input:M,config:E,workerId:P.id})}var S=null;return"string"==typeof M?S=E.download?new ke(E):new Ee(E):!0===M.readable&&X(M.read)&&X(M.on)?S=new re(E):(Q.File&&M instanceof File||M instanceof Object)&&(S=new Se(E)),S.stream(M)},unparse:function(M,E){var N=!1,P=!0,S=",",F="\r\n",G='"',W=G+G,D=!1,K=null,ue=!1;!function(){if("object"==typeof E){if("string"!=typeof E.delimiter||ce.BAD_DELIMITERS.filter(function(pe){return-1!==E.delimiter.indexOf(pe)}).length||(S=E.delimiter),("boolean"==typeof E.quotes||"function"==typeof E.quotes||Array.isArray(E.quotes))&&(N=E.quotes),"boolean"!=typeof E.skipEmptyLines&&"string"!=typeof E.skipEmptyLines||(D=E.skipEmptyLines),"string"==typeof E.newline&&(F=E.newline),"string"==typeof E.quoteChar&&(G=E.quoteChar),"boolean"==typeof E.header&&(P=E.header),Array.isArray(E.columns)){if(0===E.columns.length)throw new Error("Option columns is empty");K=E.columns}void 0!==E.escapeChar&&(W=E.escapeChar+G),("boolean"==typeof E.escapeFormulae||E.escapeFormulae instanceof RegExp)&&(ue=E.escapeFormulae instanceof RegExp?E.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var De=new RegExp(Fe(G),"g");if("string"==typeof M&&(M=JSON.parse(M)),Array.isArray(M)){if(!M.length||Array.isArray(M[0]))return ut(null,M,D);if("object"==typeof M[0])return ut(K||Object.keys(M[0]),M,D)}else if("object"==typeof M)return"string"==typeof M.data&&(M.data=JSON.parse(M.data)),Array.isArray(M.data)&&(M.fields||(M.fields=M.meta&&M.meta.fields||K),M.fields||(M.fields=Array.isArray(M.data[0])?M.fields:"object"==typeof M.data[0]?Object.keys(M.data[0]):[]),Array.isArray(M.data[0])||"object"==typeof M.data[0]||(M.data=[M.data])),ut(M.fields||[],M.data||[],D);throw new Error("Unable to serialize unrecognized input");function ut(pe,bt,vt){var ft="";"string"==typeof pe&&(pe=JSON.parse(pe)),"string"==typeof bt&&(bt=JSON.parse(bt));var an=Array.isArray(pe)&&0<pe.length,Oe=!Array.isArray(bt[0]);if(an&&P){for(var Dn=0;Dn<pe.length;Dn++)0<Dn&&(ft+=S),ft+=he(pe[Dn],Dn);0<bt.length&&(ft+=F)}for(var Rt=0;Rt<bt.length;Rt++){var Tn=an?pe.length:bt[Rt].length,ni=!1,qn=an?0===Object.keys(bt[Rt]).length:0===bt[Rt].length;if(vt&&!an&&(ni="greedy"===vt?""===bt[Rt].join("").trim():1===bt[Rt].length&&0===bt[Rt][0].length),"greedy"===vt&&an){for(var ln=[],En=0;En<Tn;En++)ln.push(bt[Rt][Oe?pe[En]:En]);ni=""===ln.join("").trim()}if(!ni){for(var Gt=0;Gt<Tn;Gt++)0<Gt&&!qn&&(ft+=S),ft+=he(bt[Rt][an&&Oe?pe[Gt]:Gt],Gt);Rt<bt.length-1&&(!vt||0<Tn&&!qn)&&(ft+=F)}}return ft}function he(pe,bt){if(null==pe)return"";if(pe.constructor===Date)return JSON.stringify(pe).slice(1,25);var vt=!1;ue&&"string"==typeof pe&&ue.test(pe)&&(pe="'"+pe,vt=!0);var ft=pe.toString().replace(De,W);return(vt=vt||!0===N||"function"==typeof N&&N(pe,bt)||Array.isArray(N)&&N[bt]||function(an,Oe){for(var Dn=0;Dn<Oe.length;Dn++)if(-1<an.indexOf(Oe[Dn]))return!0;return!1}(ft,ce.BAD_DELIMITERS)||-1<ft.indexOf(S)||" "===ft.charAt(0)||" "===ft.charAt(ft.length-1))?G+ft+G:ft}}};if(ce.RECORD_SEP=String.fromCharCode(30),ce.UNIT_SEP=String.fromCharCode(31),ce.BYTE_ORDER_MARK="\ufeff",ce.BAD_DELIMITERS=["\r","\n",'"',ce.BYTE_ORDER_MARK],ce.WORKERS_SUPPORTED=!ve&&!!Q.Worker,ce.NODE_STREAM_INPUT=1,ce.LocalChunkSize=10485760,ce.RemoteChunkSize=5242880,ce.DefaultDelimiter=",",ce.Parser=tt,ce.ParserHandle=we,ce.NetworkStreamer=ke,ce.FileStreamer=Se,ce.StringStreamer=Ee,ce.ReadableStreamStreamer=re,Q.jQuery){var ze=Q.jQuery;ze.fn.parse=function(M){var E=M.config||{},N=[];return this.each(function(F){if("INPUT"!==ze(this).prop("tagName").toUpperCase()||"file"!==ze(this).attr("type").toLowerCase()||!Q.FileReader||!this.files||0===this.files.length)return!0;for(var G=0;G<this.files.length;G++)N.push({file:this.files[G],inputElem:this,instanceConfig:ze.extend({},E)})}),P(),this;function P(){if(0!==N.length){var G,W,D,K=N[0];if(X(M.before)){var ue=M.before(K.file,K.inputElem);if("object"==typeof ue){if("abort"===ue.action)return"AbortError",G=K.file,W=K.inputElem,D=ue.reason,void(X(M.error)&&M.error({name:"AbortError"},G,W,D));if("skip"===ue.action)return void S();"object"==typeof ue.config&&(K.instanceConfig=ze.extend(K.instanceConfig,ue.config))}else if("skip"===ue)return void S()}var De=K.instanceConfig.complete;K.instanceConfig.complete=function(ut){X(De)&&De(ut,K.file,K.inputElem),S()},ce.parse(K.file,K.instanceConfig)}else X(M.complete)&&M.complete()}function S(){N.splice(0,1),P()}}}function Ye(M){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(E){var N=me(E);N.chunkSize=parseInt(N.chunkSize),E.step||E.chunk||(N.chunkSize=null),this._handle=new we(N),(this._handle.streamer=this)._config=N}.call(this,M),this.parseChunk=function(E,N){if(this.isFirstChunk&&X(this._config.beforeFirstChunk)){var P=this._config.beforeFirstChunk(E);void 0!==P&&(E=P)}this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+E;this._partialLine="";var F=this._handle.parse(S,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var G=F.meta.cursor;this._finished||(this._partialLine=S.substring(G-this._baseIndex),this._baseIndex=G),F&&F.data&&(this._rowCount+=F.data.length);var W=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(He)Q.postMessage({results:F,workerId:ce.WORKER_ID,finished:W});else if(X(this._config.chunk)&&!N){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);F=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!W||!X(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),W||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(E){X(this._config.error)?this._config.error(E):He&&this._config.error&&Q.postMessage({workerId:ce.WORKER_ID,error:E,finished:!1})}}function ke(M){var E;(M=M||{}).chunkSize||(M.chunkSize=ce.RemoteChunkSize),Ye.call(this,M),this._nextChunk=ve?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(N){this._input=N,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(E=new XMLHttpRequest,this._config.withCredentials&&(E.withCredentials=this._config.withCredentials),ve||(E.onload=Te(this._chunkLoaded,this),E.onerror=Te(this._chunkError,this)),E.open(this._config.downloadRequestBody?"POST":"GET",this._input,!ve),this._config.downloadRequestHeaders){var N=this._config.downloadRequestHeaders;for(var P in N)E.setRequestHeader(P,N[P])}this._config.chunkSize&&E.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{E.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}ve&&0===E.status&&this._chunkError()}},this._chunkLoaded=function(){var P;4===E.readyState&&(E.status<200||400<=E.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:E.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(P=E.getResponseHeader("Content-Range"))?-1:parseInt(P.substring(P.lastIndexOf("/")+1))),this.parseChunk(E.responseText)))},this._chunkError=function(N){this._sendError(new Error(E.statusText||N))}}function Se(M){var E,N;(M=M||{}).chunkSize||(M.chunkSize=ce.LocalChunkSize),Ye.call(this,M);var P=typeof FileReader<"u";this.stream=function(S){this._input=S,N=S.slice||S.webkitSlice||S.mozSlice,P?((E=new FileReader).onload=Te(this._chunkLoaded,this),E.onerror=Te(this._chunkError,this)):E=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input;if(this._config.chunkSize){var F=Math.min(this._start+this._config.chunkSize,this._input.size);S=N.call(S,this._start,F)}var G=E.readAsText(S,this._config.encoding);P||this._chunkLoaded({target:{result:G}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(E.error)}}function Ee(M){var E;Ye.call(this,M=M||{}),this.stream=function(N){return E=N,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var N,P=this._config.chunkSize;return P?(N=E.substring(0,P),E=E.substring(P)):(N=E,E=""),this._finished=!E,this.parseChunk(N)}}}function re(M){Ye.call(this,M=M||{});var E=[],N=!0,P=!1;this.pause=function(){Ye.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){Ye.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&1===E.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),E.length?this.parseChunk(E.shift()):N=!0},this._streamData=Te(function(S){try{E.push("string"==typeof S?S:S.toString(this._config.encoding)),N&&(N=!1,this._checkIsFinished(),this.parseChunk(E.shift()))}catch(F){this._streamError(F)}},this),this._streamError=Te(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=Te(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=Te(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function we(M){var E,N,P,S=Math.pow(2,53),F=-S,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,D=this,K=0,ue=0,De=!1,ut=!1,he=[],pe={data:[],errors:[],meta:{}};if(X(M.step)){var bt=M.step;M.step=function(Rt){if(pe=Rt,an())ft();else{if(ft(),0===pe.data.length)return;K+=Rt.data.length,M.preview&&K>M.preview?N.abort():(pe.data=pe.data[0],bt(pe,D))}}}function vt(Rt){return"greedy"===M.skipEmptyLines?""===Rt.join("").trim():1===Rt.length&&0===Rt[0].length}function ft(){return pe&&P&&(Dn("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+ce.DefaultDelimiter+"'"),P=!1),M.skipEmptyLines&&(pe.data=pe.data.filter(function(Rt){return!vt(Rt)})),an()&&function(){if(pe)if(Array.isArray(pe.data[0])){for(var Tn=0;an()&&Tn<pe.data.length;Tn++)pe.data[Tn].forEach(Rt);pe.data.splice(0,1)}else pe.data.forEach(Rt);function Rt(ni,qn){X(M.transformHeader)&&(ni=M.transformHeader(ni,qn)),he.push(ni)}}(),function(){if(!pe||!M.header&&!M.dynamicTyping&&!M.transform)return pe;function Rt(ni,qn){var ln,En=M.header?{}:[];for(ln=0;ln<ni.length;ln++){var li=ln,Gt=ni[ln];M.header&&(li=ln>=he.length?"__parsed_extra":he[ln]),M.transform&&(Gt=M.transform(Gt,li)),Gt=Oe(li,Gt),"__parsed_extra"===li?(En[li]=En[li]||[],En[li].push(Gt)):En[li]=Gt}return M.header&&(ln>he.length?Dn("FieldMismatch","TooManyFields","Too many fields: expected "+he.length+" fields but parsed "+ln,ue+qn):ln<he.length&&Dn("FieldMismatch","TooFewFields","Too few fields: expected "+he.length+" fields but parsed "+ln,ue+qn)),En}var Tn=1;return!pe.data.length||Array.isArray(pe.data[0])?(pe.data=pe.data.map(Rt),Tn=pe.data.length):pe.data=Rt(pe.data,0),M.header&&pe.meta&&(pe.meta.fields=he),ue+=Tn,pe}()}function an(){return M.header&&0===he.length}function Oe(Rt,Tn){return ni=Rt,M.dynamicTypingFunction&&void 0===M.dynamicTyping[ni]&&(M.dynamicTyping[ni]=M.dynamicTypingFunction(ni)),!0===(M.dynamicTyping[ni]||M.dynamicTyping)?"true"===Tn||"TRUE"===Tn||"false"!==Tn&&"FALSE"!==Tn&&(function(qn){if(G.test(qn)){var ln=parseFloat(qn);if(F<ln&&ln<S)return!0}return!1}(Tn)?parseFloat(Tn):W.test(Tn)?new Date(Tn):""===Tn?null:Tn):Tn;var ni}function Dn(Rt,Tn,ni,qn){var ln={type:Rt,code:Tn,message:ni};void 0!==qn&&(ln.row=qn),pe.errors.push(ln)}this.parse=function(Rt,Tn,ni){if(M.newline||(M.newline=function(li,Gt){li=li.substring(0,1048576);var pr=new RegExp(Fe(Gt)+"([^]*?)"+Fe(Gt),"gm"),Es=(li=li.replace(pr,"")).split("\r"),Tr=li.split("\n");if(1===Es.length||1<Tr.length&&Tr[0].length<Es[0].length)return"\n";for(var $s=0,ss=0;ss<Es.length;ss++)"\n"===Es[ss][0]&&$s++;return $s>=Es.length/2?"\r\n":"\r"}(Rt,M.quoteChar||'"')),P=!1,M.delimiter)X(M.delimiter)&&(M.delimiter=M.delimiter(Rt),pe.meta.delimiter=M.delimiter);else{var ln=function(li,Gt,pr,Es,Tr){var wo,$s,ss,sr;Tr=Tr||[",","\t","|",";",ce.RECORD_SEP,ce.UNIT_SEP];for(var mr=0;mr<Tr.length;mr++){var or=Tr[mr],Wl=0,qs=0,pb=0;ss=void 0;for(var jl=new tt({comments:Es,delimiter:or,newline:Gt,preview:10}).parse(li),kh=0;kh<jl.data.length;kh++)if(pr&&vt(jl.data[kh]))pb++;else{var gu=jl.data[kh].length;qs+=gu,void 0!==ss?0<gu&&(Wl+=Math.abs(gu-ss),ss=gu):ss=gu}0<jl.data.length&&(qs/=jl.data.length-pb),(void 0===$s||Wl<=$s)&&(void 0===sr||sr<qs)&&1.99<qs&&($s=Wl,wo=or,sr=qs)}return{successful:!!(M.delimiter=wo),bestDelimiter:wo}}(Rt,M.newline,M.skipEmptyLines,M.comments,M.delimitersToGuess);ln.successful?M.delimiter=ln.bestDelimiter:(P=!0,M.delimiter=ce.DefaultDelimiter),pe.meta.delimiter=M.delimiter}var En=me(M);return M.preview&&M.header&&En.preview++,E=Rt,N=new tt(En),pe=N.parse(E,Tn,ni),ft(),De?{meta:{paused:!0}}:pe||{meta:{paused:!1}}},this.paused=function(){return De},this.pause=function(){De=!0,N.abort(),E=X(M.chunk)?"":E.substring(N.getCharIndex())},this.resume=function(){D.streamer._halted?(De=!1,D.streamer.parseChunk(E,!0)):setTimeout(D.resume,3)},this.aborted=function(){return ut},this.abort=function(){ut=!0,N.abort(),pe.meta.aborted=!0,X(M.complete)&&M.complete(pe),E=""}}function Fe(M){return M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function tt(M){var E,N=(M=M||{}).delimiter,P=M.newline,S=M.comments,F=M.step,G=M.preview,W=M.fastMode,D=E=M.quoteChar??'"';if(void 0!==M.escapeChar&&(D=M.escapeChar),("string"!=typeof N||-1<ce.BAD_DELIMITERS.indexOf(N))&&(N=","),S===N)throw new Error("Comment character same as delimiter");!0===S?S="#":("string"!=typeof S||-1<ce.BAD_DELIMITERS.indexOf(S))&&(S=!1),"\n"!==P&&"\r"!==P&&"\r\n"!==P&&(P="\n");var K=0,ue=!1;this.parse=function(De,ut,he){if("string"!=typeof De)throw new Error("Input must be a string");var pe=De.length,bt=N.length,vt=P.length,ft=S.length,an=X(F),Oe=[],Dn=[],Rt=[],Tn=K=0;if(!De)return sr();if(W||!1!==W&&-1===De.indexOf(E)){for(var ni=De.split(P),qn=0;qn<ni.length;qn++){if(K+=(Rt=ni[qn]).length,qn!==ni.length-1)K+=P.length;else if(he)return sr();if(!S||Rt.substring(0,ft)!==S){if(an){if(Oe=[],Tr(Rt.split(N)),mr(),ue)return sr()}else Tr(Rt.split(N));if(G&&G<=qn)return Oe=Oe.slice(0,G),sr(!0)}}return sr()}for(var ln=De.indexOf(N,K),En=De.indexOf(P,K),li=new RegExp(Fe(D)+Fe(E),"g"),Gt=De.indexOf(E,K);;)if(De[K]!==E)if(S&&0===Rt.length&&De.substring(K,K+ft)===S){if(-1===En)return sr();En=De.indexOf(P,K=En+vt),ln=De.indexOf(N,K)}else if(-1!==ln&&(ln<En||-1===En))Rt.push(De.substring(K,ln)),ln=De.indexOf(N,K=ln+bt);else{if(-1===En)break;if(Rt.push(De.substring(K,En)),ss(En+vt),an&&(mr(),ue))return sr();if(G&&Oe.length>=G)return sr(!0)}else for(Gt=K,K++;;){if(-1===(Gt=De.indexOf(E,Gt+1)))return he||Dn.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Oe.length,index:K}),$s();if(Gt===pe-1)return $s(De.substring(K,Gt).replace(li,E));if(E!==D||De[Gt+1]!==D){if(E===D||0===Gt||De[Gt-1]!==D){-1!==ln&&ln<Gt+1&&(ln=De.indexOf(N,Gt+1)),-1!==En&&En<Gt+1&&(En=De.indexOf(P,Gt+1));var pr=wo(-1===En?ln:Math.min(ln,En));if(De.substr(Gt+1+pr,bt)===N){Rt.push(De.substring(K,Gt).replace(li,E)),De[K=Gt+1+pr+bt]!==E&&(Gt=De.indexOf(E,K)),ln=De.indexOf(N,K),En=De.indexOf(P,K);break}var Es=wo(En);if(De.substring(Gt+1+Es,Gt+1+Es+vt)===P){if(Rt.push(De.substring(K,Gt).replace(li,E)),ss(Gt+1+Es+vt),ln=De.indexOf(N,K),Gt=De.indexOf(E,K),an&&(mr(),ue))return sr();if(G&&Oe.length>=G)return sr(!0);break}Dn.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Oe.length,index:K}),Gt++}}else Gt++}return $s();function Tr(or){Oe.push(or),Tn=K}function wo(or){var Wl=0;if(-1!==or){var qs=De.substring(Gt+1,or);qs&&""===qs.trim()&&(Wl=qs.length)}return Wl}function $s(or){return he||(void 0===or&&(or=De.substring(K)),Rt.push(or),K=pe,Tr(Rt),an&&mr()),sr()}function ss(or){K=or,Tr(Rt),Rt=[],En=De.indexOf(P,K)}function sr(or){return{data:Oe,errors:Dn,meta:{delimiter:N,linebreak:P,aborted:ue,truncated:!!or,cursor:Tn+(ut||0)}}}function mr(){F(sr()),Oe=[],Dn=[]}},this.abort=function(){ue=!0},this.getCharIndex=function(){return K}}function Ne(M){var E=M.data,N=Qe[E.workerId],P=!1;if(E.error)N.userError(E.error,E.file);else if(E.results&&E.results.data){var S={abort:function(){P=!0,je(E.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Pe,resume:Pe};if(X(N.userStep)){for(var F=0;F<E.results.data.length&&(N.userStep({data:E.results.data[F],errors:E.results.errors,meta:E.results.meta},S),!P);F++);delete E.results}else X(N.userChunk)&&(N.userChunk(E.results,S,E.file),delete E.results)}E.finished&&!P&&je(E.workerId,E.results)}function je(M,E){var N=Qe[M];X(N.userComplete)&&N.userComplete(E),N.terminate(),delete Qe[M]}function Pe(){throw new Error("Not implemented.")}function me(M){if("object"!=typeof M||null===M)return M;var E=Array.isArray(M)?[]:{};for(var N in M)E[N]=me(M[N]);return E}function Te(M,E){return function(){M.apply(E,arguments)}}function X(M){return"function"==typeof M}return He&&(Q.onmessage=function(M){var E=M.data;if(void 0===ce.WORKER_ID&&E&&(ce.WORKER_ID=E.workerId),"string"==typeof E.input)Q.postMessage({workerId:ce.WORKER_ID,results:ce.parse(E.input,E.config),finished:!0});else if(Q.File&&E.input instanceof File||E.input instanceof Object){var N=ce.parse(E.input,E.config);N&&Q.postMessage({workerId:ce.WORKER_ID,results:N,finished:!0})}}),(ke.prototype=Object.create(Ye.prototype)).constructor=ke,(Se.prototype=Object.create(Ye.prototype)).constructor=Se,(Ee.prototype=Object.create(Ee.prototype)).constructor=Ee,(re.prototype=Object.create(Ye.prototype)).constructor=re,ce},void 0!==(Jo=rs.apply(Gl,[]))&&(Ul.exports=Jo)},454:Ul=>{self,Ul.exports=(()=>{return Gl={"./src/drawer.canvasentry.js":(Dt,Q,ve)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var He=Ke(ve("./src/util/style.js")),Qe=Ke(ve("./src/util/get-id.js"));function Ke(Se){return Se&&Se.__esModule?Se:{default:Se}}function ze(Se,Ee){for(var re=0;re<Ee.length;re++){var we=Ee[re];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(Se,we.key,we)}}Q.default=function(){function Se(){(function ce(Se,Ee){if(!(Se instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,Se),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,Qe.default)(typeof this.constructor.name<"u"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return function Ye(Se,Ee,re){Ee&&ze(Se.prototype,Ee),re&&ze(Se,re),Object.defineProperty(Se,"prototype",{writable:!1})}(Se,[{key:"initWave",value:function(re){this.wave=re,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(re){this.progress=re,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(re,we,Fe,tt){this.start=this.wave.offsetLeft/we||0,this.end=this.start+re/we,this.wave.width=Fe,this.wave.height=tt;var Ne={width:re+"px"};(0,He.default)(this.wave,Ne),this.hasProgressCanvas&&(this.progress.width=Fe,this.progress.height=tt,(0,He.default)(this.progress,Ne))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(re,we){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,re),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,we))}},{key:"getFillStyle",value:function(re,we){if("string"==typeof we||we instanceof CanvasGradient)return we;var Fe=re.createLinearGradient(0,0,0,re.canvas.height);return we.forEach(function(tt,Ne){return Fe.addColorStop(Ne/we.length,tt)}),Fe}},{key:"applyCanvasTransforms",value:function(re){re&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(re,we,Fe,tt,Ne){this.fillRectToContext(this.waveCtx,re,we,Fe,tt,Ne),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,re,we,Fe,tt,Ne)}},{key:"fillRectToContext",value:function(re,we,Fe,tt,Ne,je){!re||(je?this.drawRoundedRect(re,we,Fe,tt,Ne,je):re.fillRect(we,Fe,tt,Ne))}},{key:"drawRoundedRect",value:function(re,we,Fe,tt,Ne,je){0!==Ne&&(Ne<0&&(Fe-=Ne*=-1),re.beginPath(),re.moveTo(we+je,Fe),re.lineTo(we+tt-je,Fe),re.quadraticCurveTo(we+tt,Fe,we+tt,Fe+je),re.lineTo(we+tt,Fe+Ne-je),re.quadraticCurveTo(we+tt,Fe+Ne,we+tt-je,Fe+Ne),re.lineTo(we+je,Fe+Ne),re.quadraticCurveTo(we,Fe+Ne,we,Fe+Ne-je),re.lineTo(we,Fe+je),re.quadraticCurveTo(we,Fe,we+je,Fe),re.closePath(),re.fill())}},{key:"drawLines",value:function(re,we,Fe,tt,Ne,je){this.drawLineToContext(this.waveCtx,re,we,Fe,tt,Ne,je),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,re,we,Fe,tt,Ne,je)}},{key:"drawLineToContext",value:function(re,we,Fe,tt,Ne,je,Pe){if(re){var F,G,W,me=we.length/2,Te=Math.round(me*this.start),M=Te,E=Math.round(me*this.end)+1,N=this.wave.width/(E-M-1),P=tt+Ne,S=Fe/tt;for(re.beginPath(),re.moveTo((M-Te)*N,P),re.lineTo((M-Te)*N,P-Math.round((we[2*M]||0)/S)),F=M;F<E;F++)G=we[2*F]||0,W=Math.round(G/S),re.lineTo((F-Te)*N+this.halfPixel,P-W);for(var D=E-1;D>=M;D--)G=we[2*D+1]||0,W=Math.round(G/S),re.lineTo((D-Te)*N+this.halfPixel,P-W);re.lineTo((M-Te)*N,P-Math.round((we[2*M+1]||0)/S)),re.closePath(),re.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(re,we,Fe){var tt=this;return"blob"===Fe?new Promise(function(Ne){tt.wave.toBlob(Ne,re,we)}):"dataURL"===Fe?this.wave.toDataURL(re,we):void 0}}]),Se}(),Dt.exports=Q.default},"./src/drawer.js":(Dt,Q,ve)=>{"use strict";function He(Pe){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(me){return typeof me}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(Pe)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var Qe=function ce(Pe,me){if(!me&&Pe&&Pe.__esModule)return Pe;if(null===Pe||"object"!==He(Pe)&&"function"!=typeof Pe)return{default:Pe};var Te=Ke(me);if(Te&&Te.has(Pe))return Te.get(Pe);var X={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in Pe)if("default"!==E&&Object.prototype.hasOwnProperty.call(Pe,E)){var N=M?Object.getOwnPropertyDescriptor(Pe,E):null;N&&(N.get||N.set)?Object.defineProperty(X,E,N):X[E]=Pe[E]}return X.default=Pe,Te&&Te.set(Pe,X),X}(ve("./src/util/index.js"));function Ke(Pe){if("function"!=typeof WeakMap)return null;var me=new WeakMap,Te=new WeakMap;return(Ke=function(M){return M?Te:me})(Pe)}function Ye(Pe,me){for(var Te=0;Te<me.length;Te++){var X=me[Te];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(Pe,X.key,X)}}function Ee(Pe,me){return(Ee=Object.setPrototypeOf||function(X,M){return X.__proto__=M,X})(Pe,me)}function we(Pe,me){if(me&&("object"===He(me)||"function"==typeof me))return me;if(void 0!==me)throw new TypeError("Derived constructors may only return object or undefined");return function Fe(Pe){if(void 0===Pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pe}(Pe)}function Ne(Pe){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(Pe)}Q.default=function(Pe){!function Se(Pe,me){if("function"!=typeof me&&null!==me)throw new TypeError("Super expression must either be null or a function");Pe.prototype=Object.create(me&&me.prototype,{constructor:{value:Pe,writable:!0,configurable:!0}}),Object.defineProperty(Pe,"prototype",{writable:!1}),me&&Ee(Pe,me)}(Te,Pe);var me=function re(Pe){var me=function tt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var M,X=Ne(Pe);if(me){var E=Ne(this).constructor;M=Reflect.construct(X,arguments,E)}else M=X.apply(this,arguments);return we(this,M)}}(Te);function Te(X,M){var E;return function ze(Pe,me){if(!(Pe instanceof me))throw new TypeError("Cannot call a class as a function")}(this,Te),(E=me.call(this)).container=Qe.withOrientation(X,M.vertical),E.params=M,E.width=0,E.height=M.height*E.params.pixelRatio,E.lastPos=0,E.wrapper=null,E}return function ke(Pe,me,Te){me&&Ye(Pe.prototype,me),Te&&Ye(Pe,Te),Object.defineProperty(Pe,"prototype",{writable:!1})}(Te,[{key:"style",value:function(M,E){return Qe.style(M,E)}},{key:"createWrapper",value:function(){this.wrapper=Qe.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(M,E){!E&&M.preventDefault();var N=Qe.withOrientation(M.targetTouches?M.targetTouches[0]:M,this.params.vertical).clientX,P=this.wrapper.getBoundingClientRect(),S=this.width,F=this.getWidth(),G=this.getProgressPixels(P,N);return Qe.clamp(!this.params.fillParent&&S<F?G*(this.params.pixelRatio/S)||0:(G+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,0,1)}},{key:"getProgressPixels",value:function(M,E){return this.params.rtl?M.right-E:E-M.left}},{key:"setupWrapperEvents",value:function(){var M=this;this.wrapper.addEventListener("click",function(E){var N=Qe.withOrientation(E,M.params.vertical),P=M.wrapper.offsetHeight-M.wrapper.clientHeight;if(0!==P){var S=M.wrapper.getBoundingClientRect();if(N.clientY>=S.bottom-P)return}M.params.interact&&M.fireEvent("click",E,M.handleEvent(E))}),this.wrapper.addEventListener("dblclick",function(E){M.params.interact&&M.fireEvent("dblclick",E,M.handleEvent(E))}),this.wrapper.addEventListener("scroll",function(E){return M.fireEvent("scroll",E)})}},{key:"drawPeaks",value:function(M,E,N,P){this.setWidth(E)||this.clearWave(),this.params.barWidth?this.drawBars(M,0,N,P):this.drawWave(M,0,N,P)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(M){this.recenterOnPosition(this.wrapper.scrollWidth*M,!0)}},{key:"recenterOnPosition",value:function(M,E){var N=this.wrapper.scrollLeft,P=~~(this.wrapper.clientWidth/2),S=this.wrapper.scrollWidth-this.wrapper.clientWidth,F=M-P,G=F-N;if(0!=S){if(!E&&-P<=G&&G<P){var W=this.params.autoCenterRate;W/=P,W*=S,F=N+(G=Math.max(-W,Math.min(W,G)))}(F=Math.max(0,Math.min(S,F)))!=N&&(this.wrapper.scrollLeft=F)}}},{key:"getScrollX",value:function(){var M=0;if(this.wrapper){var E=this.params.pixelRatio;if(M=Math.round(this.wrapper.scrollLeft*E),this.params.scrollParent){var N=~~(this.wrapper.scrollWidth*E-this.getWidth());M=Math.min(N,Math.max(0,M))}}return M}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(M){return this.width!=M&&(this.width=M,this.style(this.wrapper,this.params.fillParent||this.params.scrollParent?{width:""}:{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(M){return M!=this.height&&(this.height=M,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(M){var E=1/this.params.pixelRatio,N=Math.round(M*this.width)*E;(N<this.lastPos||N-this.lastPos>=E)&&(this.lastPos=N,this.params.scrollParent&&this.params.autoCenter&&this.recenterOnPosition(~~(this.wrapper.scrollWidth*M),this.params.autoCenterImmediately),this.updateProgress(N))}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(M,E,N,P){}},{key:"drawWave",value:function(M,E,N,P){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(M){}}]),Te}(Qe.Observer),Dt.exports=Q.default},"./src/drawer.multicanvas.js":(Dt,Q,ve)=>{"use strict";function He(X){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"==typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(X)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var Qe=ke(ve("./src/drawer.js")),Ke=function Ye(X,M){if(!M&&X&&X.__esModule)return X;if(null===X||"object"!==He(X)&&"function"!=typeof X)return{default:X};var E=ze(M);if(E&&E.has(X))return E.get(X);var N={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in X)if("default"!==S&&Object.prototype.hasOwnProperty.call(X,S)){var F=P?Object.getOwnPropertyDescriptor(X,S):null;F&&(F.get||F.set)?Object.defineProperty(N,S,F):N[S]=X[S]}return N.default=X,E&&E.set(X,N),N}(ve("./src/util/index.js")),ce=ke(ve("./src/drawer.canvasentry.js"));function ze(X){if("function"!=typeof WeakMap)return null;var M=new WeakMap,E=new WeakMap;return(ze=function(P){return P?E:M})(X)}function ke(X){return X&&X.__esModule?X:{default:X}}function Ee(X,M){for(var E=0;E<M.length;E++){var N=M[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(X,N.key,N)}}function Fe(X,M){return(Fe=Object.setPrototypeOf||function(N,P){return N.__proto__=P,N})(X,M)}function Ne(X,M){if(M&&("object"===He(M)||"function"==typeof M))return M;if(void 0!==M)throw new TypeError("Derived constructors may only return object or undefined");return function je(X){if(void 0===X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}(X)}function me(X){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(X)}Q.default=function(X){!function we(X,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(M&&M.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),M&&Fe(X,M)}(E,X);var M=function tt(X){var M=function Pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var P,N=me(X);if(M){var S=me(this).constructor;P=Reflect.construct(N,arguments,S)}else P=N.apply(this,arguments);return Ne(this,P)}}(E);function E(N,P){var S;return function Se(X,M){if(!(X instanceof M))throw new TypeError("Cannot call a class as a function")}(this,E),(S=M.call(this,N,P)).maxCanvasWidth=P.maxCanvasWidth,S.maxCanvasElementWidth=Math.round(P.maxCanvasWidth/P.pixelRatio),S.hasProgressCanvas=P.waveColor!=P.progressColor,S.halfPixel=.5/P.pixelRatio,S.canvases=[],S.progressWave=null,S.EntryClass=ce.default,S.canvasContextAttributes=P.drawingContextAttributes,S.overlap=2*Math.ceil(P.pixelRatio/2),S.barRadius=P.barRadius||0,S.vertical=P.vertical,S}return function re(X,M,E){M&&Ee(X.prototype,M),E&&Ee(X,E),Object.defineProperty(X,"prototype",{writable:!1})}(E,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=Ke.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var P=this,S=Math.round(this.width/this.params.pixelRatio),F=Math.ceil(S/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<F;)this.addCanvas();for(;this.canvases.length>F;)this.removeCanvas();var G=this.maxCanvasWidth+this.overlap,W=this.canvases.length-1;this.canvases.forEach(function(D,K){K==W&&(G=P.width-P.maxCanvasWidth*W),P.updateDimensions(D,G,P.height),D.clearWave()})}},{key:"addCanvas",value:function(){var P=new this.EntryClass;P.canvasContextAttributes=this.canvasContextAttributes,P.hasProgressCanvas=this.hasProgressCanvas,P.halfPixel=this.halfPixel;var S=this.maxCanvasElementWidth*this.canvases.length,F=Ke.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(F,{position:"absolute",zIndex:2,left:S+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),P.initWave(F),this.hasProgressCanvas){var G=Ke.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(G,{position:"absolute",left:S+"px",top:0,bottom:0,height:"100%"}),P.initProgress(G)}this.canvases.push(P)}},{key:"removeCanvas",value:function(){var P=this.canvases[this.canvases.length-1];P.wave.parentElement.removeChild(P.wave.domElement),this.hasProgressCanvas&&P.progress.parentElement.removeChild(P.progress.domElement),P&&(P.destroy(),P=null),this.canvases.pop()}},{key:"updateDimensions",value:function(P,S,F){var G=Math.round(S/this.params.pixelRatio),W=Math.round(this.width/this.params.pixelRatio);P.updateDimensions(G,W,S,F),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var P=this;Ke.frame(function(){P.canvases.forEach(function(S){return S.clearWave()})})()}},{key:"drawBars",value:function(P,S,F,G){var W=this;return this.prepareDraw(P,S,F,G,function(D){var K=D.absmax,ut=D.offsetY,he=D.halfH,pe=D.peaks,bt=D.channelIndex;if(void 0!==F)for(var vt=D.hasMinVals?2:1,ft=pe.length/vt,an=W.params.barWidth*W.params.pixelRatio,Dn=an+(null===W.params.barGap?Math.max(W.params.pixelRatio,~~(an/2)):Math.max(W.params.pixelRatio,W.params.barGap*W.params.pixelRatio)),Rt=ft/W.width,ni=G,qn=F;qn<ni;qn+=Dn){var ln=0,En=Math.floor(qn*Rt)*vt,li=Math.floor((qn+Dn)*Rt)*vt;do{var Gt=Math.abs(pe[En]);Gt>ln&&(ln=Gt),En+=vt}while(En<li);var pr=Math.round(ln/K*he);0==pr&&W.params.barMinHeight&&(pr=W.params.barMinHeight),W.fillRect(qn+W.halfPixel,he-pr+ut,an+W.halfPixel,2*pr,W.barRadius,bt)}})}},{key:"drawWave",value:function(P,S,F,G){var W=this;return this.prepareDraw(P,S,F,G,function(D){var K=D.absmax,ut=D.offsetY,he=D.halfH,pe=D.peaks,bt=D.channelIndex;if(!D.hasMinVals){for(var vt=[],ft=pe.length,an=0;an<ft;an++)vt[2*an]=pe[an],vt[2*an+1]=-pe[an];pe=vt}void 0!==F&&W.drawLine(pe,K,he,ut,F,G,bt),W.fillRect(0,he+ut-W.halfPixel,W.width,W.halfPixel,W.barRadius,bt)})}},{key:"drawLine",value:function(P,S,F,G,W,D,K){var ue=this,De=this.params.splitChannelsOptions.channelColors[K]||{},ut=De.waveColor,he=De.progressColor;this.canvases.forEach(function(pe,bt){ue.setFillStyles(pe,ut,he),ue.applyCanvasTransforms(pe,ue.params.vertical),pe.drawLines(P,S,F,G,W,D)})}},{key:"fillRect",value:function(P,S,F,G,W,D){for(var K=Math.floor(P/this.maxCanvasWidth),ue=Math.min(Math.ceil((P+F)/this.maxCanvasWidth)+1,this.canvases.length),De=K;De<ue;De++){var ut=this.canvases[De],he=De*this.maxCanvasWidth,pe={x1:Math.max(P,De*this.maxCanvasWidth),y1:S,x2:Math.min(P+F,De*this.maxCanvasWidth+ut.wave.width),y2:S+G};if(pe.x1<pe.x2){var bt=this.params.splitChannelsOptions.channelColors[D]||{};this.setFillStyles(ut,bt.waveColor,bt.progressColor),this.applyCanvasTransforms(ut,this.params.vertical),ut.fillRects(pe.x1-he,pe.y1,pe.x2-pe.x1,pe.y2-pe.y1,W)}}}},{key:"hideChannel",value:function(P){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(P)}},{key:"prepareDraw",value:function(P,S,F,G,W,D,K){var ue=this;return Ke.frame(function(){if(P[0]instanceof Array){var De=P;if(ue.params.splitChannels){var he,ut=De.filter(function(Oe,Dn){return!ue.hideChannel(Dn)});return ue.params.splitChannelsOptions.overlay||ue.setHeight(Math.max(ut.length,1)*ue.params.height*ue.params.pixelRatio),ue.params.splitChannelsOptions&&ue.params.splitChannelsOptions.relativeNormalization&&(he=Ke.max(De.map(function(Oe){return Ke.absMax(Oe)}))),De.forEach(function(Oe,Dn){return ue.prepareDraw(Oe,Dn,F,G,W,ut.indexOf(Oe),he)})}P=De[0]}if(!ue.hideChannel(S)){var pe=1/ue.params.barHeight;ue.params.normalize&&(pe=void 0===K?Ke.absMax(P):K);var bt=[].some.call(P,function(Oe){return Oe<0}),vt=ue.params.height*ue.params.pixelRatio,an=vt*D||0;return ue.params.splitChannelsOptions&&ue.params.splitChannelsOptions.overlay&&(an=0),W({absmax:pe,hasMinVals:bt,height:vt,offsetY:an,halfH:vt/2,peaks:P,channelIndex:S})}})()}},{key:"setFillStyles",value:function(P){var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;P.setFillStyles(S,F)}},{key:"applyCanvasTransforms",value:function(P){var S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];P.applyCanvasTransforms(S)}},{key:"getImage",value:function(P,S,F){if("blob"===F)return Promise.all(this.canvases.map(function(W){return W.getImage(P,S,F)}));if("dataURL"===F){var G=this.canvases.map(function(W){return W.getImage(P,S,F)});return G.length>1?G:G[0]}}},{key:"updateProgress",value:function(P){this.style(this.progressWave,{width:P+"px"})}}]),E}(Qe.default),Dt.exports=Q.default},"./src/mediaelement-webaudio.js":(Dt,Q,ve)=>{"use strict";function He(me){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(me)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var Qe=function Ke(me){return me&&me.__esModule?me:{default:me}}(ve("./src/mediaelement.js"));function ze(me,Te){for(var X=0;X<Te.length;X++){var M=Te[X];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(me,M.key,M)}}function ke(){return ke=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Te,X,M){var E=Se(Te,X);if(E){var N=Object.getOwnPropertyDescriptor(E,X);return N.get?N.get.call(arguments.length<3?Te:M):N.value}},ke.apply(this,arguments)}function Se(me,Te){for(;!Object.prototype.hasOwnProperty.call(me,Te)&&null!==(me=je(me)););return me}function re(me,Te){return(re=Object.setPrototypeOf||function(M,E){return M.__proto__=E,M})(me,Te)}function Fe(me,Te){if(Te&&("object"===He(Te)||"function"==typeof Te))return Te;if(void 0!==Te)throw new TypeError("Derived constructors may only return object or undefined");return function tt(me){if(void 0===me)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}(me)}function je(me){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)})(me)}Q.default=function(me){!function Ee(me,Te){if("function"!=typeof Te&&null!==Te)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Te&&Te.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Te&&re(me,Te)}(X,me);var Te=function we(me){var Te=function Ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,M=je(me);if(Te){var N=je(this).constructor;E=Reflect.construct(M,arguments,N)}else E=M.apply(this,arguments);return Fe(this,E)}}(X);function X(M){var E;return function ce(me,Te){if(!(me instanceof Te))throw new TypeError("Cannot call a class as a function")}(this,X),(E=Te.call(this,M)).params=M,E.sourceMediaElement=null,E}return function Ye(me,Te,X){Te&&ze(me.prototype,Te),X&&ze(me,X),Object.defineProperty(me,"prototype",{writable:!1})}(X,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(E,N,P){ke(je(X.prototype),"_load",this).call(this,E,N,P),this.createMediaElementSource(E)}},{key:"createMediaElementSource",value:function(E){this.sourceMediaElement=this.ac.createMediaElementSource(E),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(E,N){return this.resumeAudioContext(),ke(je(X.prototype),"play",this).call(this,E,N)}},{key:"destroy",value:function(){ke(je(X.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),X}(Qe.default),Dt.exports=Q.default},"./src/mediaelement.js":(Dt,Q,ve)=>{"use strict";function He(M){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(M)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var Qe=function Ye(M){return M&&M.__esModule?M:{default:M}}(ve("./src/webaudio.js")),Ke=function ze(M,E){if(!E&&M&&M.__esModule)return M;if(null===M||"object"!==He(M)&&"function"!=typeof M)return{default:M};var N=ce(E);if(N&&N.has(M))return N.get(M);var P={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in M)if("default"!==F&&Object.prototype.hasOwnProperty.call(M,F)){var G=S?Object.getOwnPropertyDescriptor(M,F):null;G&&(G.get||G.set)?Object.defineProperty(P,F,G):P[F]=M[F]}return P.default=M,N&&N.set(M,P),P}(ve("./src/util/index.js"));function ce(M){if("function"!=typeof WeakMap)return null;var E=new WeakMap,N=new WeakMap;return(ce=function(S){return S?N:E})(M)}function Se(M,E){for(var N=0;N<E.length;N++){var P=E[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(M,P.key,P)}}function re(){return re=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(E,N,P){var S=we(E,N);if(S){var F=Object.getOwnPropertyDescriptor(S,N);return F.get?F.get.call(arguments.length<3?E:P):F.value}},re.apply(this,arguments)}function we(M,E){for(;!Object.prototype.hasOwnProperty.call(M,E)&&null!==(M=Te(M)););return M}function tt(M,E){return(tt=Object.setPrototypeOf||function(P,S){return P.__proto__=S,P})(M,E)}function je(M,E){if(E&&("object"===He(E)||"function"==typeof E))return E;if(void 0!==E)throw new TypeError("Derived constructors may only return object or undefined");return function Pe(M){if(void 0===M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}(M)}function Te(M){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(M)}Q.default=function(M){!function Fe(M,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(E&&E.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),E&&tt(M,E)}(N,M);var E=function Ne(M){var E=function me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var S,P=Te(M);if(E){var F=Te(this).constructor;S=Reflect.construct(P,arguments,F)}else S=P.apply(this,arguments);return je(this,S)}}(N);function N(P){var S;return function ke(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}(this,N),(S=E.call(this,P)).params=P,S.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},S.mediaType=P.mediaType.toLowerCase(),S.elementPosition=P.elementPosition,S.peaks=null,S.playbackRate=1,S.volume=1,S.isMuted=!1,S.buffer=null,S.onPlayEnd=null,S.mediaListeners={},S}return function Ee(M,E,N){E&&Se(M.prototype,E),N&&Se(M,N),Object.defineProperty(M,"prototype",{writable:!1})}(N,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var S=this;this.mediaListeners.error=function(){S.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){S.fireEvent("canplay")},this.mediaListeners.ended=function(){S.fireEvent("finish")},this.mediaListeners.play=function(){S.fireEvent("play")},this.mediaListeners.pause=function(){S.fireEvent("pause")},this.mediaListeners.seeked=function(F){S.fireEvent("seek")},this.mediaListeners.volumechange=function(F){S.isMuted=S.media.muted,S.volume=S.isMuted?0:S.media.volume,S.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(F){S.media.removeEventListener(F,S.mediaListeners[F]),S.media.addEventListener(F,S.mediaListeners[F])})}},{key:"createTimer",value:function(){var S=this;this.on("play",function G(){S.isPaused()||(S.fireEvent("audioprocess",S.getCurrentTime()),Ke.frame(G)())}),this.on("pause",function(){S.fireEvent("audioprocess",S.getCurrentTime())})}},{key:"load",value:function(S,F,G,W){var D=document.createElement(this.mediaType);D.controls=this.params.mediaControls,D.autoplay=this.params.autoplay||!1,D.preload=W??"auto",D.src=S,D.style.width="100%";var K=F.querySelector(this.mediaType);K&&F.removeChild(K),F.appendChild(D),this._load(D,G,W)}},{key:"loadElt",value:function(S,F){S.controls=this.params.mediaControls,S.autoplay=this.params.autoplay||!1,this._load(S,F,S.preload)}},{key:"_load",value:function(S,F,G){if(!(S instanceof HTMLMediaElement)||typeof S.addEventListener>"u")throw new Error("media parameter is not a valid media element");"function"==typeof S.load&&!(F&&"none"==G)&&S.load(),this.media=S,this._setupMediaListeners(),this.peaks=F,this.onPlayEnd=null,this.buffer=null,this.isMuted=S.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var S=(this.buffer||this.media).duration;return S>=1/0&&(S=this.media.seekable.end(0)),S}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(S){this.playbackRate=S||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(S){null!=S&&!isNaN(S)&&(this.media.currentTime=S),this.clearPlayEnd()}},{key:"play",value:function(S,F){this.seekTo(S);var G=this.media.play();return F&&this.setPlayEnd(F),G}},{key:"pause",value:function(){var S;return this.media&&(S=this.media.pause()),this.clearPlayEnd(),S}},{key:"setPlayEnd",value:function(S){var F=this;this.clearPlayEnd(),this._onPlayEnd=function(G){G>=S&&(F.pause(),F.seekTo(S))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(S,F,G){return this.buffer?re(Te(N.prototype),"getPeaks",this).call(this,S,F,G):this.peaks||[]}},{key:"setSinkId",value:function(S){return S?this.media.setSinkId?this.media.setSinkId(S):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+S))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(S){this.volume=S,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(S){this.isMuted=this.media.muted=S}},{key:"destroy",value:function(){var S=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(F){S.media&&S.media.removeEventListener(F,S.mediaListeners[F])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),N}(Qe.default),Dt.exports=Q.default},"./src/peakcache.js":(Dt,Q)=>{"use strict";function He(ce,ze){for(var Ye=0;Ye<ze.length;Ye++){var ke=ze[Ye];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(ce,ke.key,ke)}}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0,Q.default=function(){function ce(){(function ve(ce,ze){if(!(ce instanceof ze))throw new TypeError("Cannot call a class as a function")})(this,ce),this.clearPeakCache()}return function Qe(ce,ze,Ye){ze&&He(ce.prototype,ze),Ye&&He(ce,Ye),Object.defineProperty(ce,"prototype",{writable:!1})}(ce,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(Ye,ke,Se){Ye!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=Ye);for(var Ee=[],re=0;re<this.peakCacheRanges.length&&this.peakCacheRanges[re]<ke;)re++;for(re%2==0&&Ee.push(ke);re<this.peakCacheRanges.length&&this.peakCacheRanges[re]<=Se;)Ee.push(this.peakCacheRanges[re]),re++;re%2==0&&Ee.push(Se),Ee=Ee.filter(function(Fe,tt,Ne){return 0==tt?Fe!=Ne[tt+1]:tt==Ne.length-1?Fe!=Ne[tt-1]:Fe!=Ne[tt-1]&&Fe!=Ne[tt+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(Ee),this.peakCacheRanges=this.peakCacheRanges.sort(function(Fe,tt){return Fe-tt}).filter(function(Fe,tt,Ne){return 0==tt?Fe!=Ne[tt+1]:tt==Ne.length-1?Fe!=Ne[tt-1]:Fe!=Ne[tt-1]&&Fe!=Ne[tt+1]});var we=[];for(re=0;re<Ee.length;re+=2)we.push([Ee[re],Ee[re+1]]);return we}},{key:"getCacheRanges",value:function(){var ke,Ye=[];for(ke=0;ke<this.peakCacheRanges.length;ke+=2)Ye.push([this.peakCacheRanges[ke],this.peakCacheRanges[ke+1]]);return Ye}}]),ce}(),Dt.exports=Q.default},"./src/util/absMax.js":(Dt,Q,ve)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ce(ze){var Ye=(0,He.default)(ze),ke=(0,Qe.default)(ze);return-ke>Ye?-ke:Ye};var He=Ke(ve("./src/util/max.js")),Qe=Ke(ve("./src/util/min.js"));function Ke(ze){return ze&&ze.__esModule?ze:{default:ze}}Dt.exports=Q.default},"./src/util/clamp.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ve(He,Qe,Ke){return Math.min(Math.max(Qe,He),Ke)},Dt.exports=Q.default},"./src/util/fetch.js":(Dt,Q,ve)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ke(Se){if(!Se)throw new Error("fetch options missing");if(!Se.url)throw new Error("fetch url missing");var Ee=new He.default,re=new Headers,we=new Request(Se.url);Ee.controller=new AbortController,Se&&Se.requestHeaders&&Se.requestHeaders.forEach(function(Ne){re.append(Ne.key,Ne.value)});var Fe=Se.responseType||"json",tt={method:Se.method||"GET",headers:re,mode:Se.mode||"cors",credentials:Se.credentials||"same-origin",cache:Se.cache||"default",redirect:Se.redirect||"follow",referrer:Se.referrer||"client",signal:Ee.controller.signal};return fetch(we,tt).then(function(Ne){Ee.response=Ne;var je=!0;Ne.body||(je=!1);var Pe=Ne.headers.get("content-length");return null===Pe&&(je=!1),je?(Ee.onProgress=function(me){Ee.fireEvent("progress",me)},new Response(new ReadableStream(new Ye(Ee,Pe,Ne)),tt)):Ne}).then(function(Ne){var je;if(Ne.ok)switch(Fe){case"arraybuffer":return Ne.arrayBuffer();case"json":return Ne.json();case"blob":return Ne.blob();case"text":return Ne.text();default:je="Unknown responseType: "+Fe}throw je||(je="HTTP error status: "+Ne.status),new Error(je)}).then(function(Ne){Ee.fireEvent("success",Ne)}).catch(function(Ne){Ee.fireEvent("error",Ne)}),Ee.fetchRequest=we,Ee};var He=function Qe(Se){return Se&&Se.__esModule?Se:{default:Se}}(ve("./src/util/observer.js"));function ce(Se,Ee){for(var re=0;re<Ee.length;re++){var we=Ee[re];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(Se,we.key,we)}}var Ye=function(){function Se(Ee,re,we){(function Ke(Se,Ee){if(!(Se instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,Se),this.instance=Ee,this.instance._reader=we.body.getReader(),this.total=parseInt(re,10),this.loaded=0}return function ze(Se,Ee,re){Ee&&ce(Se.prototype,Ee),re&&ce(Se,re),Object.defineProperty(Se,"prototype",{writable:!1})}(Se,[{key:"start",value:function(re){var we=this;!function tt(){we.instance._reader.read().then(function(Ne){var Pe=Ne.value;if(Ne.done)return 0===we.total&&we.instance.onProgress.call(we.instance,{loaded:we.loaded,total:we.total,lengthComputable:!1}),void re.close();we.loaded+=Pe.byteLength,we.instance.onProgress.call(we.instance,{loaded:we.loaded,total:we.total,lengthComputable:0!==we.total}),re.enqueue(Pe),tt()}).catch(function(Ne){re.error(Ne)})}()}}]),Se}();Dt.exports=Q.default},"./src/util/frame.js":(Dt,Q,ve)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function Ke(ce){return function(){for(var ze=arguments.length,Ye=new Array(ze),ke=0;ke<ze;ke++)Ye[ke]=arguments[ke];return(0,He.default)(function(){return ce.apply(void 0,Ye)})}};var He=function Qe(ce){return ce&&ce.__esModule?ce:{default:ce}}(ve("./src/util/request-animation-frame.js"));Dt.exports=Q.default},"./src/util/get-id.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ve(He){return void 0===He&&(He="wavesurfer_"),He+Math.random().toString(32).substring(2)},Dt.exports=Q.default},"./src/util/index.js":(Dt,Q,ve)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Object.defineProperty(Q,"Observer",{enumerable:!0,get:function(){return ze.default}}),Object.defineProperty(Q,"absMax",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(Q,"clamp",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(Q,"debounce",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(Q,"fetchFile",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(Q,"frame",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(Q,"getId",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(Q,"ignoreSilenceMode",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(Q,"max",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(Q,"min",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(Q,"preventClick",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(Q,"requestAnimationFrame",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(Q,"style",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(Q,"withOrientation",{enumerable:!0,get:function(){return tt.default}});var He=je(ve("./src/util/get-id.js")),Qe=je(ve("./src/util/max.js")),Ke=je(ve("./src/util/min.js")),ce=je(ve("./src/util/absMax.js")),ze=je(ve("./src/util/observer.js")),Ye=je(ve("./src/util/style.js")),ke=je(ve("./src/util/request-animation-frame.js")),Se=je(ve("./src/util/frame.js")),Ee=je(ve("./node_modules/debounce/index.js")),re=je(ve("./src/util/prevent-click.js")),we=je(ve("./src/util/fetch.js")),Fe=je(ve("./src/util/clamp.js")),tt=je(ve("./src/util/orientation.js")),Ne=je(ve("./src/util/silence-mode.js"));function je(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}},"./src/util/max.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ve(He){var Qe=-1/0;return Object.keys(He).forEach(function(Ke){He[Ke]>Qe&&(Qe=He[Ke])}),Qe},Dt.exports=Q.default},"./src/util/min.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ve(He){var Qe=Number(1/0);return Object.keys(He).forEach(function(Ke){He[Ke]<Qe&&(Qe=He[Ke])}),Qe},Dt.exports=Q.default},"./src/util/observer.js":(Dt,Q)=>{"use strict";function He(ce,ze){for(var Ye=0;Ye<ze.length;Ye++){var ke=ze[Ye];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(ce,ke.key,ke)}}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0,Q.default=function(){function ce(){(function ve(ce,ze){if(!(ce instanceof ze))throw new TypeError("Cannot call a class as a function")})(this,ce),this._disabledEventEmissions=[],this.handlers=null}return function Qe(ce,ze,Ye){ze&&He(ce.prototype,ze),Ye&&He(ce,Ye),Object.defineProperty(ce,"prototype",{writable:!1})}(ce,[{key:"on",value:function(Ye,ke){var Se=this;this.handlers||(this.handlers={});var Ee=this.handlers[Ye];return Ee||(Ee=this.handlers[Ye]=[]),Ee.push(ke),{name:Ye,callback:ke,un:function(we,Fe){return Se.un(we,Fe)}}}},{key:"un",value:function(Ye,ke){if(this.handlers){var Ee,Se=this.handlers[Ye];if(Se)if(ke)for(Ee=Se.length-1;Ee>=0;Ee--)Se[Ee]==ke&&Se.splice(Ee,1);else Se.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(Ye,ke){var Se=this;return this.on(Ye,function re(){for(var we=arguments.length,Fe=new Array(we),tt=0;tt<we;tt++)Fe[tt]=arguments[tt];ke.apply(Se,Fe),setTimeout(function(){Se.un(Ye,re)},0)})}},{key:"setDisabledEventEmissions",value:function(Ye){this._disabledEventEmissions=Ye}},{key:"_isDisabledEventEmission",value:function(Ye){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(Ye)}},{key:"fireEvent",value:function(Ye){for(var ke=arguments.length,Se=new Array(ke>1?ke-1:0),Ee=1;Ee<ke;Ee++)Se[Ee-1]=arguments[Ee];if(this.handlers&&!this._isDisabledEventEmission(Ye)){var re=this.handlers[Ye];re&&re.forEach(function(we){we.apply(void 0,Se)})}}}]),ce}(),Dt.exports=Q.default},"./src/util/orientation.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function Ke(ce,ze){return ce[Qe]?ce:new Proxy(ce,{get:function(ke,Se,Ee){if(Se===Qe)return!0;if("domElement"===Se)return ke;if("style"===Se)return Ke(ke.style,ze);if("canvas"===Se)return Ke(ke.canvas,ze);if("getBoundingClientRect"===Se)return function(){return Ke(ke.getBoundingClientRect.apply(ke,arguments),ze)};if("getContext"===Se)return function(){return Ke(ke.getContext.apply(ke,arguments),ze)};var re=ke[He(Se,ze)];return"function"==typeof re?re.bind(ke):re},set:function(ke,Se,Ee){return ke[He(Se,ze)]=Ee,!0}})};var ve={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function He(ce,ze){return Object.prototype.hasOwnProperty.call(ve,ce)&&ze?ve[ce]:ce}var Qe=Symbol("isProxy");Dt.exports=Q.default},"./src/util/prevent-click.js":(Dt,Q)=>{"use strict";function ve(Qe){Qe.stopPropagation(),document.body.removeEventListener("click",ve,!0)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function He(Qe){document.body.addEventListener("click",ve,!0)},Dt.exports=Q.default},"./src/util/request-animation-frame.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var ve=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(He,Qe){return setTimeout(He,1e3/60)}).bind(window);Q.default=ve,Dt.exports=Q.default},"./src/util/silence-mode.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ve(){var Qe=document.createElement("div");Qe.innerHTML='<audio x-webkit-airplay="deny"></audio>';var Ke=Qe.children.item(0);Ke.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",Ke.preload="auto",Ke.type="audio/mpeg",Ke.disableRemotePlayback=!0,Ke.play(),Ke.remove(),Qe.remove()},Dt.exports=Q.default},"./src/util/style.js":(Dt,Q)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=function ve(He,Qe){return Object.keys(Qe).forEach(function(Ke){He.style[Ke]!==Qe[Ke]&&(He.style[Ke]=Qe[Ke])}),He},Dt.exports=Q.default},"./src/wavesurfer.js":(Dt,Q,ve)=>{"use strict";function He(S){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(S)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var Qe=function re(S,F){if(!F&&S&&S.__esModule)return S;if(null===S||"object"!==He(S)&&"function"!=typeof S)return{default:S};var G=Ee(F);if(G&&G.has(S))return G.get(S);var W={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in S)if("default"!==K&&Object.prototype.hasOwnProperty.call(S,K)){var ue=D?Object.getOwnPropertyDescriptor(S,K):null;ue&&(ue.get||ue.set)?Object.defineProperty(W,K,ue):W[K]=S[K]}return W.default=S,G&&G.set(S,W),W}(ve("./src/util/index.js")),Ke=Se(ve("./src/drawer.multicanvas.js")),ce=Se(ve("./src/webaudio.js")),ze=Se(ve("./src/mediaelement.js")),Ye=Se(ve("./src/peakcache.js")),ke=Se(ve("./src/mediaelement-webaudio.js"));function Se(S){return S&&S.__esModule?S:{default:S}}function Ee(S){if("function"!=typeof WeakMap)return null;var F=new WeakMap,G=new WeakMap;return(Ee=function(D){return D?G:F})(S)}function Fe(S,F){return(Fe=Object.setPrototypeOf||function(W,D){return W.__proto__=D,W})(S,F)}function Ne(S,F){if(F&&("object"===He(F)||"function"==typeof F))return F;if(void 0!==F)throw new TypeError("Derived constructors may only return object or undefined");return je(S)}function je(S){if(void 0===S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function me(S){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)})(S)}function Te(S,F,G){return F in S?Object.defineProperty(S,F,{value:G,enumerable:!0,configurable:!0,writable:!0}):S[F]=G,S}function M(S,F){for(var G=0;G<F.length;G++){var W=F[G];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(S,W.key,W)}}var P=function(S){!function we(S,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(F&&F.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),F&&Fe(S,F)}(G,S);var F=function tt(S){var F=function Pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var D,W=me(S);if(F){var K=me(this).constructor;D=Reflect.construct(W,arguments,K)}else D=W.apply(this,arguments);return Ne(this,D)}}(G);function G(W){var D;if(function X(S,F){if(!(S instanceof F))throw new TypeError("Cannot call a class as a function")}(this,G),Te(je(D=F.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:Ke.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}}),Te(je(D),"backends",{MediaElement:ze.default,WebAudio:ce.default,MediaElementWebAudio:ke.default}),Te(je(D),"util",Qe),D.params=Object.assign({},D.defaultParams,W),D.params.splitChannelsOptions=Object.assign({},D.defaultParams.splitChannelsOptions,W.splitChannelsOptions),D.container="string"==typeof W.container?document.querySelector(D.params.container):D.params.container,!D.container)throw new Error("Container element not found");if(D.mediaContainer=null==D.params.mediaContainer?D.container:"string"==typeof D.params.mediaContainer?document.querySelector(D.params.mediaContainer):D.params.mediaContainer,!D.mediaContainer)throw new Error("Media Container element not found");if(D.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(D.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===D.params.rtl&&Qe.style(D.container,!0===D.params.vertical?{transform:"rotateX(180deg)"}:{transform:"rotateY(180deg)"}),D.params.backgroundColor&&D.setBackgroundColor(D.params.backgroundColor),D.savedVolume=0,D.isMuted=!1,D.tmpEvents=[],D.currentRequest=null,D.arraybuffer=null,D.drawer=null,D.backend=null,D.peakCache=null,"function"!=typeof D.params.renderer)throw new Error("Renderer parameter is invalid");D.Drawer=D.params.renderer,"AudioElement"==D.params.backend&&(D.params.backend="MediaElement"),("WebAudio"==D.params.backend||"MediaElementWebAudio"===D.params.backend)&&!ce.default.prototype.supportsWebAudio.call(null)&&(D.params.backend="MediaElement"),D.Backend=D.backends[D.params.backend],D.initialisedPluginList={},D.isDestroyed=!1,D.isReady=!1;var K=0;return D._onResize=Qe.debounce(function(){D.drawer.wrapper&&K!=D.drawer.wrapper.clientWidth&&!D.params.scrollParent&&(K=D.drawer.wrapper.clientWidth)&&D.drawer.fireEvent("redraw")},"number"==typeof D.params.responsive?D.params.responsive:100),Ne(D,je(D))}return function E(S,F,G){return F&&M(S.prototype,F),G&&M(S,G),Object.defineProperty(S,"prototype",{writable:!1}),S}(G,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(D){var K=this;return D.forEach(function(ue){return K.addPlugin(ue)}),D.forEach(function(ue){ue.deferInit||K.initPlugin(ue.name)}),this.fireEvent("plugins-registered",D),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(D){var K=this;if(!D.name)throw new Error("Plugin does not have a name!");if(!D.instance)throw new Error("Plugin ".concat(D.name," does not have an instance property!"));D.staticProps&&Object.keys(D.staticProps).forEach(function(ut){K[ut]=D.staticProps[ut]});var ue=D.instance;return Object.getOwnPropertyNames(Qe.Observer.prototype).forEach(function(ut){ue.prototype[ut]=Qe.Observer.prototype[ut]}),this[D.name]=new ue(D.params||{},this),this.fireEvent("plugin-added",D.name),this}},{key:"initPlugin",value:function(D){if(!this[D])throw new Error("Plugin ".concat(D," has not been added yet!"));return this.initialisedPluginList[D]&&this.destroyPlugin(D),this[D].init(),this.initialisedPluginList[D]=!0,this.fireEvent("plugin-initialised",D),this}},{key:"destroyPlugin",value:function(D){if(!this[D])throw new Error("Plugin ".concat(D," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[D])throw new Error("Plugin ".concat(D," is not active and cannot be destroyed!"));if("function"!=typeof this[D].destroy)throw new Error("Plugin ".concat(D," does not have a destroy function!"));return this[D].destroy(),delete this.initialisedPluginList[D],this.fireEvent("plugin-destroyed",D),this}},{key:"destroyAllPlugins",value:function(){var D=this;Object.keys(this.initialisedPluginList).forEach(function(K){return D.destroyPlugin(K)})}},{key:"createDrawer",value:function(){var D=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){D.drawBuffer(),D.drawer.progress(D.backend.getPlayedPercents())}),this.drawer.on("click",function(K,ue){setTimeout(function(){return D.seekTo(ue)},0)}),this.drawer.on("scroll",function(K){D.params.partialRender&&D.drawBuffer(),D.fireEvent("scroll",K)})}},{key:"createBackend",value:function(){var D=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){D.drawer.progress(D.backend.getPlayedPercents()),D.fireEvent("finish")}),this.backend.on("play",function(){return D.fireEvent("play")}),this.backend.on("pause",function(){return D.fireEvent("pause")}),this.backend.on("audioprocess",function(K){D.drawer.progress(D.backend.getPlayedPercents()),D.fireEvent("audioprocess",K)}),("MediaElement"===this.params.backend||"MediaElementWebAudio"===this.params.backend)&&(this.backend.on("seek",function(){D.drawer.progress(D.backend.getPlayedPercents())}),this.backend.on("volume",function(){var K=D.getVolume();D.fireEvent("volume",K),D.backend.isMuted!==D.isMuted&&(D.isMuted=D.backend.isMuted,D.fireEvent("mute",D.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new Ye.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(D){D>=this.getDuration()?this.seekTo(1):this.seekTo(D/this.getDuration())}},{key:"play",value:function(D,K){var ue=this;return this.params.ignoreSilenceMode&&Qe.ignoreSilenceMode(),this.fireEvent("interaction",function(){return ue.play(D,K)}),this.backend.play(D,K)}},{key:"setPlayEnd",value:function(D){this.backend.setPlayEnd(D)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(D){this.skip(-D||-this.params.skipLength)}},{key:"skipForward",value:function(D){this.skip(D||this.params.skipLength)}},{key:"skip",value:function(D){var K=this.getDuration()||1,ue=this.getCurrentTime()||0;ue=Math.max(0,Math.min(K,ue+(D||0))),this.seekAndCenter(ue/K)}},{key:"seekAndCenter",value:function(D){this.seekTo(D),this.drawer.recenter(D)}},{key:"seekTo",value:function(D){var K=this;if("number"!=typeof D||!isFinite(D)||D<0||D>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return K.seekTo(D)});var ue="WebAudio"===this.params.backend,De=this.backend.isPaused();ue&&!De&&this.backend.pause();var ut=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(D*this.getDuration()),this.drawer.progress(D),ue&&!De&&this.backend.play(),this.params.scrollParent=ut,this.fireEvent("seek",D)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(D){return this.backend.setSinkId(D)}},{key:"setVolume",value:function(D){this.backend.setVolume(D),this.fireEvent("volume",D)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(D){this.backend.setPlaybackRate(D)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(D){D!==this.isMuted?(this.backend.setMute?(this.backend.setMute(D),this.isMuted=D):D?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[D]?this.params.splitChannelsOptions.channelColors[D].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(D){var K=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[K]?this.params.splitChannelsOptions.channelColors[K].waveColor=D:this.params.waveColor=D,this.drawBuffer()}},{key:"getProgressColor",value:function(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[D]?this.params.splitChannelsOptions.channelColors[D].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(D,K){this.params.splitChannelsOptions.channelColors[K]?this.params.splitChannelsOptions.channelColors[K].progressColor=D:this.params.progressColor=D,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(D){this.params.backgroundColor=D,Qe.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(D){this.params.cursorColor=D,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(D){this.params.height=D,this.drawer.setHeight(D*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(D){this.params.splitChannelsOptions.filterChannels=D,this.drawBuffer()}},{key:"drawBuffer",value:function(){var he,D=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),K=this.drawer.getWidth(),ue=D,De=0,ut=Math.max(De+K,ue);if(this.params.fillParent&&(!this.params.scrollParent||D<K)&&(De=0,ut=ue=K),this.params.partialRender){var bt,pe=this.peakCache.addRangeToPeakCache(ue,De,ut);for(bt=0;bt<pe.length;bt++)he=this.backend.getPeaks(ue,pe[bt][0],pe[bt][1]),this.drawer.drawPeaks(he,ue,pe[bt][0],pe[bt][1])}else he=this.backend.getPeaks(ue,De,ut),this.drawer.drawPeaks(he,ue,De,ut);this.fireEvent("redraw",he,ue)}},{key:"zoom",value:function(D){D?(this.params.minPxPerSec=D,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",D)}},{key:"loadArrayBuffer",value:function(D){var K=this;this.decodeArrayBuffer(D,function(ue){K.isDestroyed||K.loadDecodedBuffer(ue)})}},{key:"loadDecodedBuffer",value:function(D){this.backend.load(D),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(D){var K=this,ue=new FileReader;ue.addEventListener("progress",function(De){return K.onProgress(De)}),ue.addEventListener("load",function(De){return K.loadArrayBuffer(De.target.result)}),ue.addEventListener("error",function(){return K.fireEvent("error","Error reading file")}),ue.readAsArrayBuffer(D),this.empty()}},{key:"load",value:function(D,K,ue,De){if(!D)throw new Error("url parameter cannot be empty");if(this.empty(),ue){var ut={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(ue),"Peaks are not provided":!K,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof D},he=Object.keys(ut).filter(function(pe){return ut[pe]});he.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+he.join("\n\t- ")),ue=null)}switch("WebAudio"===this.params.backend&&D instanceof HTMLMediaElement&&(D=D.src),this.params.backend){case"WebAudio":return this.loadBuffer(D,K,De);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(D,K,ue,De)}}},{key:"loadBuffer",value:function(D,K,ue){var De=this,ut=function(pe){return pe&&De.tmpEvents.push(De.once("ready",pe)),De.getArrayBuffer(D,function(bt){return De.loadArrayBuffer(bt)})};if(!K)return ut();this.backend.setPeaks(K,ue),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",ut))}},{key:"loadMediaElement",value:function(D,K,ue,De){var ut=this,he=D;if("string"==typeof D)this.backend.load(he,this.mediaContainer,K,ue);else{var pe=D;this.backend.loadElt(pe,K),he=pe.src}this.tmpEvents.push(this.backend.once("canplay",function(){ut.backend.destroyed||(ut.drawBuffer(),ut.isReady=!0,ut.fireEvent("ready"))}),this.backend.once("error",function(bt){return ut.fireEvent("error",bt)})),K&&(this.backend.setPeaks(K,De),this.drawBuffer(),this.fireEvent("waveform-ready")),(!K||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(he,function(bt){ut.decodeArrayBuffer(bt,function(vt){ut.backend.buffer=vt,ut.backend.setPeaks(null),ut.drawBuffer(),ut.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(D,K){var ue=this;this.isDestroyed||(this.arraybuffer=D,this.backend.decodeArrayBuffer(D,function(De){!ue.isDestroyed&&ue.arraybuffer==D&&(K(De),ue.arraybuffer=null)},function(){return ue.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(D,K){var ue=this,De=Object.assign({url:D,responseType:"arraybuffer"},this.params.xhr),ut=Qe.fetchFile(De);return this.currentRequest=ut,this.tmpEvents.push(ut.on("progress",function(he){ue.onProgress(he)}),ut.on("success",function(he){K(he),ue.currentRequest=null}),ut.on("error",function(he){ue.fireEvent("error",he),ue.currentRequest=null})),ut}},{key:"onProgress",value:function(D){this.fireEvent("loading",Math.round(100*(D.lengthComputable?D.loaded/D.total:D.loaded/(D.loaded+1e6))),D.target)}},{key:"exportPCM",value:function(D,K,ue,De,ut){K=K||1e4,ue=ue||!1;var he=this.backend.getPeaks(D=D||1024,De=De||0,ut),pe=[].map.call(he,function(bt){return Math.round(bt*K)/K});return new Promise(function(bt,vt){if(!ue){var ft=new Blob([JSON.stringify(pe)],{type:"application/json;charset=utf-8"}),an=URL.createObjectURL(ft);window.open(an),URL.revokeObjectURL(an)}bt(pe)})}},{key:"exportImage",value:function(D,K,ue){return D||(D="image/png"),K||(K=1),ue||(ue="dataURL"),this.drawer.getImage(D,K,ue)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(D){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(D){return D.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(D){return new G(D).init()}}]),G}(Qe.Observer);Q.default=P,Te(P,"VERSION","6.2.0"),Te(P,"util",Qe),Dt.exports=Q.default},"./src/webaudio.js":(Dt,Q,ve)=>{"use strict";function He(M){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(M)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var Qe=function ce(M,E){if(!E&&M&&M.__esModule)return M;if(null===M||"object"!==He(M)&&"function"!=typeof M)return{default:M};var N=Ke(E);if(N&&N.has(M))return N.get(M);var P={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in M)if("default"!==F&&Object.prototype.hasOwnProperty.call(M,F)){var G=S?Object.getOwnPropertyDescriptor(M,F):null;G&&(G.get||G.set)?Object.defineProperty(P,F,G):P[F]=M[F]}return P.default=M,N&&N.set(M,P),P}(ve("./src/util/index.js"));function Ke(M){if("function"!=typeof WeakMap)return null;var E=new WeakMap,N=new WeakMap;return(Ke=function(S){return S?N:E})(M)}function Ye(M,E){for(var N=0;N<E.length;N++){var P=E[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(M,P.key,P)}}function Ee(M,E){return(Ee=Object.setPrototypeOf||function(P,S){return P.__proto__=S,P})(M,E)}function we(M,E){if(E&&("object"===He(E)||"function"==typeof E))return E;if(void 0!==E)throw new TypeError("Derived constructors may only return object or undefined");return Fe(M)}function Fe(M){if(void 0===M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Ne(M){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(M)}function je(M,E,N){return E in M?Object.defineProperty(M,E,{value:N,enumerable:!0,configurable:!0,writable:!0}):M[E]=N,M}var Pe="playing",me="paused",Te="finished",X=function(M){!function Se(M,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(E&&E.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),E&&Ee(M,E)}(N,M);var E=function re(M){var E=function tt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var S,P=Ne(M);if(E){var F=Ne(this).constructor;S=Reflect.construct(P,arguments,F)}else S=P.apply(this,arguments);return we(this,S)}}(N);function N(P){var S,F,G;return function ze(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}(this,N),je(Fe(G=E.call(this)),"audioContext",null),je(Fe(G),"offlineAudioContext",null),je(Fe(G),"stateBehaviors",(je(S={},Pe,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var D=this.getDuration();return this.getCurrentTime()/D||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),je(S,me,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var D=this.getDuration();return this.getCurrentTime()/D||0},getCurrentTime:function(){return this.startPosition}}),je(S,Te,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),S)),G.params=P,G.ac=P.audioContext||(G.supportsWebAudio()?G.getAudioContext():{}),G.lastPlay=G.ac.currentTime,G.startPosition=0,G.scheduledPause=null,G.states=(je(F={},Pe,Object.create(G.stateBehaviors[Pe])),je(F,me,Object.create(G.stateBehaviors[me])),je(F,Te,Object.create(G.stateBehaviors[Te])),F),G.buffer=null,G.filters=[],G.gainNode=null,G.mergedPeaks=null,G.offlineAc=null,G.peaks=null,G.playbackRate=1,G.analyser=null,G.scriptNode=null,G.source=null,G.splitPeaks=[],G.state=null,G.explicitDuration=P.duration,G.sinkStreamDestination=null,G.sinkAudioElement=null,G.destroyed=!1,G}return function ke(M,E,N){E&&Ye(M.prototype,E),N&&Ye(M,N),Object.defineProperty(M,"prototype",{writable:!1})}(N,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(S){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,S)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(me),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(S){S&&S.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(S){this.state!==this.states[S]&&(this.state=this.states[S],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var S=arguments.length,F=new Array(S),G=0;G<S;G++)F[G]=arguments[G];this.setFilters(F)}},{key:"setFilters",value:function(S){this.disconnectFilters(),S&&S.length&&(this.filters=S,this.analyser.disconnect(),S.reduce(function(F,G){return F.connect(G),G},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.scriptNode=this.params.audioScriptProcessor?this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.ac.createScriptProcessor(N.scriptBufferSize):this.ac.createJavaScriptNode(N.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var S=this;this.scriptNode.onaudioprocess=function(){var F=S.getCurrentTime();F>=S.getDuration()?(S.setState(Te),S.fireEvent("pause")):F>=S.scheduledPause?S.pause():S.state===S.states[Pe]&&S.fireEvent("audioprocess",F)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.gainNode=this.ac.createGain?this.ac.createGain():this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(S){return S?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(S)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+S))}},{key:"setVolume",value:function(S){this.gainNode.gain.setValueAtTime(S,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(S,F,G){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(S,function(W){return F(W)},G):this.offlineAc.decodeAudioData(S).then(function(W){return F(W)}).catch(function(W){return G(W)})}},{key:"setPeaks",value:function(S,F){null!=F&&(this.explicitDuration=F),this.peaks=S}},{key:"setLength",value:function(S){if(!this.mergedPeaks||S!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var G,F=this.buffer?this.buffer.numberOfChannels:1;for(G=0;G<F;G++)this.splitPeaks[G]=[],this.splitPeaks[G][2*(S-1)]=0,this.splitPeaks[G][2*(S-1)+1]=0;this.mergedPeaks[2*(S-1)]=0,this.mergedPeaks[2*(S-1)+1]=0}}},{key:"getPeaks",value:function(S,F,G){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(F=F||0,G=G||S-1,this.setLength(S),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var W=this.createBuffer(1,4096,this.sampleRate);this.buffer=W.buffer}var De,D=this.buffer.length/S,K=~~(D/10)||1,ue=this.buffer.numberOfChannels;for(De=0;De<ue;De++){var ut=this.splitPeaks[De],he=this.buffer.getChannelData(De),pe=void 0;for(pe=F;pe<=G;pe++){var bt=~~(pe*D),vt=~~(bt+D),ft=he[bt],an=ft,Oe=void 0;for(Oe=bt;Oe<vt;Oe+=K){var Dn=he[Oe];Dn>an&&(an=Dn),Dn<ft&&(ft=Dn)}ut[2*pe]=an,ut[2*pe+1]=ft,(0==De||an>this.mergedPeaks[2*pe])&&(this.mergedPeaks[2*pe]=an),(0==De||ft<this.mergedPeaks[2*pe+1])&&(this.mergedPeaks[2*pe+1]=ft)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(S){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=S,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[Pe]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(S,F){if(this.buffer)return this.scheduledPause=null,null==S&&(S=this.getCurrentTime())>=this.getDuration()&&(S=0),null==F&&(F=this.getDuration()),this.startPosition=S,this.lastPlay=this.ac.currentTime,this.state===this.states[Te]&&this.setState(me),{start:S,end:F}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(S,F){if(this.buffer){this.createSource();var G=this.seekTo(S,F);S=G.start,this.scheduledPause=F=G.end,this.source.start(0,S),this.resumeAudioContext(),this.setState(Pe),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(me),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(S){this.playbackRate=S||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(S){this.scheduledPause=S}}]),N}(Qe.Observer);Q.default=X,je(X,"scriptBufferSize",256),Dt.exports=Q.default},"./node_modules/debounce/index.js":Dt=>{function Q(ve,He,Qe){var Ke,ce,ze,Ye,ke;function Se(){var re=Date.now()-Ye;re<He&&re>=0?Ke=setTimeout(Se,He-re):(Ke=null,Qe||(ke=ve.apply(ze,ce),ze=ce=null))}null==He&&(He=100);var Ee=function(){ze=this,ce=arguments,Ye=Date.now();var re=Qe&&!Ke;return Ke||(Ke=setTimeout(Se,He)),re&&(ke=ve.apply(ze,ce),ze=ce=null),ke};return Ee.clear=function(){Ke&&(clearTimeout(Ke),Ke=null)},Ee.flush=function(){Ke&&(ke=ve.apply(ze,ce),ze=ce=null,clearTimeout(Ke),Ke=null)},Ee}Q.debounce=Q,Dt.exports=Q}},rs={},Jo=function Qt(Dt){var Q=rs[Dt];if(void 0!==Q)return Q.exports;var ve=rs[Dt]={exports:{}};return Gl[Dt](ve,ve.exports,Qt),ve.exports}("./src/wavesurfer.js"),Jo;var Gl,rs,Jo})()}},Ul=>{Ul(Ul.s=120)}]);